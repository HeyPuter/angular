{
  "version": 3,
  "sources": ["../../../../../../node_modules/@heyputer/putility/src/bases/BasicBase.js", "../../../../../../node_modules/@heyputer/putility/src/bases/FeatureBase.js", "../../../../../../node_modules/@heyputer/putility/src/features/NodeModuleDIFeature.js", "../../../../../../node_modules/@heyputer/putility/src/features/PropertiesFeature.js", "../../../../../../node_modules/@heyputer/putility/src/features/TraitsFeature.js", "../../../../../../node_modules/@heyputer/putility/src/features/NariMethodsFeature.js", "../../../../../../node_modules/@heyputer/putility/src/traits/traits.js", "../../../../../../node_modules/@heyputer/putility/src/libs/listener.js", "../../../../../../node_modules/@heyputer/putility/src/features/TopicsFeature.js", "../../../../../../node_modules/@heyputer/putility/src/AdvancedBase.js", "../../../../../../node_modules/@heyputer/putility/src/features/ServiceFeature.js", "../../../../../../node_modules/@heyputer/putility/src/concepts/Service.js", "../../../../../../node_modules/@heyputer/putility/src/system/ServiceManager.js", "../../../../../../node_modules/@heyputer/putility/src/libs/promise.js", "../../../../../../node_modules/@heyputer/putility/src/libs/context.js", "../../../../../../node_modules/@heyputer/putility/src/libs/log.js", "../../../../../../node_modules/@heyputer/putility/src/libs/string.js", "../../../../../../node_modules/@heyputer/putility/src/libs/time.js", "../../../../../../node_modules/@heyputer/putility/src/libs/smol.js", "../../../../../../node_modules/@heyputer/putility/src/features/EmitterFeature.js", "../../../../../../node_modules/@heyputer/putility/src/libs/event.js", "../../../../../../node_modules/@heyputer/putility/index.js", "../../../../../../node_modules/@heyputer/kv.js/XMap.js", "../../../../../../node_modules/@heyputer/kv.js/kv.js", "../../../../../../node_modules/@heyputer/puter.js/src/index.js", "../../../../../../node_modules/@heyputer/puter.js/src/lib/APICallLogger.js", "../../../../../../node_modules/@heyputer/puter.js/src/lib/path.js", "../../../../../../node_modules/@heyputer/puter.js/src/lib/polyfills/localStorage.js", "../../../../../../node_modules/@heyputer/puter.js/src/lib/polyfills/xhrshim.js", "../../../../../../node_modules/@heyputer/puter.js/src/lib/polyfills/fileReaderPoly.js", "../../../../../../node_modules/@heyputer/puter.js/src/lib/utils.js", "../../../../../../node_modules/@heyputer/puter.js/src/modules/AI.js", "../../../../../../node_modules/@heyputer/puter.js/src/modules/Apps.js", "../../../../../../node_modules/@heyputer/puter.js/src/modules/Auth.js", "../../../../../../node_modules/@heyputer/puter.js/src/modules/Debug.js", "../../../../../../node_modules/@heyputer/puter.js/src/modules/Drivers.js", "../../../../../../node_modules/@heyputer/puter.js/src/lib/socket.io/socket.io.esm.min.js", "../../../../../../node_modules/@heyputer/puter.js/src/modules/FileSystem/utils/getAbsolutePathForApp.js", "../../../../../../node_modules/@heyputer/puter.js/src/modules/FileSystem/operations/copy.js", "../../../../../../node_modules/@heyputer/puter.js/src/modules/FileSystem/operations/mkdir.js", "../../../../../../node_modules/@heyputer/puter.js/src/modules/FileSystem/operations/stat.js", "../../../../../../node_modules/@heyputer/puter.js/src/modules/FileSystem/operations/move.js", "../../../../../../node_modules/@heyputer/puter.js/src/modules/FileSystem/operations/read.js", "../../../../../../node_modules/@heyputer/puter.js/src/modules/FileSystem/operations/readdir.js", "../../../../../../node_modules/@heyputer/puter.js/src/modules/FileSystem/operations/rename.js", "../../../../../../node_modules/@heyputer/puter.js/src/modules/FileSystem/operations/sign.js", "../../../../../../node_modules/@heyputer/puter.js/src/modules/FileSystem/operations/space.js", "../../../../../../node_modules/@heyputer/puter.js/src/modules/FileSystem/operations/symlink.js", "../../../../../../node_modules/@heyputer/puter.js/src/modules/FileSystem/operations/upload.js", "../../../../../../node_modules/@heyputer/puter.js/src/modules/FileSystem/operations/write.js", "../../../../../../node_modules/@heyputer/puter.js/src/modules/FileSystem/index.js", "../../../../../../node_modules/@heyputer/puter.js/src/modules/FSItem.js", "../../../../../../node_modules/@heyputer/puter.js/src/modules/FileSystem/operations/deleteFSEntry.js", "../../../../../../node_modules/@heyputer/puter.js/src/modules/FileSystem/operations/getReadUrl.js", "../../../../../../node_modules/@heyputer/puter.js/src/modules/Hosting.js", "../../../../../../node_modules/@heyputer/puter.js/src/modules/KV.js", "../../../../../../node_modules/@heyputer/puter.js/src/lib/EventListener.js", "../../../../../../node_modules/@heyputer/puter.js/src/modules/networking/parsers.js", "../../../../../../node_modules/@heyputer/puter.js/src/modules/networking/PWispHandler.js", "../../../../../../node_modules/@heyputer/puter.js/src/modules/networking/PSocket.js", "../../../../../../node_modules/@heyputer/puter.js/src/modules/networking/PTLS.js", "../../../../../../node_modules/@heyputer/puter.js/src/modules/networking/requests.js", "../../../../../../node_modules/@heyputer/puter.js/src/modules/OS.js", "../../../../../../node_modules/@heyputer/puter.js/src/modules/Perms.js", "../../../../../../node_modules/@heyputer/puter.js/src/lib/RequestError.js", "../../../../../../node_modules/@heyputer/puter.js/src/modules/Threads.js", "../../../../../../node_modules/@heyputer/puter.js/src/modules/UI.js", "../../../../../../node_modules/@heyputer/puter.js/src/modules/PuterDialog.js", "../../../../../../node_modules/@heyputer/puter.js/src/lib/xdrpc.js", "../../../../../../node_modules/@heyputer/puter.js/src/modules/Util.js", "../../../../../../node_modules/@heyputer/puter.js/src/modules/Workers.js", "../../../../../../node_modules/@heyputer/puter.js/src/services/APIAccess.js", "../../../../../../node_modules/@heyputer/puter.js/src/services/Filesystem.js", "../../../../../../node_modules/@heyputer/puter.js/src/lib/filesystem/APIFS.js", "../../../../../../node_modules/@heyputer/puter.js/src/lib/filesystem/definitions.js", "../../../../../../node_modules/@heyputer/puter.js/src/lib/filesystem/CacheFS.js", "../../../../../../node_modules/@heyputer/puter.js/src/lib/filesystem/PostMessageFS.js", "../../../../../../node_modules/@heyputer/puter.js/src/services/FSRelay.js", "../../../../../../node_modules/@heyputer/puter.js/src/services/NoPuterYet.js", "../../../../../../node_modules/@heyputer/puter.js/src/services/XDIncoming.js"],
  "sourcesContent": ["/*\n * Copyright (C) 2024-present Puter Technologies Inc.\n */\n\n/**\n * Base class that provides utilities for working with inheritance chains and static properties.\n */\nclass BasicBase {\n    /**\n     * Gets the inheritance chain for the current instance, starting from the most derived class\n     * and working up to BasicBase (excluded).\n     * @returns {Array<Function>} Array of constructor functions in inheritance order\n     */\n    _get_inheritance_chain () {\n        const chain = [];\n        let cls = this.constructor;\n        while ( cls && cls !== BasicBase ) {\n            chain.push(cls);\n            cls = cls.__proto__;\n        }\n        return chain.reverse();\n    }\n\n    /**\n     * Merges static array properties from all classes in the inheritance chain.\n     * Avoids duplicating the same array reference from contiguous members\n     * of the inheritance chain (useful when using the decorator pattern with\n     * multiple classes sharing a common base)\n     * @param {string} key - The name of the static property to merge\n     * @returns {Array} Combined array containing all values from the inheritance chain\n     */\n    _get_merged_static_array (key) {\n        const chain = this._get_inheritance_chain();\n        const values = [];\n        let last = null;\n        for ( const cls of chain ) {\n            if ( cls[key] && cls[key] !== last ) {\n                last = cls[key];\n                values.push(...cls[key]);\n            }\n        }\n        return values;\n    }\n\n    /**\n     * Merges static object properties from all classes in the inheritance chain.\n     * Properties from derived classes override those from base classes.\n     * @param {string} key - The name of the static property to merge\n     * @returns {Object} Combined object containing all properties from the inheritance chain\n     */\n    _get_merged_static_object (key) {\n        // TODO: check objects by reference - same object in a subclass shouldn't count\n        const chain = this._get_inheritance_chain();\n        const values = {};\n        for ( const cls of chain ) {\n            if ( cls[key] ) {\n                Object.assign(values, cls[key]);\n            }\n        }\n        return values;\n    }\n}\n\nmodule.exports = {\n    BasicBase,\n};", "/*\n * Copyright (C) 2024-present Puter Technologies Inc.\n */\n\nconst { BasicBase } = require(\"./BasicBase\");\n\nclass FeatureBase extends BasicBase {\n    constructor (parameters, ...a) {\n        super(parameters, ...a);\n        \n        this._ = {\n            features: this._get_merged_static_array('FEATURES'),\n        };\n\n        for ( const feature of this._.features ) {\n            feature.install_in_instance(\n                this,\n                {\n                    parameters: parameters || {},\n                }\n            )\n        }\n    }\n}\n\nmodule.exports = {\n    FeatureBase,\n};\n", "/*\n * Copyright (C) 2024-present Puter Technologies Inc.\n */\n\n/**\n * This trait allows dependency injection of node modules.\n * This is incredibly useful for passing mock implementations\n * of modules for unit testing.\n *\n * @example\n * class MyClass extends AdvancedBase {\n *   static MODULES = {\n *     axios,\n *   };\n * }\n *\n * const my_class = new MyClass({\n *   modules: {\n *     axios: MY_AXIOS_MOCK,\n *   }\n * });\n */\nmodule.exports = {\n    install_in_instance: (instance, { parameters }) => {\n        const modules = instance._get_merged_static_object('MODULES');\n\n        if ( parameters.modules ) {\n            for ( const k in parameters.modules ) {\n                modules[k] = parameters.modules[k];\n            }\n        }\n\n        instance.modules = modules;\n        \n        // This \"require\" function can shadow the real one so\n        // that editor tools are aware of the modules that\n        // are being used.\n        instance.require = (name) => {\n            if ( instance.modules[name] ) {\n                return instance.modules[name];\n            }\n            return require(name);\n        }\n    },\n};\n", "/*\n * Copyright (C) 2024-present Puter Technologies Inc.\n */\n\nmodule.exports = {\n    name: 'Properties',\n    depends: ['Listeners'],\n    install_in_instance: (instance, { parameters }) => {\n        const properties = instance._get_merged_static_object('PROPERTIES');\n\n        instance.onchange = (name, callback) => {\n            instance._.properties[name].listeners.push(callback);\n        };\n\n        instance._.properties = {};\n\n        for ( const k in properties ) {\n            const state = {\n                definition: properties[k],\n                listeners: [],\n                value: undefined,\n            };\n            instance._.properties[k] = state;\n\n            let spec = null;\n            if ( typeof properties[k] === 'object' ) {\n                spec = properties[k];\n                if ( spec.factory ) {\n                    spec.value = spec.factory({ parameters });\n                }\n            } else if ( typeof properties[k] === 'function' ) {\n                spec = {};\n                spec.value = properties[k]();\n            }\n\n            if ( spec === null ) {\n                throw new Error('this will never happen');\n            }\n\n            Object.defineProperty(instance, k, {\n                get: () => {\n                    return state.value;\n                },\n                set: (value) => {\n                    for ( const listener of instance._.properties[k].listeners ) {\n                        listener(value, {\n                            old_value: instance[k],\n                        });\n                    }\n                    const old_value = instance[k];\n                    const intermediate_value = value;\n                    if ( spec.adapt ) {\n                        value = spec.adapt(value);\n                    }\n                    state.value = value;\n                    if ( spec.post_set ) {\n                        spec.post_set.call(instance, value, {\n                            intermediate_value,\n                            old_value,\n                        });\n                    }\n                },\n            });\n\n            state.value = spec.value;\n\n            if ( properties[k].construct ) {\n                const k_cons = typeof properties[k].construct === 'string'\n                    ? properties[k].construct\n                    : k;\n                instance[k] = parameters[k_cons];\n            }\n        }\n    }\n}\n", "/*\n * Copyright (C) 2024-present Puter Technologies Inc.\n */\n\nmodule.exports = {\n    // old implementation\n    install_in_instance_: (instance, { parameters }) => {\n        const impls = instance._get_merged_static_object('IMPLEMENTS');\n        \n        instance._.impls = {};\n        \n        for ( const impl_name in impls ) {\n            const impl = impls[impl_name];\n            const bound_impl = {};\n            for ( const method_name in impl ) {\n                const fn = impl[method_name];\n                bound_impl[method_name] = fn.bind(instance);\n            }\n            instance._.impls[impl_name] = bound_impl;\n        }\n        \n        instance.as = trait_name => instance._.impls[trait_name];\n        instance.list_traits = () => Object.keys(instance._.impls);\n    },\n\n    // new implementation\n    install_in_instance: (instance, { parameters }) => {\n        const chain = instance._get_inheritance_chain();\n        instance._.impls = {};\n        \n        instance.as = trait_name => instance._.impls[trait_name];\n        instance.list_traits = () => Object.keys(instance._.impls);\n        instance.mixin = (name, impl) => instance._.impls[name] = impl;\n\n        for ( const cls of chain ) {\n            const cls_traits = cls.IMPLEMENTS;\n            if ( ! cls_traits ) continue;\n            const trait_keys = [\n                ...Object.getOwnPropertySymbols(cls_traits),\n                ...Object.keys(cls_traits),\n            ];\n            for ( const trait_name of trait_keys ) {\n                const impl = instance._.impls[trait_name] ??\n                    (instance._.impls[trait_name] = {});\n                const cls_impl = cls_traits[trait_name];\n\n                for ( const method_name in cls_impl ) {\n                    const fn = cls_impl[method_name];\n                    impl[method_name] = fn.bind(instance);\n                }\n            }\n        }\n    }\n};\n", "/*\n * Copyright (C) 2024-present Puter Technologies Inc.\n */\n\nmodule.exports = {\n    readme: `\n        Normalized Asynchronous Request Invocation (NARI) Methods Feature\n\n        This feature allows a class to define \"Nari methods\", which are methods\n        that support both async/await and callback-style invocation, have\n        positional arguments, and an options argument.\n\n        \"the expected interface for methods in puter.js\"\n\n        The underlying method will receive parameters as an object, with the\n        positional arguments as keys in the object. The options argument will\n        be merged into the parameters object unless the method spec specifies\n        \\`separate_options: true\\`.\n\n        Example:\n\n        \\`\\`\\`\n        class MyClass extends AdvancedBase {\n            static NARI_METHODS = {\n                myMethod: {\n                    positional: ['param1', 'param2'],\n                    fn: ({ param1, param2 }) => {\n                        return param1 + param2;\n                    }\n                }\n            }\n        }\n\n        const instance = new MyClass();\n        const result = instance.myMethod(1, 2); // returns 3\n        \\`\\`\\`\n\n        The method can also be called with options and callbacks:\n\n        \\`\\`\\`\n        instance.myMethod(1, 2, { option1: 'value' }, (result) => {\n            console.log('success', result);\n        }, (error) => {\n            console.error('error', error);\n        });\n        \\`\\`\\`\n    `,\n    install_in_instance: (instance) => {\n        const nariMethodSpecs = instance._get_merged_static_object('NARI_METHODS');\n\n        instance._.nariMethods = {};\n\n        for ( const method_name in nariMethodSpecs ) {\n            const spec = nariMethodSpecs[method_name];\n            const bound_fn = spec.fn.bind(instance);\n            instance._.nariMethods[method_name] = bound_fn;\n\n            instance[method_name] = async (...args) => {\n                const endArgsIndex = (() => {\n                    if ( spec.firstarg_options ) {\n                        if ( typeof args[0] === 'object' ) {\n                            return 0;\n                        }\n                    }\n                    return spec.positional.length;\n                })();\n                const posArgs = args.slice(0, endArgsIndex);\n                const endArgs = args.slice(endArgsIndex);\n\n                const parameters = {};\n                const options = {};\n                const callbacks = {};\n                for ( const [index, arg] of posArgs.entries() ) {\n                    parameters[spec.positional[index]] = arg;\n                }\n                \n                if ( typeof endArgs[0] === 'object' ) {\n                    Object.assign(options, endArgs[0]);\n                    endArgs.shift();\n                }\n\n                if ( typeof endArgs[0] === 'function' ) {\n                    callbacks.success = endArgs[0];\n                    endArgs.shift();\n                } else if ( options.success ) {\n                    callbacks.success = options.success;\n                }\n\n                if ( typeof endArgs[0] === 'function' ) {\n                    callbacks.error = endArgs[0];\n                    endArgs.shift();\n                } else if ( options.error ) {\n                    callbacks.error = options.error;\n                }\n\n                if ( spec.separate_options ) {\n                    parameters.options = options;\n                } else {\n                    Object.assign(parameters, options);\n                }\n\n                let retval;\n                try {\n                    retval = await bound_fn(parameters);\n                } catch (e) {\n                    if ( callbacks.error ) {\n                        callbacks.error(e);\n                    } else {\n                        throw e;\n                    }\n                }\n\n                if ( callbacks.success ) {\n                    callbacks.success(retval);\n                }\n\n                return retval;\n            };\n        }\n    }\n};\n", "/*\n * Copyright (C) 2024-present Puter Technologies Inc.\n */\n\nmodule.exports = {\n    TTopics: Symbol('TTopics'),\n    TDetachable: Symbol('TDetachable'),\n    TLogger: Symbol('TLogger'),\n\n    AS: (obj, trait) => {\n        if ( obj.constructor && obj.constructor.IMPLEMENTS && obj.constructor.IMPLEMENTS[trait] ) {\n            return obj.as(trait);\n        }\n        return obj;\n    }\n};\n", "/*\n * Copyright (C) 2024-present Puter Technologies Inc.\n */\n\nconst { FeatureBase } = require(\"../bases/FeatureBase\");\nconst { TDetachable } = require(\"../traits/traits\");\n\n// NOTE: copied from src/backend/src/util/listenerutil.js,\n//       which is now deprecated.\n\nclass MultiDetachable extends FeatureBase {\n    static FEATURES = [\n        require('../features/TraitsFeature'),\n    ];\n\n    constructor() {\n        super();\n        this.delegates = [];\n        this.detached_ = false;\n    }\n    \n    add (delegate) {\n        if ( this.detached_ ) {\n            delegate.detach();\n            return;\n        }\n\n        this.delegates.push(delegate);\n    }\n    \n    static IMPLEMENTS = {\n        [TDetachable]: {\n            detach () {\n                this.detached_ = true;\n                for ( const delegate of this.delegates ) {\n                    delegate.detach();\n                }\n            }\n        }\n    }\n}\n\nclass AlsoDetachable extends FeatureBase {\n    static FEATURES = [\n        require('../features/TraitsFeature'),\n    ];\n\n    constructor () {\n        super();\n        this.also = () => {};\n    }\n\n    also (also) {\n        this.also = also;\n        return this;\n    }\n\n    static IMPLEMENTS = {\n        [TDetachable]: {\n            detach () {\n                this.detach_();\n                this.also();\n            }\n        }\n    }\n}\n\n// TODO: this doesn't work, but I don't know why yet.\nclass RemoveFromArrayDetachable extends AlsoDetachable {\n    constructor (array, element) {\n        super();\n        this.array = new WeakRef(array);\n        this.element = element;\n    }\n    \n    detach_ () {\n        const array = this.array.deref();\n        if ( ! array ) return;\n        const index = array.indexOf(this.element);\n        if ( index !== -1 ) {\n            array.splice(index, 1);\n        }\n    }\n}\n\nmodule.exports = {\n    MultiDetachable,\n    RemoveFromArrayDetachable,\n};\n", "/*\n * Copyright (C) 2024-present Puter Technologies Inc.\n */\n\nconst { RemoveFromArrayDetachable } = require(\"../libs/listener\");\nconst { TTopics } = require(\"../traits/traits\");\nconst { install_in_instance } = require(\"./NodeModuleDIFeature\");\n\nmodule.exports = {\n    install_in_instance: (instance, { parameters }) => {\n        const topics = instance._get_merged_static_array('TOPICS');\n\n        instance._.topics = {};\n\n        for ( const name of topics ) {\n            instance._.topics[name] = {\n                listeners_: [],\n            };\n        }\n\n        instance.mixin(TTopics, {\n            pub: (k, v) => {\n                if ( k.includes('!') ) {\n                    throw new Error(\n                        '\"!\" in event name reserved for future use');\n                }\n                const topic = instance._.topics[k];\n                if ( ! topic ) {\n                    console.warn('missing topic: ' + topic);\n                    return;\n                }\n                for ( const lis of topic.listeners_ ) {\n                    lis();\n                }\n            },\n            sub: (k, fn) => {\n                const topic = instance._.topics[k];\n                if ( ! topic ) {\n                    console.warn('missing topic: ' + topic);\n                    return;\n                }\n                topic.listeners_.push(fn);\n                return new RemoveFromArrayDetachable(topic.listeners_, fn);\n            }\n        })\n\n    }\n};\n", "/*\n * Copyright (C) 2024-present Puter Technologies Inc.\n */\n\n// This doesn't go in ./bases because it logically depends on\n// both ./bases and ./traits, and ./traits depends on ./bases.\n\nconst { FeatureBase } = require(\"./bases/FeatureBase\");\n\nclass AdvancedBase extends FeatureBase {\n    static FEATURES = [\n        require('./features/NodeModuleDIFeature'),\n        require('./features/PropertiesFeature'),\n        require('./features/TraitsFeature'),\n        require('./features/NariMethodsFeature'),\n        require('./features/TopicsFeature'),\n    ]\n}\n\nmodule.exports = {\n    AdvancedBase,\n};\n", "/*\n * Copyright (C) 2024-present Puter Technologies Inc.\n */\n\nconst { TTopics } = require(\"../traits/traits\");\n\nmodule.exports = {\n    install_in_instance: (instance, { parameters }) => {\n        // Convenient definition of listeners between services,\n        // which also makes these connections able to be understood as data\n        // without processing any code.\n        const hooks = instance._get_merged_static_array('HOOKS');\n        instance._.init_hooks = instance._.init_hooks ?? [];\n\n        for ( const spec of hooks ) {\n\n            // We need to wait for the service to be initialized, because\n            // that's when the dependency services have already been\n            // initialized and are ready to accept listeners.\n            instance._.init_hooks.push(() => {\n                const service_entry =\n                    instance._.context.services.info(spec.service);\n                const service_instance = service_entry.instance;\n\n                service_instance.as(TTopics).sub(\n                    spec.event,\n                    spec.do.bind(instance),\n                );\n            });\n        }\n    }\n};\n", "/*\n * Copyright (C) 2024-present Puter Technologies Inc.\n */\n\nconst { AdvancedBase } = require(\"../AdvancedBase\");\nconst ServiceFeature = require(\"../features/ServiceFeature\");\n\n/** @type {Function} No-operation async function */\nconst NOOP = async () => {};\n\n/** @type {Symbol} Service trait symbol */\nconst TService = Symbol('TService');\n\n/**\n * Service class that will be incrementally updated to consolidate\n * BaseService in Puter's backend with Service in Puter's frontend,\n * becoming the common base for both and a useful utility in general.\n * \n * @class Service\n * @extends AdvancedBase\n */\nclass Service extends AdvancedBase {\n    /** @type {Array} Array of features this service supports */\n    static FEATURES = [\n        ServiceFeature,\n    ];\n\n    /**\n     * Handles events by calling the appropriate event handler\n     * \n     * @param {string} id - The event identifier\n     * @param {Array} args - Arguments to pass to the event handler\n     * @returns {Promise<*>} The result of the event handler\n     */\n    async __on (id, args) {\n        const handler = this.__get_event_handler(id);\n\n        return await handler(id, ...args);\n    }\n\n    /**\n     * Retrieves the event handler for a given event ID\n     * \n     * @param {string} id - The event identifier\n     * @returns {Function} The event handler function or NOOP if not found\n     */\n    __get_event_handler (id) {\n        return this[`__on_${id}`]?.bind?.(this)\n            || this.constructor[`__on_${id}`]?.bind?.(this.constructor)\n            || NOOP;\n    }\n\n    /**\n     * Factory method to create a new service instance\n     * \n     * @param {Object} config - Configuration object\n     * @param {Object} config.parameters - Parameters for service construction\n     * @param {Object} config.context - Context for the service\n     * @returns {Service} A new service instance\n     */\n    static create ({ parameters, context }) {\n        const ins = new this();\n        ins._.context = context;\n        ins.as(TService).construct(parameters);\n        return ins;\n    }\n\n    static IMPLEMENTS = {\n        /** @type {Object} Implementation of the TService trait */\n        [TService]: {\n            /**\n             * Initializes the service by running init hooks and calling _init if present\n             * \n             * @param {...*} a - Arguments to pass to _init method\n             * @returns {*} Result of _init method if it exists\n             */\n            init (...a) {\n                if ( this._.init_hooks ) {\n                    for ( const hook of this._.init_hooks ) {\n                        hook.call(this);\n                    }\n                }\n                if ( ! this._init ) return;\n                return this._init(...a);\n            },\n            /**\n             * Constructs the service with given parameters\n             * \n             * @param {Object} o - Parameters object\n             * @returns {*} Result of _construct method if it exists\n             */\n            construct (o) {\n                this.$parameters = {};\n                for ( const k in o ) this.$parameters[k] = o[k];\n                if ( ! this._construct ) return;\n                return this._construct(o);\n            },\n            /**\n             * Gets the dependencies for this service\n             * \n             * @returns {Array} Array of dependencies\n             */\n            get_depends () {\n                return [\n                    ...(this.constructor.DEPENDS ?? []),\n                    ...(this.get_depends?.() ?? []),\n                ];\n            }\n        }\n    }\n}\n\nmodule.exports = {\n    TService,\n    Service,\n};\n", "/*\n * Copyright (C) 2024-present Puter Technologies Inc.\n */\n\nconst { AdvancedBase } = require('../AdvancedBase');\nconst { TService } = require('../concepts/Service');\n\nconst StatusEnum = {\n    Registering: 'registering',\n    Pending: 'pending',\n    Initializing: 'initializing',\n    Running: 'running',\n};\nclass ServiceManager extends AdvancedBase {\n    constructor({ context } = {}) {\n        super();\n\n        this.context = context;\n\n        this.services_l_ = [];\n        this.services_m_ = {};\n        this.service_infos_ = {};\n\n        this.init_listeners_ = [];\n        // services which are waiting for dependency servicces to be\n        // initialized; mapped like: waiting_[dependency] = Set(dependents)\n        this.waiting_ = {};\n    }\n    async register(name, factory, options = {}) {\n        await new Promise(rslv => setTimeout(rslv, 0));\n\n        const ins = factory.create({\n            parameters: options.parameters ?? {},\n            context: this.context,\n        });\n        const entry = {\n            name,\n            instance: ins,\n            status: StatusEnum.Registering,\n        };\n        this.services_l_.push(entry);\n        this.services_m_[name] = entry;\n\n        await this.maybe_init_(name);\n    }\n    info(name) {\n        return this.services_m_[name];\n    }\n    get(name) {\n        const info = this.services_m_[name];\n        if ( ! info ) throw new Error(`Service not registered: ${name}`);\n        if ( info.status !== StatusEnum.Running ) {\n            return undefined;\n        }\n        return info.instance;\n    }\n    async aget(name) {\n        await this.wait_for_init([name]);\n        return this.get(name);\n    }\n\n    /**\n     * Wait for the specified list of services to be initialized.\n     * @param {*} depends - list of services to wait for\n     */\n    async wait_for_init(depends) {\n        let check;\n\n        await new Promise(rslv => {\n            check = () => {\n                // Get the list of required services that are not\n                // yet initialized\n                const waiting_for = this.get_waiting_for_(depends);\n\n                // If there's nothing to wait for, remove the listener\n                // on service initializations and resolve\n                if ( waiting_for.length === 0 ) {\n                    const i = this.init_listeners_.indexOf(check);\n                    if ( i !== -1 ) {\n                        this.init_listeners_.splice(i, 1);\n                    }\n                    rslv();\n\n                    return true;\n                }\n            };\n\n            // Services might already be registered\n            if ( check() ) return;\n\n            this.init_listeners_.push(check);\n        });\n    };\n\n    get_waiting_for_(depends) {\n        const waiting_for = [];\n        for ( const depend of depends ) {\n            const depend_entry = this.services_m_[depend];\n            if ( ! depend_entry ) {\n                waiting_for.push(depend);\n                continue;\n            }\n            if ( ( depend_entry.status !== StatusEnum.Running ) ) {\n                waiting_for.push(depend);\n            }\n        }\n        return waiting_for;\n    }\n\n    async maybe_init_(name) {\n        const entry = this.services_m_[name];\n        const depends = entry.instance.as(TService).get_depends();\n        const waiting_for = this.get_waiting_for_(depends);\n\n        if ( waiting_for.length === 0 ) {\n            await this.init_service_(name);\n            return;\n        }\n\n        for ( const dependency of waiting_for ) {\n            if ( !this.waiting_[dependency] ) {\n                this.waiting_[dependency] = new Set();\n            }\n            this.waiting_[dependency].add(name);\n        }\n\n        entry.status = StatusEnum.Pending;\n        entry.statusWaitingFor = waiting_for;\n    }\n\n    // called when a service has all of its dependencies initialized\n    // and is ready to be initialized itself\n    async init_service_(name, modifiers = {}) {\n        const entry = this.services_m_[name];\n        entry.status = StatusEnum.Initializing;\n\n        const service_impl = entry.instance.as(TService);\n        await service_impl.init();\n        entry.status = StatusEnum.Running;\n        entry.statusStartTS = new Date();\n        /** @type Set */\n        const maybe_ready_set = this.waiting_[name];\n        const promises = [];\n        if ( maybe_ready_set ) {\n            for ( const dependent of maybe_ready_set.values() ) {\n                promises.push(this.maybe_init_(dependent, {\n                    no_init_listeners: true,\n                }));\n            }\n        }\n        await Promise.all(promises);\n\n        if ( ! modifiers.no_init_listeners ) {\n            for ( const lis of this.init_listeners_ ) {\n                await lis();\n            }\n        }\n    }\n}\n\nmodule.exports = {\n    ServiceManager,\n};\n", "/*\n * Copyright (C) 2024-present Puter Technologies Inc.\n */\n\nclass TeePromise {\n    static STATUS_PENDING = Symbol('pending');\n    static STATUS_RUNNING = {};\n    static STATUS_DONE = Symbol('done');\n    constructor () {\n        this.status_ = this.constructor.STATUS_PENDING;\n        this.donePromise = new Promise((resolve, reject) => {\n            this.doneResolve = resolve;\n            this.doneReject = reject;\n        });\n    }\n    get status () {\n        return this.status_;\n    }\n    set status (status) {\n        this.status_ = status;\n        if ( status === this.constructor.STATUS_DONE ) {\n            this.doneResolve();\n        }\n    }\n    resolve (value) {\n        this.status_ = this.constructor.STATUS_DONE;\n        this.doneResolve(value);\n    }\n    awaitDone () {\n        return this.donePromise;\n    }\n    then (fn, ...a) {\n        return this.donePromise.then(fn, ...a);\n    }\n\n    reject (err) {\n        this.status_ = this.constructor.STATUS_DONE;\n        this.doneReject(err);\n    }\n\n    /**\n     * @deprecated use then() instead\n     */\n    onComplete(fn) {\n        return this.then(fn);\n    }\n}\n\nclass Lock {\n    constructor() {\n        this._locked = false;\n        this._waiting = [];\n    }\n\n    async acquire(callback) {\n        await new Promise(resolve => {\n            if ( ! this._locked ) {\n                this._locked = true;\n                resolve();\n            } else {\n                this._waiting.push({\n                    resolve,\n                });\n            }\n        })\n        if ( callback ) {\n            let retval;\n            try {\n                retval = await callback();\n            } finally {\n                this.release();\n            }\n            return retval;\n        }\n    }\n\n    release() {\n        if (this._waiting.length > 0) {\n            const { resolve } = this._waiting.shift();\n            resolve();\n        } else {\n            this._locked = false;\n        }\n    }\n}\n\nclass RWLock {\n    static TYPE_READ = Symbol('read');\n    static TYPE_WRITE = Symbol('write');\n\n    constructor () {\n        this.queue = [];\n\n        this.readers_ = 0;\n        this.writer_ = false;\n\n        this.on_empty_ = () => {};\n\n        this.mode = this.constructor.TYPE_READ;\n    }\n    get effective_mode () {\n        if ( this.readers_ > 0 ) return this.constructor.TYPE_READ;\n        if ( this.writer_ ) return this.constructor.TYPE_WRITE;\n        return undefined;\n    }\n    push_ (item) {\n        if ( this.readers_ === 0 && ! this.writer_ ) {\n            this.mode = item.type;\n        }\n        this.queue.push(item);\n        this.check_queue_();\n    }\n    check_queue_ () {\n        // console.log('check_queue_', {\n        //     readers_: this.readers_,\n        //     writer_: this.writer_,\n        //     queue: this.queue.map(item => item.type),\n        // });\n        if ( this.queue.length === 0 ) {\n            if ( this.readers_ === 0 && ! this.writer_ ) {\n                this.on_empty_();\n            }\n            return;\n        }\n\n        const peek = () => this.queue[0];\n\n        if ( this.readers_ === 0 && ! this.writer_ ) {\n            this.mode = peek().type;\n        }\n\n        if ( this.mode === this.constructor.TYPE_READ ) {\n            while ( peek()?.type === this.constructor.TYPE_READ ) {\n                const item = this.queue.shift();\n                this.readers_++;\n                (async () => {\n                    await item.p_unlock;\n                    this.readers_--;\n                    this.check_queue_();\n                })();\n                item.p_operation.resolve();\n            }\n            return;\n        }\n\n        if ( this.writer_ ) return;\n\n        const item = this.queue.shift();\n        this.writer_ = true;\n        (async () => {\n            await item.p_unlock;\n            this.writer_ = false;\n            this.check_queue_();\n        })();\n        item.p_operation.resolve();\n    }\n    async rlock () {\n        const p_read = new TeePromise();\n        const p_unlock = new TeePromise();\n        const handle = {\n            unlock: () => {\n                p_unlock.resolve();\n            }\n        };\n\n        this.push_({\n            type: this.constructor.TYPE_READ,\n            p_operation: p_read,\n            p_unlock,\n        });\n        await p_read;\n\n        return handle;\n    }\n\n    async wlock () {\n        const p_write = new TeePromise();\n        const p_unlock = new TeePromise();\n        const handle = {\n            unlock: () => {\n                p_unlock.resolve();\n            }\n        };\n\n        this.push_({\n            type: this.constructor.TYPE_WRITE,\n            p_operation: p_write,\n            p_unlock,\n        });\n        await p_write;\n\n        return handle;\n    }\n\n}\n\n/**\n * @callback behindScheduleCallback\n * @param {number} drift - The number of milliseconds that the callback was\n *    called behind schedule.\n * @returns {boolean} - If the callback returns true, the timer will be\n *   cancelled.\n */\n\n/**\n * When passing an async callback to setInterval, it's possible for the\n * callback to be called again before the previous invocation has finished.\n *\n * This function wraps setInterval and ensures that the callback is not\n * called again until the previous invocation has finished.\n *\n * @param {Function} callback - The function to call when the timer elapses.\n * @param {number} delay - The minimum number of milliseconds between invocations.\n * @param {?Array<any>} args - Additional arguments to pass to setInterval.\n * @param {?Object} options - Additional options.\n * @param {behindScheduleCallback} options.onBehindSchedule - A callback to call when the callback is called behind schedule.\n */\nconst asyncSafeSetInterval = async (callback, delay, args, options) => {\n    args = args ?? [];\n    options = options ?? {};\n    const { onBehindSchedule } = options;\n\n    const sleep = (ms) => new Promise(rslv => setTimeout(rslv, ms));\n\n    for ( ;; ) {\n        await sleep(delay);\n\n        const ts_start = Date.now();\n        await callback(...args);\n        const ts_end = Date.now();\n\n        const runtime = ts_end - ts_start;\n        const sleep_time = delay - runtime;\n\n        if ( sleep_time < 0 ) {\n            if ( onBehindSchedule ) {\n                const cancel = await onBehindSchedule(-sleep_time);\n                if ( cancel ) {\n                    return;\n                }\n            }\n        } else {\n            await sleep(sleep_time);\n        }\n    }\n}\n\n/**\n * raceCase is like Promise.race except it takes an object instead of\n * an array, and returns the key of the promise that resolves first\n * as well as the value that it resolved to.\n *\n * @param {Object.<string, Promise>} promise_map\n *\n * @returns {Promise.<[string, any]>}\n */\nconst raceCase = async (promise_map) => {\n    return Promise.race(Object.entries(promise_map).map(\n        ([key, promise]) => promise.then(value => [key, value])));\n};\n\nmodule.exports = {\n    TeePromise,\n    Lock,\n    RWLock,\n    asyncSafeSetInterval,\n    raceCase,\n};\n", "/*\n * Copyright (C) 2024-present Puter Technologies Inc.\n */\n\n/**\n * A context object that manages hierarchical property inheritance and sub-context creation.\n * Properties are copied with their descriptors to maintain getter/setter behavior.\n */\nclass Context {\n    /**\n     * Creates a new Context instance with the provided values.\n     * @param {Object} [values={}] - Initial values to set on the context, with their property descriptors preserved\n     */\n    constructor (values = {}) {\n        const descs = Object.getOwnPropertyDescriptors(values);\n        for ( const k in descs ) {\n            Object.defineProperty(this, k, descs[k]);\n        }\n    }\n    /**\n     * Creates a sub-context that follows specific properties from a source object.\n     * The returned context will have getters that reference the source object's properties.\n     * @param {Object} source - The source object to follow properties from\n     * @param {string[]} keys - Array of property names to follow from the source\n     * @returns {Context} A new sub-context with getters pointing to the source properties\n     */\n    follow (source, keys) {\n        const values = {};\n        for ( const k of keys ) {\n            Object.defineProperty(values, k, {\n                get: () => source[k]\n            });\n        }\n        return this.sub(values);\n    }\n    /**\n     * Creates a sub-context that inherits from the current context with additional or overridden values.\n     * Nested Context instances are recursively sub-contexted with corresponding new values.\n     * @param {Object} [newValues={}] - New values to add or override in the sub-context\n     * @returns {Context} A new context that inherits from this context with the new values applied\n     */\n    sub (newValues) {\n        if ( newValues === undefined ) newValues = {};\n        const sub = Object.create(this);\n\n        const alreadyApplied = {};\n        for ( const k in sub ) {\n            if ( sub[k] instanceof Context ) {\n                const newValuesForK =\n                    newValues.hasOwnProperty(k)\n                        ? newValues[k] : undefined;\n                sub[k] = sub[k].sub(newValuesForK);\n                alreadyApplied[k] = true;\n            }\n        }\n\n        const descs = Object.getOwnPropertyDescriptors(newValues);\n        for ( const k in descs ){\n            if ( alreadyApplied[k] ) continue;\n            Object.defineProperty(sub, k, descs[k]);\n        }\n\n        return sub;\n    }\n}\n\nmodule.exports = {\n    Context,\n};\n", "/*\n * Copyright (C) 2024-present Puter Technologies Inc.\n */\n\nconst { AdvancedBase } = require(\"../AdvancedBase\");\nconst { TLogger, AS } = require(\"../traits/traits\");\n\n/**\n * Logger implementation that stores log entries in an internal array buffer.\n * Useful for testing or collecting log entries for later processing.\n */\nclass ArrayLogger extends AdvancedBase {\n    static PROPERTIES = {\n        buffer: {\n            factory: () => []\n        }\n    }\n    static IMPLEMENTS = {\n        [TLogger]: {\n            /**\n             * Logs a message by storing it in the internal buffer array.\n             * @param {string} level - The log level (e.g., 'info', 'warn', 'error')\n             * @param {string} message - The log message\n             * @param {Object} fields - Additional fields to include with the log entry\n             * @param {Array} values - Additional values to log\n             */\n            log (level, message, fields, values) {\n                this.buffer.push({ level, message, fields, values });\n            }\n        }\n    }\n}\n\n/**\n * Logger that filters log entries based on enabled categories.\n * Only logs messages for categories that have been explicitly enabled.\n */\nclass CategorizedToggleLogger extends AdvancedBase {\n    static PROPERTIES = {\n        categories: {\n            description: 'categories that are enabled',\n            factory: () => ({})\n        },\n        delegate: {\n            construct: true,\n            value: null,\n            adapt: v => AS(v, TLogger),\n        }\n    }\n    static IMPLEMENTS = {\n        [TLogger]: {\n            /**\n             * Logs a message only if the category specified in fields is enabled.\n             * @param {string} level - The log level\n             * @param {string} message - The log message\n             * @param {Object} fields - Fields object that should contain a 'category' property\n             * @param {Array} values - Additional values to log\n             * @returns {*} Result from delegate logger if category is enabled, undefined otherwise\n             */\n            log (level, message, fields, values) {\n                const category = fields.category;\n                if ( ! this.categories[category] ) return;\n                return this.delegate.log(level, message, fields, values);\n            }\n        }\n    }\n    /**\n     * Enables logging for the specified category.\n     * @param {string} category - The category to enable\n     */\n    on (category) {\n        this.categories[category] = true;\n    }\n    /**\n     * Disables logging for the specified category.\n     * @param {string} category - The category to disable\n     */\n    off (category) {\n        delete this.categories[category];\n    }\n}\n\n/**\n * Logger that can be enabled or disabled globally.\n * When disabled, all log messages are ignored.\n */\nclass ToggleLogger extends AdvancedBase {\n    static PROPERTIES = {\n        enabled: {\n            construct: true,\n            value: true\n        },\n        delegate: {\n            construct: true,\n            value: null,\n            adapt: v => AS(v, TLogger),\n        }\n    }\n    static IMPLEMENTS = {\n        [TLogger]: {\n            /**\n             * Logs a message only if the logger is enabled.\n             * @param {string} level - The log level\n             * @param {string} message - The log message\n             * @param {Object} fields - Additional fields to include\n             * @param {Array} values - Additional values to log\n             * @returns {*} Result from delegate logger if enabled, undefined otherwise\n             */\n            log (level, message, fields, values) {\n                if ( ! this.enabled) return;\n                return this.delegate.log(level, message, fields, values);\n            }\n        }\n    }\n}\n\n/**\n * Logger that outputs formatted messages to the console.\n * Supports colored output using ANSI escape codes and different log levels.\n */\nclass ConsoleLogger extends AdvancedBase {\n    static MODULES = {\n        // This would be cool, if it worked in a browser.\n        // util: require('util'),\n\n        util: {\n            inspect: v => v,\n            // inspect: v => {\n            //     if (typeof v === 'string') return v;\n            //     try {\n            //         return JSON.stringify(v);\n            //     } catch (e) {}\n            //     return '' + v;\n            // }\n        }\n    }\n    static PROPERTIES = {\n        console: {\n            construct: true,\n            factory: () => console\n        },\n        format: () => ({\n            info: {\n                ansii: '\\x1b[32;1m',\n            },\n            warn: {\n                ansii: '\\x1b[33;1m',\n            },\n            error: {\n                ansii: '\\x1b[31;1m',\n                err: true,\n            },\n            debug: {\n                ansii: '\\x1b[34;1m',\n            },\n        }),\n    }\n    static IMPLEMENTS = {\n        [TLogger]: {\n            /**\n             * Logs a formatted message to the console with color coding based on log level.\n             * @param {string} level - The log level (info, warn, error, debug)\n             * @param {string} message - The main log message\n             * @param {Object} fields - Additional fields to display\n             * @param {Array} values - Additional values to pass to console\n             */\n            log (level, message, fields, values) {\n                const require = this.require;\n                const util = require('util');\n                const l = this.format[level];\n                let str = '';\n                str += `${l.ansii}[${level.toUpperCase()}]\\x1b[0m `;\n                str += message;\n\n                // fields\n                if (Object.keys(fields).length) {\n                    str += ' ';\n                    str += Object.entries(fields)\n                        .map(([k, v]) => `\\n  ${k}=${util.inspect(v)}`)\n                        .join(' ') + '\\n';\n                }\n\n                (this.console ?? console)[l.err ? 'error' : 'log'](str, ...values);\n            }\n        }\n    }\n}\n\n/**\n * Logger that adds a prefix to all log messages before delegating to another logger.\n */\nclass PrefixLogger extends AdvancedBase {\n    static PROPERTIES = {\n        prefix: {\n            construct: true,\n            value: ''\n        },\n        delegate: {\n            construct: true,\n            value: null,\n            adapt: v => AS(v, TLogger),\n        }\n    }\n    static IMPLEMENTS = {\n        [TLogger]: {\n            /**\n             * Logs a message with the configured prefix prepended to the message.\n             * @param {string} level - The log level\n             * @param {string} message - The original message\n             * @param {Object} fields - Additional fields to include\n             * @param {Array} values - Additional values to log\n             * @returns {*} Result from the delegate logger\n             */\n            log (level, message, fields, values) {\n                return this.delegate.log(\n                    level, this.prefix + message,\n                    fields, values\n                );\n            }\n        }\n    }\n}\n\n/**\n * Logger that adds default fields to all log entries before delegating to another logger.\n */\nclass FieldsLogger extends AdvancedBase {\n    static PROPERTIES = {\n        fields: {\n            construct: true,\n            factory: () => ({})\n        },\n        delegate: {\n            construct: true,\n            value: null,\n            adapt: v => AS(v, TLogger),\n        }\n    }\n\n    static IMPLEMENTS = {\n        [TLogger]: {\n            /**\n             * Logs a message with the configured default fields merged with provided fields.\n             * @param {string} level - The log level\n             * @param {string} message - The log message\n             * @param {Object} fields - Additional fields that will be merged with default fields\n             * @param {Array} values - Additional values to log\n             * @returns {*} Result from the delegate logger\n             */\n            log (level, message, fields, values) {\n                return this.delegate.log(\n                    level, message,\n                    Object.assign({}, this.fields, fields),\n                    values,\n                );\n            }\n        }\n    }\n}\n\n/**\n * Facade that provides a convenient interface for logging operations.\n * Supports method chaining and category management.\n */\nclass LoggerFacade extends AdvancedBase {\n    static PROPERTIES = {\n        impl: {\n            value: () => {\n                return new ConsoleLogger();\n            },\n            adapt: v => AS(v, TLogger),\n            construct: true,\n        },\n        cat: {\n            construct: true,\n        },\n    }\n\n    static IMPLEMENTS = {\n        [TLogger]: {\n            /**\n             * Basic log implementation (currently just outputs to console).\n             * @param {string} level - The log level\n             * @param {string} message - The log message\n             * @param {Object} fields - Additional fields\n             * @param {Array} values - Additional values\n             */\n            log (level, message, fields, values) {\n                console.log()\n            }\n        }\n    }\n\n    /**\n     * Creates a new logger facade with additional default fields.\n     * @param {Object} fields - Default fields to add to all log entries\n     * @returns {LoggerFacade} New logger facade instance with the specified fields\n     */\n    fields (fields) {\n        const new_delegate = new FieldsLogger({\n            fields,\n            delegate: this.impl,\n        });\n        return new LoggerFacade({\n            impl: new_delegate,\n        });\n    }\n\n    /**\n     * Logs an info-level message.\n     * @param {string} message - The message to log\n     * @param {...*} values - Additional values to include in the log\n     */\n    info (message, ...values) {\n        this.impl.log('info', message, {}, values);\n    }\n\n    /**\n     * Enables logging for a specific category.\n     * @param {string} category - The category to enable\n     */\n    on (category) {\n        this.cat.on(category);\n    }\n    /**\n     * Disables logging for a specific category.\n     * @param {string} category - The category to disable\n     */\n    off (category) {\n        this.cat.off(category);\n    }\n}\n\nmodule.exports = {\n    ArrayLogger,\n    CategorizedToggleLogger,\n    ToggleLogger,\n    ConsoleLogger,\n    PrefixLogger,\n    FieldsLogger,\n    LoggerFacade,\n};\n", "// METADATA // {\"def\":\"core.util.strutil\",\"ai-params\":{\"service\":\"claude\"},\"ai-commented\":{\"service\":\"claude\"}}\n\n/*\n * Copyright (C) 2024-present Puter Technologies Inc.\n */\n\n/*eslint no-control-regex: 'off'*/\n\n/**\n* Quotes a string value, handling special cases for undefined, null, functions, objects and numbers.\n* Escapes quotes and returns a JSON-stringified version with quote character normalization.\n* @param {*} str - The value to quote\n* @returns {string} The quoted string representation\n*/\nconst quot = (str) => {\n    if ( str === undefined ) return '[undefined]';\n    if ( str === null ) return '[null]';\n    if ( typeof str === 'function' ) return '[function]';\n    if ( typeof str === 'object' ) return '[object]';\n    if ( typeof str === 'number' ) return '(' + str + ')';\n\n    str = '' + str;\n\n    str = str.replace(/[\"`]/g, m => m === '\"' ? \"`\" : '\"');\n    str = JSON.stringify('' + str);\n    str = str.replace(/[\"`]/g, m => m === '\"' ? \"`\" : '\"');\n    return str;\n}\n\n\n/**\n* Creates an OSC 8 hyperlink sequence for terminal output\n* @param {string} url - The URL to link to\n* @param {string} [text] - Optional display text, defaults to URL if not provided\n* @returns {string} Terminal escape sequence containing the hyperlink\n*/\nconst osclink = (url, text) => {\n    if ( ! text ) text = url;\n    return `\\x1B]8;;${url}\\x1B\\\\${text}\\x1B]8;;\\x1B\\\\`;\n}\n\n\n/**\n* Formats a number as a USD currency string with appropriate decimal places\n* @param {number} amount - The amount to format\n* @returns {string} The formatted USD string\n*/\nconst format_as_usd = (amount) => {\n    if ( amount < 0.01 ) {\n        if ( amount < 0.00001 ) {\n            // scientific notation\n            return '$' + amount.toExponential(2);\n        }\n        return '$' + amount.toFixed(5);\n    }\n    return '$' + amount.toFixed(2);\n}\n\n// wrap.js\nconst wrap_text = (text, width = 71) => {\n    const out = [];\n    const paras = text.split(/\\r?\\n\\s*\\r?\\n/); // split on blank lines\n\n    for (const p of paras) {\n        const words = p.trim().replace(/\\s+/g, ' ').split(' ');\n        if (words.length === 1 && words[0] === '') { out.push(''); continue; }\n\n        let line = '';\n        for (const w of words) {\n            if (line.length === 0) {\n                // start new line; do NOT split long words\n                line = w;\n            } else if (line.length + 1 + w.length <= width) {\n                line += ' ' + w;\n            } else {\n                out.push(line);\n                line = w; // put word on its own new line (even if > width)\n            }\n        }\n        if (line) out.push(line);\n        out.push(''); // blank line between paragraphs\n    }\n\n    // remove the extra trailing blank line\n    if (out.length && out[out.length - 1] === '') out.pop();\n\n    return out;\n};\n\nconst ansi_visible_length = str => {\n    // Regex that matches ANSI escape sequences\n    const escape_regexes = [\n        {\n            name: 'oscAll',\n            re: '/\\x1B\\][^\\x07]*(?:\\x07|\\x1B\\\\)/g',\n        },\n        {\n            name: 'osc8:start',\n            re: /\\x1B\\]8;[^\\x07\\x1B\\\\]*;[^\\x07\\x1B\\\\]*(?:\\x07|\\x1B\\\\)/g,\n        },\n        {\n            name: 'osc8:end',\n            re: /\\x1B\\]8;;(?:\\x07|\\x1B\\\\)/g,\n        },\n        {\n            name: 'csi',\n            re: /\\x1B\\[[0-?]*[ -/]*[@-~]/g,\n        },\n        // /\\x1b\\[[0-9;]*m/g,\n    ];\n\n    /* eslint-disable */\n    return escape_regexes.reduce(\n        (str, { re }) => str.replace(re, ''), str).length;\n    /* eslint-enable */\n};\n\nmodule.exports = {\n    quot,\n    osclink,\n    format_as_usd,\n    wrap_text,\n    ansi_visible_length,\n};\n", "/*\n * Copyright (C) 2024-present Puter Technologies Inc.\n */\n\nclass TimeUnit {\n    static valueOf () {\n        return this.value;\n    }\n}\n\nclass MILLISECOND extends TimeUnit {\n    static value = 1;\n}\n\nclass SECOND extends TimeUnit {\n    static value = 1000 * MILLISECOND;\n}\n\nclass MINUTE extends TimeUnit {\n    static value = 60 * SECOND;\n}\n\nclass HOUR extends TimeUnit {\n    static value = 60 * MINUTE;\n}\n\nclass DAY extends TimeUnit {\n    static value = 24 * HOUR;\n}\n\nconst module_epoch = Date.now();\nconst module_epoch_d = new Date();\n\n/**\n * Displays the current time in only the level of detail necessary based on\n * the time this module was loaded. i.e. If this module was loaded on\n * 2025-01-01 10:32:40, 5 minutes later this function would return \"10:37:40\",\n * one day later this function would return \"02 10:32:40\", and one month later\n * this function would return \"02-01 10:32:40\".\n * @param {*} now - current time as Date object\n */\nconst display_time = (now) => {\n    const pad2 = n => String(n).padStart(2, \"0\");\n\n    const yyyy = now.getFullYear();\n    const mm   = pad2(now.getMonth() + 1);\n    const dd   = pad2(now.getDate());\n    const HH   = pad2(now.getHours());\n    const MM   = pad2(now.getMinutes());\n    const SS   = pad2(now.getSeconds());\n    const time = `${HH}:${MM}:${SS}`;\n\n    const needYear  = yyyy !== module_epoch_d.getFullYear();\n    const needMonth = needYear || (now.getMonth() !== module_epoch_d.getMonth());\n    const needDay   = needMonth || (now.getDate() !== module_epoch_d.getDate());\n\n    if ( needYear  ) return `${yyyy}-${mm}-${dd} ${time}`;\n    if ( needMonth ) return `${mm}-${dd} ${time}`;\n    if ( needDay   ) return `${dd} ${time}`;\n    return time; // same calendar day as first log\n};\n\n\nmodule.exports = {\n    MILLISECOND,\n    SECOND,\n    MINUTE,\n    HOUR,\n    DAY,\n    module_epoch,\n    module_epoch_d,\n    display_time,\n};\n\n", "/*\n * Copyright (C) 2024-present Puter Technologies Inc.\n */\n\n// All of these utilities are trivial and just make the code look nicer.\nclass SmolUtil {\n    // Array coercion\n    static ensure_array (value) {\n        return Array.isArray(value) ? value : [value];\n    }\n    // Variadic sum\n    static add (...a) {\n        return a.reduce((a, b) => a + b, 0);\n    }\n    static split (str, sep, options = {}) {\n        options = options || {};\n        const { trim, discard_empty } = options;\n\n        const operations = [];\n\n        if ( options.trim ) {\n            operations.push(a => a.map(str => str.trim()));\n        }\n\n        if ( options.discard_empty ) {\n            operations.push(a => a.filter(str => str.length > 0));\n        }\n\n        let result = str.split(sep);\n        for ( const operation of operations ) {\n            result = operation(result);\n        }\n        return result;\n    }\n}\n\nmodule.exports = SmolUtil;\n\n", "/*\n * Copyright (C) 2024-present Puter Technologies Inc.\n */\n\n/**\n * A simpler alternative to TopicsFeature. This is an opt-in and not included\n * in AdvancedBase.\n * \n * Adds methods `.on` and `emit`. Unlike TopicsFeature, this does not implement\n * a trait. Usage is similar to node's built-in EventEmitter, but because it's\n * installed as a mixin it can be used with other class features.\n * \n * When listeners return a promise, they will block the promise returned by the\n * corresponding `emit()` call. Listeners are invoked concurrently, so\n * listeners of the same event do not block each other.\n */\nmodule.exports = ({ decorators } = {}) => ({\n    install_in_instance (instance, { parameters }) {\n        // install the internal state\n        const state = instance._.emitterFeature = {};\n        state.listeners_ = {};\n        state.global_listeners_ = [];\n        state.callbackDecorators = decorators || [];\n        \n        instance.emit = async (key, data, meta) => {\n            meta = meta ?? {};\n            const parts = key.split('.');\n            \n            const promises = [];\n            \n            for ( let i = 0 ; i < state.global_listeners_.length ; i++ ) {\n                let callback = state.global_listeners_[i];\n                for ( const decorator of state.callbackDecorators ) {\n                    callback = decorator(callback);\n                }\n\n                promises.push(callback(key, data,\n                    { ...meta, key }));\n            }\n\n            for ( let i = 0; i < parts.length; i++ ) {\n                const part = i === parts.length - 1\n                    ? parts.join('.')\n                    : parts.slice(0, i + 1).join('.') + '.*';\n\n                // actual emit\n                const listeners = state.listeners_[part];\n                if ( ! listeners ) continue;\n                for ( let i = 0; i < listeners.length; i++ ) {\n                    let callback = listeners[i];\n                    for ( const decorator of state.callbackDecorators ) {\n                        callback = decorator(callback);\n                    }\n\n                    promises.push(callback(data, {\n                        ...meta,\n                        key,\n                    }));\n                }\n            }\n\n            return await Promise.all(promises);\n        }\n        \n        instance.on = (selector, callback) => {\n            const listeners = state.listeners_[selector] ||\n                (state.listeners_[selector] = []);\n            \n            listeners.push(callback);\n\n            const det = {\n                detach: () => {\n                    const idx = listeners.indexOf(callback);\n                    if ( idx !== -1 ) {\n                        listeners.splice(idx, 1);\n                    }\n                }\n            };\n\n            return det;\n        }\n\n        instance.on_all = (callback) => {\n            state.global_listeners_.push(callback);\n        };\n    }\n});\n\n", "/*\n * Copyright (C) 2024-present Puter Technologies Inc.\n */\n\nconst { AdvancedBase } = require(\"../AdvancedBase\");\nconst EmitterFeature = require(\"../features/EmitterFeature\");\n\nclass Emitter extends AdvancedBase {\n    static FEATURES = [\n        EmitterFeature(),\n    ];\n}\n\nmodule.exports = { Emitter };\n", "/*\n * Copyright (C) 2024-present Puter Technologies Inc.\n */\n\nconst { AdvancedBase } = require('./src/AdvancedBase');\nconst { Service } = require('./src/concepts/Service');\nconst { ServiceManager } = require('./src/system/ServiceManager');\nconst traits = require('./src/traits/traits');\n\nmodule.exports = {\n    AdvancedBase,\n    system: {\n        ServiceManager,\n    },\n    libs: {\n        promise: require('./src/libs/promise'),\n        context: require('./src/libs/context'),\n        listener: require('./src/libs/listener'),\n        log: require('./src/libs/log'),\n        string: require('./src/libs/string'),\n        time: require('./src/libs/time'),\n        smol: require('./src/libs/smol'),\n        event: require('./src/libs/event'),\n    },\n    features: {\n        EmitterFeature: require('./src/features/EmitterFeature'),\n    },\n    concepts: {\n        Service,\n    },\n    traits,\n};\n", "'use strict';\n\n/**\n * Class representing an extended version of the Map class that supports storing more than\n * 16,777,215 keys by using multiple Map instances internally. This class provides a unified\n * interface to interact with these maps as if it were a single map.\n * \n * Based on InfinityMap by Fabio Spampinato (https://github.com/fabiospampinato/infinity-map) released under the MIT License.\n */\n\nclass XMap {\n    #pool;\n\n    /**\n     * Creates an instance of XMap.\n     * @param {Array} [entries=[]] - Initial set of key-value pairs to add to the map.\n     */\n\n    constructor(entries = []) {\n        /**\n         * @private\n         * @type {Array<Map<any, any>>} - Array of Map instances used to store key-value pairs.\n         */\n        this.#pool = [new Map(entries)];\n    }\n\n    /**\n     * Gets the total number of key-value pairs across all maps.\n     * @return {number} The total number of key-value pairs.\n     */\n    get size() {\n        return this.#pool.reduce((sum, map) => sum + map.size, 0);\n    }\n\n    /**\n     * Removes all key-value pairs from the XMap.\n     */\n    clear() {\n        this.#pool = [new Map()];\n    }\n\n    /**\n     * Deletes a key-value pair from the XMap.\n     * @param {any} key - The key of the element to remove.\n     * @return {boolean} True if an element in the XMap existed and has been removed,\n     * or false if the element does not exist.\n     */\n    delete(key) {\n        return this.#pool.some(map => map.delete(key));\n    }\n\n    /**\n     * Returns a specified element from the XMap.\n     * @param {any} key - The key of the element to return.\n     * @return {any} The element associated with the specified key, or undefined if the\n     * key can't be found in the XMap.\n     */\n    get(key) {\n        for (const map of this.#pool) {\n            if (map.has(key)) {\n                return map.get(key);\n            }\n        }\n    }\n\n    /**\n     * Checks whether an element with the specified key exists in the XMap.\n     * @param {any} key - The key to check for.\n     * @return {boolean} True if an element with the specified key exists, otherwise false.\n     */\n    has(key) {\n        return this.#pool.some(map => map.has(key));\n    }\n\n    /**\n     * Sets the value for the key in the XMap.\n     * @param {any} key - The key of the element to add.\n     * @param {any} value - The value of the element to add.\n     * @return {XMap} The XMap instance, allowing for chaining.\n     */\n    set(key, value) {\n        let targetMap = this.#pool[0];\n\n        // First check if the key already exists in any map\n        for (const map of this.#pool) {\n            if (map.has(key)) {\n                targetMap = map;\n                break;\n            }\n        }\n\n        // If this is a new key and the target map is at capacity, create a new one\n        if (!targetMap.has(key) && targetMap.size >= 8388608) {\n            this.#pool.unshift(new Map());\n            targetMap = this.#pool[0];\n        }\n\n        targetMap.set(key, value);\n\n        return this;\n    }\n\n    /**\n     * Creates an iterator that contains all [key, value] pairs for each element in the XMap in insertion order.\n     * @return {Iterator} An iterator for the XMap entries.\n     */\n    *[Symbol.iterator]() {\n        for (const map of this.#pool) {\n            yield* map;\n        }\n    }\n\n    /**\n     * Creates an iterator that contains the keys for each element in the XMap in insertion order.\n     * @return {Iterator} An iterator for the XMap keys.\n     */\n    *keys() {\n        for (const map of this.#pool) {\n            yield* map.keys();\n        }\n    }\n\n    /**\n     * Creates an iterator that contains the values for each element in the XMap in insertion order.\n     * @return {Iterator} An iterator for the XMap values.\n     */\n    *values() {\n        for (const map of this.#pool) {\n            yield* map.values();\n        }\n    }\n\n    /**\n     * Creates an iterator that contains an array of [key, value] for each element in the XMap in insertion order.\n     * @return {Iterator} An iterator for the XMap entries.\n     */\n    *entries() {\n        for (const map of this.#pool) {\n            yield* map.entries();\n        }\n    }\n\n    /**\n     * Executes a provided function once for each XMap element.\n     * @param {Function} callback - Function to execute for each element, taking three arguments:\n     * value, key, and the XMap instance.\n     * @param {any} [thisArg] - Value to use as this when executing callback.\n     */\n    forEach(callback, thisArg) {\n        for (const [key, value] of this) {\n            callback.call(thisArg, value, key, this);\n        }\n    }\n}\n\nmodule.exports = XMap;", "'use strict';\n\nconst XMap = require('./XMap.js');\n\n/**\n * Simple pattern matching function to replace minimatch\n * Supports *, ?, [abc], [a-c], {txt,log} patterns with case-insensitive matching\n * @param {string} str - The string to test\n * @param {string} pattern - The glob pattern\n * @returns {boolean} - Whether the string matches the pattern\n */\nfunction simpleMatch(str, pattern) {\n    // Convert to lowercase for case-insensitive matching\n    const lowerStr = str.toLowerCase();\n    const lowerPattern = pattern.toLowerCase();\n    \n    // Handle empty pattern\n    if (lowerPattern === '') return false;\n    \n    // Handle exact match\n    if (lowerPattern.indexOf('*') === -1 && lowerPattern.indexOf('?') === -1 && \n        lowerPattern.indexOf('[') === -1 && lowerPattern.indexOf('{') === -1) {\n        return lowerStr === lowerPattern;\n    }\n    \n    // Handle brace expansion {txt,log} -> (txt|log)\n    let expandedPattern = lowerPattern;\n    const braceMatch = expandedPattern.match(/\\{([^}]+)\\}/);\n    if (braceMatch) {\n        const options = braceMatch[1].split(',');\n        const alternatives = options.map(opt => expandedPattern.replace(braceMatch[0], opt.trim()));\n        return alternatives.some(alt => simpleMatch(str, alt));\n    }\n    \n    // Convert glob pattern to regex\n    let regexPattern = '';\n    let i = 0;\n    \n    while (i < expandedPattern.length) {\n        const char = expandedPattern[i];\n        \n        if (char === '*') {\n            regexPattern += '.*';\n        } else if (char === '?') {\n            regexPattern += '.';\n        } else if (char === '[') {\n            // Handle character class [abc] or [a-c]\n            let j = i + 1;\n            let charClass = '[';\n            \n            while (j < expandedPattern.length && expandedPattern[j] !== ']') {\n                charClass += expandedPattern[j];\n                j++;\n            }\n            \n            if (j < expandedPattern.length) {\n                charClass += ']';\n                regexPattern += charClass;\n                i = j;\n            } else {\n                // Malformed character class, treat [ as literal\n                regexPattern += '\\\\[';\n            }\n        } else {\n            // Escape special regex characters\n            if (/[.+^${}()|\\\\]/.test(char)) {\n                regexPattern += '\\\\' + char;\n            } else {\n                regexPattern += char;\n            }\n        }\n        i++;\n    }\n    \n    try {\n        const regex = new RegExp('^' + regexPattern + '$', 'i');\n        return regex.test(str);\n    } catch (e) {\n        // If regex is invalid, fall back to exact match\n        return lowerStr === lowerPattern;\n    }\n}\n\n// The cleanup loop runs as long as there's at least one key set, and will\n// regularly check for expired keys and remove them from the store.\nconst CLEANUP_INTERVAL = 20;\n\nclass kvjs {\n    constructor(options = {}) {\n        // Handle different parameter formats for backward compatibility\n        if (typeof options === 'string') {\n            options = { dbName: options };\n        }\n        \n        // Initialize the store and expireTimes maps\n        this.store = new XMap();\n        this.expireTimes = new XMap();\n        \n        // IndexedDB properties\n        this.db = null;\n        this.dbName = options.dbName;\n        this.dbVersion = options.dbVersion || 1;\n        this.isIndexedDBAvailable = false;\n        this.isInitialized = false;\n        this.initPromise = null;\n\n        // wrap the set function to trigger the cleanup interval on each set\n        this.storeSet = (key, value) => {\n            this.store.set(key, value);\n            this._initCleanupLoop(CLEANUP_INTERVAL);\n            // Persist to IndexedDB if available\n            if (this.isIndexedDBAvailable && this.db) {\n                this._persistToIndexedDB(key, value);\n            }\n        }\n\n        // Initialize IndexedDB if available\n        this._initIndexedDB();\n    }\n\n    /**\n     * Initialize IndexedDB if available in the browser environment\n     * @private\n     */\n    _initIndexedDB() {\n        // Check if we're in a browser environment, IndexedDB is available, and dbName was explicitly provided\n        if (typeof window !== 'undefined' && window.indexedDB && this.dbName) {\n            this.isIndexedDBAvailable = true;\n            this.initPromise = this._setupIndexedDB();\n        } else {\n            this.isInitialized = true;\n        }\n    }\n\n    /**\n     * Set up IndexedDB database and load existing data\n     * @private\n     * @returns {Promise<void>}\n     */\n    async _setupIndexedDB() {\n        try {\n            this.db = await this._openDatabase();\n            await this._loadFromIndexedDB();\n            this.isInitialized = true;\n        } catch (error) {\n            console.warn('Failed to initialize IndexedDB:', error);\n            this.isIndexedDBAvailable = false;\n            this.isInitialized = true;\n        }\n    }\n\n    /**\n     * Open IndexedDB database\n     * @private\n     * @returns {Promise<IDBDatabase>}\n     */\n    _openDatabase() {\n        return new Promise((resolve, reject) => {\n            const request = indexedDB.open(this.dbName, this.dbVersion);\n            \n            request.onerror = () => reject(request.error);\n            request.onsuccess = () => resolve(request.result);\n            \n            request.onupgradeneeded = (event) => {\n                const db = event.target.result;\n                \n                // Create object stores if they don't exist\n                if (!db.objectStoreNames.contains('store')) {\n                    db.createObjectStore('store', { keyPath: 'key' });\n                }\n                \n                if (!db.objectStoreNames.contains('expireTimes')) {\n                    db.createObjectStore('expireTimes', { keyPath: 'key' });\n                }\n            };\n        });\n    }\n\n    /**\n     * Load existing data from IndexedDB into memory\n     * @private\n     * @returns {Promise<void>}\n     */\n    async _loadFromIndexedDB() {\n        if (!this.db) return;\n\n        try {\n            const transaction = this.db.transaction(['store', 'expireTimes'], 'readonly');\n            const storeObjectStore = transaction.objectStore('store');\n            const expireTimesObjectStore = transaction.objectStore('expireTimes');\n\n            // Load store data\n            const storeRequest = storeObjectStore.getAll();\n            const expireTimesRequest = expireTimesObjectStore.getAll();\n\n            const [storeData, expireTimesData] = await Promise.all([\n                new Promise((resolve, reject) => {\n                    storeRequest.onsuccess = () => resolve(storeRequest.result);\n                    storeRequest.onerror = () => reject(storeRequest.error);\n                }),\n                new Promise((resolve, reject) => {\n                    expireTimesRequest.onsuccess = () => resolve(expireTimesRequest.result);\n                    expireTimesRequest.onerror = () => reject(expireTimesRequest.error);\n                })\n            ]);\n\n            // Populate in-memory stores\n            storeData.forEach(item => {\n                this.store.set(item.key, item.value);\n            });\n\n            expireTimesData.forEach(item => {\n                this.expireTimes.set(item.key, item.expireTime);\n            });\n\n            // Clean up any expired keys that were loaded\n            const currentTime = Date.now();\n            for (const [key, expireTime] of this.expireTimes.entries()) {\n                if (currentTime > expireTime) {\n                    this.store.delete(key);\n                    this.expireTimes.delete(key);\n                    // Also remove from IndexedDB\n                    this._removeFromIndexedDB(key);\n                }\n            }\n\n        } catch (error) {\n            console.warn('Failed to load data from IndexedDB:', error);\n        }\n    }\n\n    /**\n     * Persist a key-value pair to IndexedDB\n     * @private\n     * @param {*} key - The key to persist\n     * @param {*} value - The value to persist\n     */\n    async _persistToIndexedDB(key, value) {\n        if (!this.db) return;\n\n        try {\n            const transaction = this.db.transaction(['store'], 'readwrite');\n            const objectStore = transaction.objectStore('store');\n            objectStore.put({ key, value });\n        } catch (error) {\n            console.warn('Failed to persist to IndexedDB:', error);\n        }\n    }\n\n    /**\n     * Persist expiration time to IndexedDB\n     * @private\n     * @param {*} key - The key\n     * @param {number} expireTime - The expiration timestamp\n     */\n    async _persistExpirationToIndexedDB(key, expireTime) {\n        if (!this.db) return;\n\n        try {\n            const transaction = this.db.transaction(['expireTimes'], 'readwrite');\n            const objectStore = transaction.objectStore('expireTimes');\n            if (expireTime !== undefined) {\n                objectStore.put({ key, expireTime });\n            } else {\n                objectStore.delete(key);\n            }\n        } catch (error) {\n            console.warn('Failed to persist expiration to IndexedDB:', error);\n        }\n    }\n\n    /**\n     * Remove a key from IndexedDB\n     * @private\n     * @param {*} key - The key to remove\n     */\n    async _removeFromIndexedDB(key) {\n        if (!this.db) return;\n\n        try {\n            const transaction = this.db.transaction(['store', 'expireTimes'], 'readwrite');\n            const storeObjectStore = transaction.objectStore('store');\n            const expireTimesObjectStore = transaction.objectStore('expireTimes');\n            \n            storeObjectStore.delete(key);\n            expireTimesObjectStore.delete(key);\n        } catch (error) {\n            console.warn('Failed to remove from IndexedDB:', error);\n        }\n    }\n\n    /**\n     * Wait for IndexedDB initialization to complete\n     * @returns {Promise<void>}\n     */\n    async waitForInitialization() {\n        if (this.isInitialized) return;\n        if (this.initPromise) {\n            await this.initPromise;\n        }\n    }\n\n    /**\n     * Set the string value of a key with optional NX/XX/GET/EX/PX/EXAT/PXAT/KEEPTTL, GET, and expiration options.\n     * @param {*} key - The key to set.\n     * @param {*} value - The value to set.\n     * @param {Object} [options] - An object with optional arguments.\n     *                              NX (boolean): Set the key only if it does not exist.\n     *                              XX (boolean): Set the key only if it already exists.\n     *                              GET (boolean): Return the old value of the key before setting the new value.\n     *                              EX (number|undefined): Set the key with an expiration time (in seconds).\n     *                              PX (number|undefined): Set the key with an expiration time (in milliseconds).\n     *                              EXAT (number|undefined): Set the key with an exact UNIX timestamp (in seconds) for expiration.\n     *                              PXAT (number|undefined): Set the key with an exact UNIX timestamp (in milliseconds) for expiration.\n     *                              KEEPTTL (boolean): Retain the key's existing TTL when setting a new value.\n     * @returns {boolean|undefined} - true if the operation was successful, or the existing value if the GET option is specified and the key already exists.\n     */\n    set(key, value, options = {}) {\n        const {\n            NX = false,\n            XX = false,\n            GET = false,\n            EX = undefined,\n            PX = undefined,\n            EXAT = undefined,\n            PXAT = undefined,\n            KEEPTTL = false,\n        } = options;\n\n        const nx = NX;\n        const xx = XX;\n        const get = GET;\n        let ex = EX ? parseInt(EX, 10) : undefined;\n        let px = PX ? parseInt(PX, 10) : undefined;\n        let exat = EXAT ? parseInt(EXAT, 10) : undefined;\n        let pxat = PXAT ? parseInt(PXAT, 10) : undefined;\n        const keepttl = KEEPTTL;\n\n        // Check if the key already exists\n        const exists = this.store.has(key);\n        if (xx && !exists) {\n            return undefined;\n        }\n        if (nx && exists) {\n            return undefined;\n        }\n\n        // Get the existing value if the GET option is specified\n        let oldValue;\n        if (get && exists) {\n            oldValue = this.store.get(key);\n        }\n\n        // Set the new value\n        this.storeSet(key, value);\n\n        // Handle expiration options\n        if (ex !== undefined || px !== undefined || exat !== undefined || pxat !== undefined || keepttl) {\n            let expireTime = undefined;\n            if (ex !== undefined) {\n                expireTime = Date.now() + ex * 1000;\n            } else if (px !== undefined) {\n                expireTime = Date.now() + px;\n            } else if (exat !== undefined) {\n                expireTime = exat * 1000;\n            } else if (pxat !== undefined) {\n                expireTime = pxat;\n            } else if (keepttl && exists) {\n                expireTime = this.expireTimes.get(key);\n            }\n            if (expireTime !== undefined) {\n                this.expireTimes.set(key, expireTime);\n                // Persist expiration to IndexedDB if available\n                if (this.isIndexedDBAvailable && this.db) {\n                    this._persistExpirationToIndexedDB(key, expireTime);\n                }\n            }\n        } else {\n            this.expireTimes.delete(key);\n            // Remove expiration from IndexedDB if available\n            if (this.isIndexedDBAvailable && this.db) {\n                this._persistExpirationToIndexedDB(key, undefined);\n            }\n        }\n\n        return get ? oldValue : true;\n    }\n    \n    /**\n     * Get the value of a key.\n     * @param {*} key - The key to get.\n     * @returns {*} - The value of the key, or `undefined` if the key does not exist or has expired.\n     */\n    get(key) {\n        const isExpired = this._checkAndRemoveExpiredKey(key);\n        if (isExpired)\n            return undefined;\n\n        return this.store.get(key);\n    }\n\n    /**\n     * Delete specified key(s). If a key does not exist, it is ignored.\n     * @param {*} key - The key to delete.\n     * @returns {number} - 1 if the key was deleted, 0 if the key did not exist or has expired.\n     */\n    del(...keys) {\n        let numDeleted = 0;\n\n        for (const key of keys) {\n            // Check if the key has expired and remove it if it has.\n            const isExpired = this._checkAndRemoveExpiredKey(key);\n            if (isExpired) {\n                continue;\n            }\n\n            // Delete the key from the Map and delete any existing expiration time.\n            if (this.store.delete(key)) {\n                this.expireTimes.delete(key);\n                // Remove from IndexedDB if available\n                if (this.isIndexedDBAvailable && this.db) {\n                    this._removeFromIndexedDB(key);\n                }\n                numDeleted++;\n            }\n        }\n\n        // Return the number of keys that were deleted.\n        return numDeleted;\n    }\n\n    /**\n     * Check if one or more keys exist.\n     * @param {...string} keys - The keys to check.\n     * @returns {number} - The number of keys that exist.\n     */\n    exists(...keys) {\n        let numExists = 0;\n\n        for (const key of keys) {\n            // Check if the key has expired and remove it if it has.\n            const isExpired = this._checkAndRemoveExpiredKey(key);\n            if (isExpired) {\n                continue;\n            }\n\n            // Increment the number of existing keys if the key exists in the Map.\n            if (this.store.has(key)) {\n                numExists++;\n            }\n        }\n\n        // Return the number of keys that exist.\n        return numExists;\n    }\n\n    /**\n     * Increment the value of a key by 1.\n     * @param {*} key - The key to increment.\n     * @returns {number} - The new value of the key.\n     */\n    incr(key) {\n        return this.incrby(key, 1);\n    }\n\n    /**\n     * Increment the value of a key by a given amount.\n     * @param {*} key - The key to increment.\n     * @param {number} increment - The amount to increment the key by.\n     * @returns {number} - The new value of the key.\n     * @throws {Error} - If the value of the key is not an integer.\n     */\n    incrby(key, increment) {\n        let value = this.store.get(key);\n        if (value === undefined) {\n            value = 0;\n        } else if (!Number.isInteger(Number(value))) {\n            throw new Error('ERR value is not an integer');\n        }\n\n        const newValue = Number(value) + increment;\n        this.storeSet(key, newValue.toString());\n        return newValue;\n    }\n\n    /**\n     * Decrement the value of a key by 1.\n     * @param {*} key - The key to decrement.\n     * @returns {number} - The new value of the key.\n     * @throws {Error} - If the value is not an integer.\n     */\n    decr(key) {\n        try {\n            return this.decrby(key, 1);\n        } catch (err) {\n            throw err;\n        }\n    }\n\n    /**\n     * Decrement the value of a key by a given amount.\n     * @param {*} key - The key to decrement.\n     * @param {number} decrement - The amount to decrement the key by.\n     * @returns {number} - The new value of the key.\n     * @throws {Error} - If the value is not an integer.\n     */\n    decrby(key, decrement) {\n        let value = this.store.get(key);\n        if (value === undefined) {\n            value = 0;\n        } else if (!Number.isInteger(Number(value))) {\n            throw new Error('ERR value is not an integer');\n        }\n\n        const newValue = Number(value) - decrement;\n        this.storeSet(key, newValue.toString());\n        return newValue;\n    }\n\n    /**\n     * Set a key's time to live in seconds.\n     * @param {*} key - The key to set the expiry time for.\n     * @param {number} seconds - The number of seconds until the key should expire.\n     * @param {Object} options - (Optional) An object containing the option for the expiry behavior.\n     *                          Can be { NX: true } (set expire only if key has no expiry time),\n     *                          { XX: true } (set expire only if key has an expiry time),\n     *                          { GT: true } (set expire only if key's expiry time is greater than the specified time),\n     *                          or { LT: true } (set expire only if key's expiry time is less than the specified time).\n     * @returns {number} - 1 if the key's expiry time was set, 0 otherwise.\n     */\n    expire(key, seconds, options = {}) {\n        if (!this.store.has(key)) {\n            return 0;\n        }\n\n        const { NX = false, XX = false, GT = false, LT = false } = options;\n\n        const now = Date.now();\n        const expireTime = this.expireTimes.get(key);\n\n        if (NX && expireTime !== undefined) {\n            return 0;\n        } else if (XX && expireTime === undefined) {\n            return 0;\n        } else if (GT && (expireTime === undefined || expireTime <= now + seconds * 1000)) {\n            return 0;\n        } else if (LT && (expireTime === undefined || expireTime >= now + seconds * 1000)) {\n            return 0;\n        }\n\n        this.expireTimes.set(key, now + seconds * 1000);\n        return 1;\n    }\n\n    /**\n     * Find all keys matching the specified pattern.\n     * @param {string} pattern - The pattern to match keys against. Supports glob-style patterns.\n     * @returns {Array} - An array of keys that match the specified pattern.\n     */\n    keys(pattern) {\n        const keys = [];\n    \n        for (const [key, value] of this.store.entries()) {\n            if (simpleMatch(key, pattern)) {\n                const expireTime = this.expireTimes.get(key);\n                if (expireTime === undefined || expireTime > Date.now()) {\n                    keys.push(key);\n                }\n            }\n        }\n    \n        return keys;\n    }\n    \n    /**\n     * Returns an array of values stored at the given keys. If a key is not found, undefined is returned for that key.\n     * @param {...string} keys - The keys to retrieve.\n     * @returns {Array} - An array of values.\n     */\n    mget(...keys) {\n        return keys.map(key => this.get(key));\n    }\n\n    /**\n     * Set multiple keys to their respective values.\n     * @param  {...any} keyValuePairs - The keys and values to set, given as alternating arguments.\n     * @returns {boolean} - A boolean indicating that the operation was successful.\n     * @throws {Error} - If the number of arguments is odd.\n     */\n    mset(...keyValuePairs) {\n        if (keyValuePairs.length % 2 !== 0) {\n            throw new Error('MSET requires an even number of arguments');\n        }\n\n        for (let i = 0; i < keyValuePairs.length; i += 2) {\n            this.set(keyValuePairs[i], keyValuePairs[i + 1]);\n        }\n\n        return true;\n    }\n\n    /**\n     * Renames a key to a new key only if the new key does not exist.\n     * @param {string} oldKey - The old key name.\n     * @param {string} newKey - The new key name.\n     * @returns {number} - 1 if the key was successfully renamed, 0 otherwise.\n     */\n    renamenx(oldKey, newKey) {\n        if (!this.store.has(oldKey) || this.store.has(newKey)) {\n            return 0;\n        }\n        const value = this.store.get(oldKey);\n        this.store.delete(oldKey);\n        this.storeSet(newKey, value);\n\n        // Update expiration times if necessary\n        if (this.expireTimes.has(oldKey)) {\n            const expireTime = this.expireTimes.get(oldKey);\n            this.expireTimes.delete(oldKey);\n            this.expireTimes.set(newKey, expireTime);\n        }\n\n        return 1;\n    }\n\n\n    /**\n     * Return a random key from the cache.\n     * @returns {(string|undefined)} - A random key from the cache or undefined if the cache is empty.\n     */\n    randomkey() {\n        const keys = Array.from(this.store.keys());\n        if (keys.length === 0)\n            return undefined;\n\n        const randomIndex = Math.floor(Math.random() * keys.length);\n        return keys[randomIndex];\n    }\n\n    /**\n     * Set a key's time-to-live in seconds.\n     * @param {*} key - The key to set the TTL for.\n     * @param {number} timestampSeconds - The UNIX timestamp (in seconds) at which the key should expire.\n     * @param {Object} [options] - An object with optional arguments specifying when the expiration should be set:\n     *                            - { NX: true } if the key does not have an expiration time\n     *                            - { XX: true } if the key already has an expiration time\n     *                            - { GT: true } if the expiration should only be set if it is greater than the current TTL\n     *                            - { LT: true } if the expiration should only be set if it is less than the current TTL\n     * @returns {number} - 1 if the TTL was set, 0 if the key does not exist or the TTL was not set.\n     * @throws {Error} - Throws an error if the timestampSeconds parameter is not a valid number.\n     */\n    expireat(key, timestampSeconds, options = {}) {\n        if (typeof timestampSeconds !== 'number' || isNaN(timestampSeconds)) {\n            throw new Error('ERR invalid expire time in SETEX');\n        }\n    \n        // If the key does not exist, return 0\n        if (!this.store.has(key)) {\n            return 0;\n        }\n    \n        const { NX = false, XX = false, GT = false, LT = false } = options;\n    \n        const now = Date.now();\n        const ttlMillis = (timestampSeconds * 1000) - now;\n    \n        if (ttlMillis <= 0) {\n            this.store.delete(key);\n            this.expireTimes.delete(key);\n            return 0;\n        }\n    \n        const existingTtl = this.pttl(key);\n        \n        if (XX && existingTtl === -1) {\n            // Do nothing, key does not exist or has no TTL\n            return 0;\n        } else if (NX && existingTtl !== -1) {\n            // Do nothing, key exists and has a TTL set\n            return 0;\n        } else if (GT && (existingTtl !== -1 && ttlMillis <= existingTtl)) {\n            // Do nothing, key exists and new TTL is less than or equal to existing TTL\n            return 0;\n        } else if (LT && (existingTtl !== -1 && ttlMillis >= existingTtl)) {\n            // Do nothing, key exists and new TTL is greater than or equal to existing TTL\n            return 0;\n        }\n    \n        return this.pexpire(key, ttlMillis);\n    }    \n\n\n    /**\n     * Set a timeout for the key, in milliseconds.\n     * @param {*} key - The key to set the expiration for.\n     * @param {number} ttlMillis - The time-to-live for the key, in milliseconds.\n     * @param {Object} [options] - An object with optional arguments specifying when the expiration should be set:\n     *                            - { NX: true } if the key does not have an expiration time\n     *                            - { XX: true } if the key already has an expiration time\n     *                            - { GT: true } if the expiration should only be set if it is greater than the current TTL\n     *                            - { LT: true } if the expiration should only be set if it is less than the current TTL\n     * @returns {number} - 1 if the timeout was set, 0 otherwise.\n     */\n    pexpire(key, ttlMillis, options = {}) {\n        const { NX = false, XX = false, GT = false, LT = false } = options;\n\n        if (NX && this.store.has(key) || XX && !this.store.has(key)) {\n            return 0;\n        }\n\n        if (GT || LT) {\n            const existingTTL = this.pttl(key);\n            if (GT && existingTTL >= ttlMillis || LT && existingTTL <= ttlMillis) {\n                return 0;\n            }\n        }\n\n        this.expireTimes.set(key, Date.now() + ttlMillis);\n        return 1;\n    }\n\n\n    /**\n     * Sets the expiration timestamp for the key in milliseconds.\n     * @param {*} key - The key to set the expiration timestamp for.\n     * @param {number} timestampMillis - The expiration timestamp in milliseconds.\n     * @returns {number} - 1 if the timeout was set, 0 if the key does not exist or the timeout could not be set.\n     */\n    pexpireat(key, timestampMillis) {\n        const ttlMillis = timestampMillis - Date.now();\n        if (ttlMillis <= 0) {\n            this.store.delete(key);\n            this.expireTimes.delete(key);\n            return 0;\n        }\n        return this.pexpire(key, ttlMillis);\n    }\n\n    /**\n     * Returns the remaining time to live of a key that has an expiration set, in milliseconds. \n     * If the key does not exist or does not have an associated expiration time, it returns -2 or -1, respectively.\n     * \n     * @param {*} key - The key to check.\n     * @returns {number} - The remaining time to live in milliseconds. If the key does not exist or has no expiration, returns -2 or -1 respectively.\n     */\n    pttl(key) {\n        if (!this.store.has(key)) {\n            return -2;\n        }\n        if (!this.expireTimes.has(key)) {\n            return -1;\n        }\n        const ttl = this.expireTimes.get(key) - Date.now();\n        return ttl > 0 ? ttl : -2;\n    }\n\n    /**\n     * Returns the time-to-live of a key in seconds. If the key does not exist or does not have an\n     * associated expiration time, it returns -2 or -1, respectively. If the key exists and has an\n     * associated expiration time, it returns the number of seconds left until expiration. The returned\n     * value can be negative if the key has already expired.\n     *\n     * @param {*} key - The key to check the time-to-live for.\n     * @returns {number} - The time-to-live of the key in seconds, or -2 if the key does not exist,\n     * -1 if the key exists but does not have an associated expiration time, or a negative value if\n     * the key has already expired.\n     */\n    ttl(key) {\n        if (!this.store.has(key)) {\n            return -2;\n        }\n        if (!this.expireTimes.has(key)) {\n            return -1;\n        }\n        const ttl = Math.floor((this.expireTimes.get(key) - Date.now()) / 1000);\n        return ttl > 0 ? ttl : -2;\n    }\n\n    /**\n     * Remove the expiration from a key.\n     * @param {*} key - The key to remove expiration from.\n     * @returns {number} - 1 if the expiration was removed, 0 otherwise.\n     */\n    persist(key) {\n        if (!this.store.has(key) || !this.expireTimes.has(key)) {\n            return 0;\n        }\n        this.expireTimes.delete(key);\n        // Remove expiration from IndexedDB if available\n        if (this.isIndexedDBAvailable && this.db) {\n            this._persistExpirationToIndexedDB(key, undefined);\n        }\n        return 1;\n    }\n\n    /**\n     * Get a substring of the string stored at a key.\n     * @param {*} key - The key to get the substring from.\n     * @param {number} start - The starting index of the substring (0-based).\n     * @param {number} end - The ending index of the substring (0-based, inclusive).\n     * @returns {string} - The substring, or an empty string if the key does not exist or is not a string.\n     */\n    getrange(key, start, end) {\n        const value = this.get(key);\n        if (typeof value !== 'string')\n            return '';\n\n        return value.slice(start, end + 1);\n    }\n\n    /**\n     * Replaces the current value of a key with the specified new value and returns the old value.\n     * If the key does not exist, it is created and set to the specified value.\n     * @param {*} key - The key to update.\n     * @param {*} value - The new value to set.\n     * @returns {string|undefined} - The old value of the key, or undefined if the key did not exist.\n     */\n    getset(key, value) {\n        const oldValue = this.get(key);\n        this.set(key, value);\n        return oldValue;\n    }\n\n    /**\n     * Set the value of a key with an expiration time in milliseconds.\n     * If the key already exists, it will be overwritten with the new value.\n     * @param {*} key - The key to set.\n     * @param {*} value - The value to set for the key.\n     * @param {number} ttl - The time-to-live for the key, in milliseconds.\n     * @returns {boolean|undefined} - true if the key was set successfully.\n     */\n    setex(key, value, ttl) {\n        if (!this.store.has(key))\n            return undefined;\n\n        this.set(key, value);\n        this.expire(key, ttl);\n        return true;\n    }\n\n    /**\n     * Sets the substring of the string value stored at the specified key starting at the specified offset\n     * with the given value. If the offset is out of range, will return an error.\n     * If the key does not exist, a new key holding a zero-length string will be created.\n     * The length of the string will be increased as necessary to accommodate the new value.\n     * @param {*} key - The key of the string value to set the range of.\n     * @param {number} offset - The zero-based index at which to start replacing characters.\n     * @param {*} value - The new value to insert into the string.\n     * @returns {number} - The length of the string after it has been modified.\n     * @throws {Error} - If the offset is out of range or an error occurs while executing the command.\n     */\n    setrange(key, offset, value) {\n        if (typeof offset !== 'number' || offset < 0) {\n            throw new Error('Invalid offset value');\n        }\n    \n        if (typeof value !== 'string') {\n            throw new Error('Value must be a string');\n        }\n    \n        let currentValue = this.get(key);\n        if (currentValue === undefined || currentValue === undefined) {\n            currentValue = '';\n        }\n    \n        const left = currentValue.slice(0, offset);\n        const right = currentValue.slice(offset + value.length);\n        const newValue = left + value + right;\n        this.set(key, newValue);\n        return newValue.length;\n    }\n\n    /**\n     * Get the length of the value stored at a key.\n     * @param {*} key - The key to get the length of.\n     * @returns {number} - The length of the value stored at the key, or 0 if the key does not exist.\n     */\n    strlen(key) {\n        const value = this.get(key);\n        return value === undefined ? 0 : value.length;\n    }\n\n    /**\n     * Set the values of multiple keys.\n     * @param {*} keyValuePairs - The key-value pairs to set.\n     * @param {*} value - The value to set for the key.\n     * @returns {number} - 1 if the key was set, 0 if the key was not set.\n     * @throws {Error} - If an error occurs while executing the command.\n     */\n    msetnx(...keyValuePairs) {\n        if (keyValuePairs.length % 2 !== 0) {\n            throw new Error('MSETNX requires an even number of arguments');\n        }\n\n        for (let i = 0; i < keyValuePairs.length; i += 2) {\n            if (this.store.has(keyValuePairs[i])) {\n                return 0;\n            }\n        }\n\n        for (let i = 0; i < keyValuePairs.length; i += 2) {\n            this.set(keyValuePairs[i], keyValuePairs[i + 1]);\n        }\n\n        return 1;\n    }\n\n    /**\n     * Increment the value of a key by a floating-point number.\n     * @param {*} key - The key to increment.\n     * @param {number} increment - The value to increment by.\n     * @returns {number} - The new value of the key.\n     * @throws {Error} - If the value is not a valid float.\n     */\n    incrbyfloat(key, increment) {\n        let value = this.store.get(key);\n        if (value === undefined) {\n            value = 0;\n        } else if (isNaN(parseFloat(value))) {\n            throw new Error('ERR value is not a valid float');\n        }\n\n        const newValue = parseFloat(value) + increment;\n        this.storeSet(key, newValue.toString());\n        return newValue;\n    }\n\n    /**\n     * If the key already exists, the value is appended to the end of the existing value. \n     * If the key doesn't exist, a new key is created and set to the value.\n     * @param {*} key - The key to append the value to.\n     * @param {*} value - The value to append.\n     * @returns {number} - The length of the new string.\n     */\n    append(key, value) {\n        const currentValue = this.get(key);\n        const newValue = currentValue === undefined ? value : currentValue + value;\n        this.set(key, newValue);\n        return newValue.length;\n    }\n\n    /**\n     * Returns the bit value at a given offset in the string value of a key.\n     * @param {*} key - The key to get the bit from.\n     * @param {number} offset - The bit offset.\n     * @returns {number} - 1 or 0, the bit value at the given offset. If the key does not exist or the offset is out of range, 0 is returned.\n     */\n    getbit(key, offset) {\n        const value = this.get(key);\n        if (value === undefined || offset >= value.length * 8) {\n            return 0;\n        }\n        const byteIndex = Math.floor(offset / 8);\n        const bitIndex = 7 - (offset % 8);\n        const byteValue = value.charCodeAt(byteIndex);\n        return (byteValue >> bitIndex) & 1;\n    }\n\n    /**\n     * Sets or clears the bit at offset in the string value stored at key.\n     * @param {*} key - The key to set the bit on.\n     * @param {number} offset - The bit offset.\n     * @param {number} bit - The bit value to set.\n     * @returns {number} - The original bit value stored at offset.\n     */\n    setbit(key, offset, bit) {\n        if (bit !== 0 && bit !== 1) {\n            throw new Error('ERR bit is not an integer or out of range');\n        }\n\n        let value = this.get(key);\n        if (value === undefined) {\n            value = '';\n        }\n\n        const byteIndex = Math.floor(offset / 8);\n        const bitIndex = 7 - (offset % 8);\n\n        while (byteIndex >= value.length) {\n            value += '\\x00';\n        }\n\n        const byteValue = value.charCodeAt(byteIndex);\n        const oldValue = (byteValue >> bitIndex) & 1;\n\n        const newValue = byteValue & ~(1 << bitIndex) | (bit << bitIndex);\n        const newStrValue = String.fromCharCode(newValue);\n\n        const left = value.slice(0, byteIndex);\n        const right = value.slice(byteIndex + 1);\n        const updatedValue = left + newStrValue + right;\n        this.set(key, updatedValue);\n\n        return oldValue;\n    }\n\n    /**\n     * Copies the value stored at a key to another key.\n     * @param {*} source - The key to copy from.\n     * @param {*} destination - The key to copy to.\n     * @returns {number} - 1 if the key was copied, 0 if the key was not copied.\n     */\n    copy(source, destination) {\n        const value = this.get(source);\n        if (value === undefined) {\n            return 0;\n        }\n        this.set(destination, value);\n        return 1;\n    }\n\n    /**\n     * Renames a key. \n     * @param {*} key - The key to rename.\n     * @param {*} newKey - The new key name.\n     * @returns {boolean} - true if the key was renamed, an error if the key was not renamed.\n     */\n    rename(key, newKey) {\n        if (!this.store.has(key)) {\n            throw new Error('ERR no such key');\n        }\n        if (key === newKey) {\n            return true;\n        }\n        const value = this.store.get(key);\n        const expireTime = this.expireTimes.get(key);\n        this.storeSet(newKey, value);\n        this.store.delete(key);\n        if (expireTime !== undefined) {\n            this.expireTimes.set(newKey, expireTime);\n            this.expireTimes.delete(key);\n        }\n        return true;\n    }\n\n    /**\n     * Returns the type of the value stored at a key.\n     * @param {*} key - The key to get the type of.\n     * @returns {string} - The type of the value stored at the key.\n     */\n    type(key) {\n        if (!this.store.has(key)) {\n            return 'none';\n        }\n        const value = this.store.get(key);\n        return typeof value;\n    }\n\n    /**\n     * Add members to a set stored at key.\n     * @param {*} key - The key to add the members to.\n     * @param {*} members - The members to add to the set.\n     * @returns {number} - The number of members that were added to the set, not including all the members that were already present in the set.\n     */\n    sadd(key, ...members) {\n        if (!this.store.has(key)) {\n            this.storeSet(key, new Set());\n        }\n        const set = this.store.get(key);\n        if (!(set instanceof Set)) {\n            throw new Error('ERR Operation against a key holding the wrong kind of value');\n        }\n        let addedCount = 0;\n        for (const member of members) {\n            if (!set.has(member)) {\n                set.add(member);\n                addedCount++;\n            }\n        }\n        return addedCount;\n    }\n\n    /**\n     * Returns the number of members of the set stored at key.\n     * @param {*} key - The key to get the size of.\n     * @returns {number} - The number of members in the set.\n     */\n    scard(key) {\n        const value = this.store.get(key);\n        if (value === undefined) {\n            return 0;\n        }\n        if (!(value instanceof Set)) {\n            throw new Error('ERR Operation against a key holding the wrong kind of value');\n        }\n        return value.size;\n    }\n\n    /**\n     * This method retrieves the members of a set that are present in the first set but not in any of the subsequent sets, and returns them as a new set.\n     * @param {*} key1 - The first key to compare.\n     * @param {*} otherKeys - The other keys to compare.\n     * @returns {Array} - An array of members.\n     */\n    sdiff(key1, ...otherKeys) {\n        const set1 = this.store.get(key1) || new Set();\n        if (!(set1 instanceof Set)) {\n            throw new Error('ERR Operation against a key holding the wrong kind of value');\n        }\n        const resultSet = new Set(set1);\n\n        for (const key of otherKeys) {\n            const otherSet = this.store.get(key) || new Set();\n            if (!(otherSet instanceof Set)) {\n                throw new Error('ERR Operation against a key holding the wrong kind of value');\n            }\n            for (const member of otherSet) {\n                resultSet.delete(member);\n            }\n        }\n\n        return Array.from(resultSet);\n    }\n\n    /**\n     * The functionality of this method is similar to that of sdiff, except that instead of returning the resulting set, it stores the set in the destination provided as an argument.\n     * @param {*} destination - The key to store the resulting set in.\n     * @param {*} key1 - The first key to compare.\n     * @param {*} otherKeys - The other keys to compare.\n     * @returns {number} - The number of elements in the resulting set.\n     */\n    sdiffstore(destination, key1, ...otherKeys) {\n        const diff = this.sdiff(key1, ...otherKeys);\n        const resultSet = new Set(diff);\n        this.storeSet(destination, resultSet);\n        return resultSet.size;\n    }\n\n    /**\n     * This method retrieves the members that are present in all the sets provided as arguments, and returns them as a new set representing the intersection of those sets.\n     * @param {*} keys - The keys to intersect.\n     * @returns {Array} - An array of members.\n     */\n    sinter(...keys) {\n        if (keys.length === 0) {\n            return [];\n        }\n\n        const sets = keys.map(key => {\n            const set = this.store.get(key);\n            if (set === undefined) {\n                return new Set();\n            }\n            if (!(set instanceof Set)) {\n                throw new Error('ERR Operation against a key holding the wrong kind of value');\n            }\n            return set;\n        });\n\n        const resultSet = new Set(sets[0]);\n        for (let i = 1; i < sets.length; i++) {\n            for (const member of resultSet) {\n                if (!sets[i].has(member)) {\n                    resultSet.delete(member);\n                }\n            }\n        }\n\n        return Array.from(resultSet);\n    }\n\n    /**\n     * Returns the number of elements in the intersection of one or more sets.\n     * @param {...string} keys - The keys of the sets to intersect.\n     * @returns {number} - The cardinality (number of elements) in the intersection of the sets.\n     */\n    sintercard(...keys) {\n        return this.sinter(...keys).length;\n    }\n\n    /**\n     * Computes the intersection of one or more sets and stores the result in a new set.\n     * @param {string} destination - The key of the new set to store the result in.\n     * @param {...string} keys - The keys of the sets to intersect.\n     * @returns {number} - The cardinality (number of elements) in the intersection of the sets.\n     */\n    sinterstore(destination, ...keys) {\n        const intersection = this.sinter(...keys);\n        const resultSet = new Set(intersection);\n        this.storeSet(destination, resultSet);\n        return resultSet.size;\n    }\n\n    /**\n     * This method determines if a given value is a member of the set stored at key.\n     * @param {*} key - The key to check.\n     * @param {*} member - The member to check for.\n     * @returns {number} - 1 if the member is a member of the set stored at key. 0 if the member is not a member of the set, or if key does not exist.\n     */\n    sismember(key, member) {\n        const set = this.store.get(key);\n        if (set === undefined) {\n            return false;\n        }\n        if (!(set instanceof Set)) {\n            throw new Error('ERR Operation against a key holding the wrong kind of value');\n        }\n        return set.has(member) ? true : false;\n    }\n\n    /**\n     * This method retrieves all the members of the set value stored at key.\n     * @param {*} key - The key to get the members of.\n     * @returns {Array} - An array of members.\n     */\n    smembers(key) {\n        const set = this.store.get(key);\n        if (set === undefined) {\n            return [];\n        }\n        if (!(set instanceof Set)) {\n            throw new Error('ERR Operation against a key holding the wrong kind of value');\n        }\n        return Array.from(set);\n    }\n\n    /**\n     * Determines whether each member is a member of the set stored at key.\n     * @param {*} key - The key to check.\n     * @param {*} members - The members to check for.\n     * @returns {Array} - An array of 1s and 0s.\n     */\n    smismember(key, ...members) {\n        const set = this.store.get(key) || new Set();\n        if (!(set instanceof Set)) {\n            throw new Error('ERR Operation against a key holding the wrong kind of value');\n        }\n        return members.map(member => (set.has(member) ? 1 : 0));\n    }\n\n    /**\n     * Moves a member from one set to another.\n     * @param {*} source - The key of the set to move the member from.\n     * @param {*} destination - The key of the set to move the member to.\n     * @param {*} member - The member to move.\n     * @returns {number} - 1 if the member was moved. 0 if the member was not moved.\n     */\n    smove(source, destination, member) {\n        const srcSet = this.store.get(source);\n        if (srcSet === undefined || !srcSet.has(member)) {\n            return 0;\n        }\n        if (!(srcSet instanceof Set)) {\n            throw new Error('ERR Operation against a key holding the wrong kind of value');\n        }\n\n        const destSet = this.store.get(destination) || new Set();\n        if (!(destSet instanceof Set)) {\n            throw new Error('ERR Operation against a key holding the wrong kind of value');\n        }\n\n        srcSet.delete(member);\n        destSet.add(member);\n        this.storeSet(destination, destSet);\n\n        return 1;\n    }\n\n    /**\n     * Removes and returns one or multiple random members from a set.\n     * @param {*} key - The key of the set.\n     * @param {number} [count=1] - The number of random members to return.\n     * @returns {Array} An array of random members or an empty array if the set is empty or does not exist.\n     */\n    spop(key, count = 1) {\n        const set = this.store.get(key);\n        if (set === undefined) {\n            return [];\n        }\n        if (!(set instanceof Set)) {\n            throw new Error('ERR Operation against a key holding the wrong kind of value');\n        }\n\n        const poppedMembers = [];\n        for (const member of set) {\n            if (poppedMembers.length >= count) {\n                break;\n            }\n            poppedMembers.push(member);\n            set.delete(member);\n        }\n\n        return poppedMembers;\n    }\n\n    /**\n     * Get one or multiple random members from a set without removing them.\n     * @param {*} key - The key of the set.\n     * @param {number} [count=1] - The number of random members to return.\n     * @returns {Array} An array of random members or an empty array if the set is empty or does not exist.\n     */\n    srandmember(key, count = 1) {\n        const set = this.store.get(key);\n        if (set === undefined) {\n            return [];\n        }\n        if (!(set instanceof Set)) {\n            throw new Error('ERR Operation against a key holding the wrong kind of value');\n        }\n\n        const members = Array.from(set);\n        const result = [];\n        for (let i = 0; i < count && i < members.length; i++) {\n            const randomIndex = Math.floor(Math.random() * members.length);\n            result.push(members[randomIndex]);\n            members.splice(randomIndex, 1);\n        }\n        return result;\n    }\n\n    /**\n     * Remove one or more members from a set.\n     * @param {*} key - The key of the set.\n     * @param {...string} members - The members to remove from the set.\n     * @returns {number} The number of members removed from the set.\n     */\n    srem(key, ...members) {\n        const set = this.store.get(key);\n        if (set === undefined) {\n            return 0;\n        }\n        if (!(set instanceof Set)) {\n            throw new Error('ERR Operation against a key holding the wrong kind of value');\n        }\n\n        let removedCount = 0;\n        for (const member of members) {\n            if (set.delete(member)) {\n                removedCount++;\n            }\n        }\n        return removedCount;\n    }\n\n    /**\n     * Iterates the set elements using a cursor.\n     * @param {*} key - The key of the set.\n     * @param {number} cursor - The cursor to start the iteration from.\n     * @param {Object} [options] - The optional configuration object.\n     * @param {string} [options.match] - A pattern to match the returned elements.\n     * @param {number} [options.count] - The number of elements to return in each iteration.\n     * @returns {[number, Array]} An array containing the next cursor and an array of elements.\n     */\n    sscan(key, cursor, options = {}) {\n        const { match = '*', count = 10 } = options;\n        const set = this.store.get(key);\n        if (set === undefined) {\n            return [0, []];\n        }\n        if (!(set instanceof Set)) {\n            throw new Error('ERR Operation against a key holding the wrong kind of value');\n        }\n\n        const regex = new RegExp(match.replace('*', '.*'));\n        const members = Array.from(set);\n        const result = [];\n        let newCursor = cursor;\n        for (let i = cursor; i < members.length && result.length < count; i++) {\n            if (regex.test(members[i])) {\n                result.push(members[i]);\n            }\n            newCursor = i + 1;\n        }\n        return [newCursor >= members.length ? 0 : newCursor, result];\n    }\n\n    /**\n     * Computes the union of the sets stored at the specified keys.\n     * @param {...string} keys - The keys of the sets to compute the union for.\n     * @returns {Array} An array containing the members of the union or an empty array if no sets exist.\n     */\n    sunion(...keys) {\n        const resultSet = new Set();\n        for (const key of keys) {\n            const set = this.store.get(key) || new Set();\n            if (!(set instanceof Set)) {\n                throw new Error('ERR Operation against a key holding the wrong kind of value');\n            }\n            for (const member of set) {\n                resultSet.add(member);\n            }\n        }\n        return Array.from(resultSet);\n    }\n\n    /**\n     * Computes the union of the sets stored at the specified keys and stores the result in a new set at the destination key.\n     * @param {string} destination - The key to store the resulting set.\n     * @param {...string} keys - The keys of the sets to compute the union for.\n     * @returns {number} The number of members in the resulting set.\n     */\n    sunionstore(destination, ...keys) {\n        const resultSet = new Set();\n        for (const key of keys) {\n            const set = this.store.get(key) || new Set();\n            if (!(set instanceof Set)) {\n                throw new Error('ERR Operation against a key holding the wrong kind of value');\n            }\n            for (const member of set) {\n                resultSet.add(member);\n            }\n        }\n        this.storeSet(destination, resultSet);\n        return resultSet.size;\n    }\n\n    /**\n     * Sets the value of an element in a list by its index.\n     * @param {*} key - The key of the list.\n     * @param {number} index - The index of the element to set the value for.\n     * @param {*} value - The value to set.\n     * @returns {string} \"OK\" if the value is successfully set or an error if the index is out of range.\n     */\n    lset(key, index, value) {\n        const list = this.store.get(key);\n        if (list === undefined) {\n            throw new Error('ERR no such key');\n        }\n        if (!Array.isArray(list)) {\n            throw new Error('ERR Operation against a key holding the wrong kind of value');\n        }\n        if (index < 0 || index >= list.length) {\n            throw new Error('ERR index out of range');\n        }\n\n        list[index] = value;\n        return true;\n    }\n\n    /**\n     * Trims a list to the specified range.\n     * @param {*} key - The key of the list.\n     * @param {number} start - The start index of the range to trim.\n     * @param {number} stop - The end index of the range to trim.\n     * @returns {string} \"OK\" if the list is successfully trimmed or an error if the key holds a wrong kind of value.\n     */\n    ltrim(key, start, stop) {\n        const list = this.store.get(key);\n        if (list === undefined) {\n            return true;\n        }\n        if (!Array.isArray(list)) {\n            throw new Error('ERR Operation against a key holding the wrong kind of value');\n        }\n\n        const length = list.length;\n        const newStart = start >= 0 ? start : Math.max(length + start, 0);\n        const newStop = stop >= 0 ? stop : Math.max(length + stop, -1);\n        const newList = list.slice(newStart, newStop + 1);\n\n        this.storeSet(key, newList);\n        return true;\n    }\n\n    /**\n     * Removes and returns the last element of the list stored at the specified key.\n     * @param {*} key - The key of the list.\n     * @returns {*} The last element of the list or null if the key does not exist.\n     */\n    rpop(key) {\n        const list = this.store.get(key);\n        if (list === undefined || !Array.isArray(list)) {\n            return null;\n        }\n        return list.pop();\n    }\n\n    /**\n     * Removes the last element of the list stored at the specified key and pushes it to the list stored at the destination key.\n     * @param {*} source - The key of the list to pop the element from.\n     * @param {*} destination - The key of the list to push the element to.\n     * @returns {*} The last element of the list or null if the key does not exist.\n     */\n    rpoplpush(source, destination) {\n        const element = this.rpop(source);\n        if (element === undefined) {\n            return null;\n        }\n        this.lpush(destination, element);\n        return element;\n    }\n\n    /**\n     * Adds values to the end of the list stored at the specified key.\n     * @param {*} key - The key of the list.\n     * @param {...*} values - The values to add to the list.\n     * @returns {number} The length of the list after the push operation.\n     */\n    rpush(key, ...values) {\n        let list = this.store.get(key);\n        if (list === undefined) {\n            list = [];\n            this.storeSet(key, list);\n        } else if (!Array.isArray(list)) {\n            throw new Error('ERR Operation against a key holding the wrong kind of value');\n        }\n        list.push(...values);\n        return list.length;\n    }\n\n    /**\n     * Adds values to the end of the list stored at the specified key if the key exists and stores a list.\n     * @param {*} key - The key of the list.\n     * @param {*} value - The value to add to the list.\n     * @returns {number} The length of the list after the push operation.\n     */\n    rpushx(key, value) {\n        const list = this.store.get(key);\n        if (list === undefined || !Array.isArray(list)) {\n            return 0;\n        }\n        list.push(value);\n        return list.length;\n    }\n\n    /**\n     * Adds values to the beginning of the list stored at the specified key.\n     * @param {*} key - The key of the list.\n     * @param {...*} values - The values to add to the list.\n     * @returns {number} The length of the list after the push operation.\n     */\n    lpush(key, ...values) {\n        let list = this.store.get(key);\n        if (list === undefined) {\n            list = [];\n            this.storeSet(key, list);\n        } else if (!Array.isArray(list)) {\n            throw new Error('ERR Operation against a key holding the wrong kind of value');\n        }\n        list.unshift(...values);\n        return list.length;\n    }\n\n    /**\n     * Adds values to the beginning of the list stored at the specified key if the key exists and stores a list.\n     * @param {*} key - The key of the list.\n     * @param {*} value - The value to add to the list.\n     * @returns {number} The length of the list after the push operation.\n     */\n    lpushx(key, ...values) {\n        const list = this.store.get(key);\n        if (list === undefined || !Array.isArray(list)) {\n            return 0;\n        }\n        list.unshift(...values);\n        return list.length;\n    }\n\n    /**\n     * Retrieve a range of elements from a list stored at the given key.\n     *\n     * @param {*} key - The key where the list is stored.\n     * @param {number} start - The start index of the range (inclusive). If negative, it counts from the end of the list.\n     * @param {number} stop - The end index of the range (inclusive). If negative, it counts from the end of the list.\n     * @returns {Array} - An array containing the requested range of elements.\n     *                    Returns an empty array if the key does not exist,\n     *                    or if the stored value is not an array.\n     */\n    lrange(key, start, stop) {\n        const list = this.store.get(key);\n        if (list === undefined || !Array.isArray(list)) {\n            return [];\n        }\n        const length = list.length;\n        const newStart = start >= 0 ? start : Math.max(length + start, 0);\n        const newStop = stop >= 0 ? stop : Math.max(length + stop, -1);\n        return list.slice(newStart, newStop + 1);\n    }\n\n    /**\n     * Remove elements with the given value from a list stored at the given key.\n     *\n     * @param {*} key - The key where the list is stored.\n     * @param {number} count - The number of occurrences to remove.\n     * @param {*} value - The value of the elements to remove.\n     * @returns {number} - The number of removed elements.\n     */\n    lrem(key, count, value) {\n        const list = this.store.get(key);\n        if (list === undefined || !Array.isArray(list)) {\n            return 0;\n        }\n\n        let removed = 0;\n        if (count > 0) {\n            for (let i = 0; i < list.length && removed < count; i++) {\n                if (list[i] === value) {\n                    list.splice(i, 1);\n                    removed++;\n                    i--;\n                }\n            }\n        } else if (count < 0) {\n            for (let i = list.length - 1; i >= 0 && removed < -count; i--) {\n                if (list[i] === value) {\n                    list.splice(i, 1);\n                    removed++;\n                }\n            }\n        } else {\n            removed = list.filter(item => item === value).length;\n            this.storeSet(key, list.filter(item => item !== value));\n        }\n\n        return removed;\n    }\n\n    /**\n     * Pop an element from a list stored at the source key and push it to a list stored at the destination key.\n     *\n     * @param {string} source - The key where the source list is stored.\n     * @param {string} destination - The key where the destination list is stored.\n     * @param {string} srcDirection - The direction to pop from the source list ('LEFT' or 'RIGHT').\n     * @param {string} destDirection - The direction to push to the destination list ('LEFT' or 'RIGHT').\n     * @returns {*} - The element moved or null if the source list is empty.\n     */\n    lmove(source, destination, srcDirection, destDirection) {\n        const popFn = srcDirection === 'LEFT' ? 'lpop' : 'rpop';\n        const pushFn = destDirection === 'LEFT' ? 'lpush' : 'rpush';\n\n        const element = this[popFn](source);\n        if (element === undefined) {\n            return null;\n        }\n        this[pushFn](destination, element);\n        return element;\n    }\n\n    /**\n     * Pop multiple elements from a list stored at the given key in the specified direction.\n     *\n     * @param {number} count - The number of elements to pop.\n     * @param {*} key - The key where the list is stored.\n     * @param {string} direction - The direction to pop from the list ('LEFT' or 'RIGHT').\n     * @returns {Array} - An array of popped elements.\n     */\n    lmpop(count, key, direction) {\n        const popFn = direction === 'LEFT' ? 'lpop' : 'rpop';\n        const results = [];\n\n        for (let i = 0; i < count; i++) {\n            const value = this[popFn](key);\n            if (value === undefined) {\n                break;\n            }\n            results.push(value);\n        }\n\n        return results;\n    }\n\n    /**\n     * Pop an element from the left end of a list stored at the given key.\n     *\n     * @param {*} key - The key where the list is stored.\n     * @returns {*} - The popped element or null if the list is empty.\n     */\n    lpop(key) {\n        const list = this.store.get(key);\n        if (list === undefined || !Array.isArray(list)) {\n            return null;\n        }\n        return list.shift();\n    }\n\n    /**\n    * Find the position of an element in a list stored at the given key.\n    *\n    * @param {*} key - The key where the list is stored.\n    * @param {*} element - The element to search for.\n    * @param {Object} options - An object with optional parameters.\n    * @param {number} options.rank - The rank of the element to find (default is 0).\n    * @param {number} options.start - The start index of the search (default is 0).\n    * @param {number} options.stop - The stop index of the search (default is -1).\n    * @returns {number|undefined} - The position of the element, or undefined if not found.\n    */\n    lpos(key, element, options = {}) {\n        const { rank = 0, start = 0, stop = -1 } = options;\n        const list = this.store.get(key);\n\n        if (list === undefined || !Array.isArray(list)) {\n            return undefined;\n        }\n\n        let currentRank = 0;\n        const length = list.length;\n        const newStart = start >= 0 ? start : Math.max(length + start, 0);\n        const newStop = stop >= 0 ? stop : Math.max(length + stop, -1);\n\n        for (let i = newStart; i <= newStop; i++) {\n            if (list[i] === element) {\n                if (currentRank === rank) {\n                    return i;\n                }\n                currentRank++;\n            }\n        }\n\n        return undefined;\n    }\n\n    /**\n     * Pop an element from the right end of a list stored at the source key and push it to the left end of a list stored at the destination key.\n     *\n     * @param {string} source - The key where the source list is stored.\n     * @param {string} destination - The key where the destination list is stored.\n     * @param {number} timeout - The maximum number of seconds to block waiting for an element to pop.\n     * @returns {*} - The element moved or null if the source list is empty.\n     */\n    brpoplpush(source, destination, timeout) {\n        const element = this.brpop(source, timeout);\n        if (element === undefined) {\n            return null;\n        }\n        this.lpush(destination, element);\n        return element;\n    }\n\n    /**\n     * Get the element at the specified index in a list stored at the given key.\n     *\n     * @param {*} key - The key where the list is stored.\n     * @param {number} index - The index of the element to retrieve.\n     * @returns {*} - The element at the specified index or null if the index is out of range.\n     */\n    lindex(key, index) {\n        const list = this.store.get(key);\n        if (list === undefined || !Array.isArray(list)) {\n            return null;\n        }\n        if (index < 0) {\n            index = list.length + index;\n        }\n        return list[index] !== undefined ? list[index] : null;\n    }\n\n    /**\n     * Insert an element before or after a pivot element in a list stored at the given key.\n     *\n     * @param {*} key - The key where the list is stored.\n     * @param {string} position - The position to insert the new element ('BEFORE' or 'AFTER').\n     * @param {*} pivot - The pivot element to insert the new element before or after.\n     * @param {*} value - The value of the new element to insert.\n     * @returns {number} - The length of the list after the insert operation.\n     */\n    linsert(key, position, pivot, value) {\n        const list = this.store.get(key);\n        if (list === undefined) {\n            return 0;\n        }\n        if (!Array.isArray(list)) {\n            throw new Error('ERR Operation against a key holding the wrong kind of value');\n        }\n        const pivotIndex = list.indexOf(pivot);\n        if (pivotIndex === -1) {\n            return 0;\n        }\n\n        if (position === 'BEFORE') {\n            list.splice(pivotIndex, 0, value);\n        } else if (position === 'AFTER') {\n            list.splice(pivotIndex + 1, 0, value);\n        } else {\n            throw new Error('ERR syntax error');\n        }\n\n        return list.length;\n    }\n\n    /**\n     * Get the length of a list stored at the given key.\n     *\n     * @param {*} key - The key where the list is stored.\n     * @returns {number} - The length of the list.\n     */\n    llen(key) {\n        const list = this.store.get(key);\n        return list === undefined ? 0 : list.length;\n    }\n\n    /**\n     * Pop an element from a list stored at the source key and push it to a list stored at the destination key, blocking until an element is available or the timeout expires.\n     *\n     * @param {string} source - The key where the source list is stored.\n     * @param {string} destination - The key where the destination list is stored.\n     * @param {string} srcDirection - The direction to pop from the source list ('LEFT' or 'RIGHT').\n     * @param {string} destDirection - The direction to push to the destination list ('LEFT' or 'RIGHT').\n     * @param {number} timeout - The maximum number of seconds to block waiting for an element to pop.\n     * @returns {*} - The element moved or null if the source list is empty or the timeout expires.\n     */\n    blmove(source, destination, srcDirection, destDirection, timeout) {\n        const popFn = srcDirection === 'LEFT' ? 'blpop' : 'brpop';\n        const pushFn = destDirection === 'LEFT' ? 'lpush' : 'rpush';\n\n        const element = this[popFn]([source], timeout);\n        if (element === undefined) {\n            return null;\n        }\n        this[pushFn](destination, element[1]);\n        return element[1];\n    }\n\n    /**\n     * Pop multiple elements from a list stored at the given keys in a blocking manner, waiting until at least one element is available or the timeout expires.\n     *\n     * @param {number} count - The number of elements to pop.\n     * @param {number} timeout - The maximum number of seconds to block waiting for an element to pop.\n     * @param {...string} keys - The keys where the lists are stored.\n     * @returns {Array} - An array of popped elements.\n     */\n    blmpop(count, timeout, ...keys) {\n        const results = [];\n        const timeoutMs = timeout * 1000;\n\n        const popFn = keys.length === 1 ? 'brpop' : 'brpoplpush';\n        const popArgs = keys.concat(timeoutMs);\n\n        for (let i = 0; i < count; i++) {\n            const value = this[popFn](popArgs);\n            if (value === undefined) {\n                break;\n            }\n            results.push(value);\n        }\n\n        return results;\n    }\n\n    /**\n     * Pop an element from the left end of a list stored at the given keys in a blocking manner, waiting until an element is available or the timeout expires.\n     *\n     * @param {number} timeout - The maximum number of seconds to block waiting for an element to pop.\n     * @param {...string} keys - The keys where the lists are stored.\n     * @returns {Array|null} - An array containing the key and the popped element, or null if no element is available or the timeout expires.\n     */\n    blpop(timeout, ...keys) {\n        return this.blmpop(1, timeout, ...keys)[0];\n    }\n\n    /**\n     * Pop an element from the right end of a list stored at the given keys in a blocking manner, waiting until an element is available or the timeout expires.\n     *\n     * @param {number} timeout - The maximum number of seconds to block waiting for an element to pop.\n     * @param {...string} keys - The keys where the lists are stored.\n     * @returns {Array|null} - An array containing the key and the popped element, or null if no element is available or the timeout expires.\n     */\n    brpop(timeout, ...keys) {\n        const timeoutMs = timeout * 1000;\n        const endTime = Date.now() + timeoutMs;\n\n        while (Date.now() < endTime) {\n            for (let i = 0; i < keys.length; i++) {\n                const key = keys[i];\n                const list = this.store.get(key);\n                if (list !== undefined && Array.isArray(list) && list.length > 0) {\n                    const element = list.pop();\n                    if (list.length === 0) {\n                        this.store.delete(key);\n                    }\n                    return [key, element];\n                }\n            }\n        }\n\n        return null;\n    }\n\n    /**\n     * Get the expire time of a key in seconds.\n     *\n     * @param {*} key - The key to get the expire time for.\n     * @returns {number|undefined} - The expire time in seconds, or undefined if the key has no expire time.\n     */\n    expiretime(key) {\n        return this.expireTimes.get(key);\n    }\n\n    /**\n     * Get the expire time of a key in milliseconds.\n     *\n     * @param {*} key - The key to get the expire time for.\n     * @returns {number|undefined} - The expire time in milliseconds, or undefined if the key has no expire time.\n     */\n    pexpiretime(key) {\n        const expireTime = this.expireTimes.get(key);\n        return expireTime ? expireTime * 1000 : null;\n    }\n\n    /**\n     * Add a member with the specified score to a sorted set stored at the given key.\n     *\n     * @param {*} key - The key where the sorted set is stored.\n     * @param {number} score - The score associated with the member.\n     * @param {*} member - The member to add to the sorted set.\n     * @returns {number} - The number of elements added to the sorted set (0 or 1).\n     */\n    zadd(key, score, member) {\n        const isExpired = this._checkAndRemoveExpiredKey(key);\n        if (isExpired) {\n            return 0;\n        }\n\n        if (!this.store.has(key)) {\n            this.storeSet(key, new XMap());\n        }\n\n        const sortedSet = this.store.get(key);\n        sortedSet.set(member, Number(score));\n        return 1;\n    }\n\n    /**\n     * Get the number of members in a sorted set stored at the given key.\n     *\n     * @param {*} key - The key where the sorted set is stored.\n     * @returns {number} - The number of members in the sorted set.\n     */\n    zcard(key) {\n        const isExpired = this._checkAndRemoveExpiredKey(key);\n        if (isExpired) {\n            return 0;\n        }\n\n        if (!this.store.has(key)) {\n            return 0;\n        }\n\n        const sortedSet = this.store.get(key);\n        return sortedSet.size;\n    }\n\n    /**\n     * Count the number of members in a sorted set stored at the given key with a score between min and max (inclusive).\n     *\n     * @param {*} key - The key where the sorted set is stored.\n     * @param {number} min - The minimum score.\n     * @param {number} max - The maximum score.\n     * @returns {number} - The number of members with a score between min and max.\n     */\n    zcount(key, min, max) {\n        const isExpired = this._checkAndRemoveExpiredKey(key);\n        if (isExpired) {\n            return 0;\n        }\n\n        if (!this.store.has(key)) {\n            return 0;\n        }\n\n        const sortedSet = this.store.get(key);\n        let count = 0;\n\n        for (const score of sortedSet.values()) {\n            if (score >= min && score <= max) {\n                count++;\n            }\n        }\n\n        return count;\n    }\n\n    /**\n     * Compute the difference between the members of the given sorted sets stored at the specified keys.\n     *\n     * @param {...string} keys - The keys where the sorted sets are stored.\n     * @returns {Set} - A set containing the members present in the first sorted set but not in the others.\n     */\n    zdiff(...keys) {\n        if (keys.length === 0) {\n            return new Set();\n        }\n\n        const sortedSets = keys.map(key => {\n            const isExpired = this._checkAndRemoveExpiredKey(key);\n            if (isExpired) {\n                return new XMap();\n            }\n            return this.store.get(key) || new XMap();\n        });\n\n        const firstSet = new Set(sortedSets[0].keys());\n        for (let i = 1; i < sortedSets.length; i++) {\n            for (const member of sortedSets[i].keys()) {\n                firstSet.delete(member);\n            }\n        }\n\n        return firstSet;\n    }\n\n    /**\n     * Compute the difference between the given sorted sets stored at the specified keys and store the result in the destination key.\n     *\n     * @param {string} destination - The key where the result will be stored.\n     * @param {...string} keys - The keys where the sorted sets are stored.\n     * @returns {number} - The number of members in the resulting sorted set.\n     */\n    zdiffstore(destination, ...keys) {\n        const diff = this.ZDIFF(...keys);\n        const resultMap = new XMap();\n\n        for (const member of diff) {\n            const scores = keys.map(key => {\n                const sortedSet = this.store.get(key);\n                return sortedSet ? sortedSet.get(member) : undefined;\n            }).filter(score => score !== undefined);\n\n            if (scores.length > 0) {\n                resultMap.set(member, Math.min(...scores));\n            }\n        }\n\n        this.storeSet(destination, resultMap);\n        return resultMap.size;\n    }\n\n    /**\n     * Blockingly pop members with the lowest scores from multiple sorted sets.\n     *\n     * @param {number} count - The number of members to pop.\n     * @param {...string} keys - The keys where the sorted sets are stored.\n     * @returns {Array} - An array containing the key and the popped members with their scores.\n     */\n    bzmpop(count, ...keys) {\n        const result = [];\n\n        for (const key of keys) {\n            const sortedSet = this.store.get(key);\n            if (sortedSet && sortedSet.size > 0) {\n                const poppedMembers = Array.from(sortedSet.entries())\n                    .sort((a, b) => a[1] - b[1])\n                    .slice(0, count)\n                    .map(([member, score]) => {\n                        sortedSet.delete(member);\n                        return [member, score];\n                    });\n\n                result.push([key, ...poppedMembers]);\n                break;\n            }\n        }\n\n        return result;\n    }\n\n    /**\n     * Pop the specified number of members with the highest scores from a sorted set.\n     *\n     * @param {*} key - The key where the sorted set is stored.\n     * @param {number} count - The number of members to pop.\n     * @returns {Array} - An array containing the key and the popped members with their scores.\n     */\n    bzpopmax(key, count) {\n        const sortedSet = this.store.get(key);\n        if (!sortedSet || sortedSet.size === 0) {\n            return [];\n        }\n\n        const poppedMembers = Array.from(sortedSet.entries())\n            .sort((a, b) => b[1] - a[1])\n            .slice(0, count)\n            .map(([member, score]) => {\n                sortedSet.delete(member);\n                return [member, score];\n            });\n\n        return [key, ...poppedMembers];\n    }\n\n    /**\n     * Pop the specified number of members with the lowest scores from a sorted set.\n     *\n     * @param {*} key - The key where the sorted set is stored.\n     * @param {number} count - The number of members to pop.\n     * @returns {Array} - An array containing the key and the popped members with their scores.\n     */\n    bzpopmin(key, count) {\n        const sortedSet = this.store.get(key);\n        if (!sortedSet || sortedSet.size === 0) {\n            return [];\n        }\n\n        const poppedMembers = Array.from(sortedSet.entries())\n            .sort((a, b) => a[1] - b[1])\n            .slice(0, count)\n            .map(([member, score]) => {\n                sortedSet.delete(member);\n                return [member, score];\n            });\n\n        return [key, ...poppedMembers];\n    }\n\n    /**\n     * Increment the score of a member in a sorted set by the specified increment value.\n     *\n     * @param {*} key - The key where the sorted set is stored.\n     * @param {number} increment - The value to increment the score by.\n     * @param {*} member - The member whose score to increment.\n     * @returns {number} - The new score of the member.\n     */\n    zincrby(key, increment, member) {\n        if (!this.store.has(key)) {\n            this.storeSet(key, new XMap());\n        }\n\n        const sortedSet = this.store.get(key);\n        const currentScore = sortedSet.get(member) || 0;\n        const newScore = currentScore + Number(increment);\n        sortedSet.set(member, newScore);\n        return newScore;\n    }\n\n    /**\n     * Compute the intersection between the members of the given sorted sets stored at the specified keys.\n     *\n     * @param {...string} keys - The keys where the sorted sets are stored.\n     * @returns {Set} - A set containing the members present in all the sorted sets.\n     */\n    zinter(...keys) {\n        if (keys.length === 0) {\n            return new Set();\n        }\n\n        const sortedSets = keys.map(key => this.store.get(key) || new XMap());\n        const firstSet = new Set(sortedSets[0].keys());\n        for (let i = 1; i < sortedSets.length; i++) {\n            const intersection = new Set();\n            for (const member of sortedSets[i].keys()) {\n                if (firstSet.has(member)) {\n                    intersection.add(member);\n                }\n            }\n            firstSet.clear();\n            for (const member of intersection) {\n                firstSet.add(member);\n            }\n        }\n\n        return firstSet;\n    }\n\n    /**\n     * Get the number of members in the intersection between the given sorted sets stored at the specified keys.\n     *\n     * @param {...string} keys - The keys where the sorted sets are stored.\n     * @returns {number} - The number of members in the intersection.\n     */\n    zintercard(...keys) {\n        const intersection = this.ZINTER(...keys);\n        return intersection.size;\n    }\n\n    /**\n     * Compute the intersection between the given sorted sets stored at the specified keys and store the result in the destination key.\n     *\n     * @param {string} destination - The key where the result will be stored.\n     * @param {...string} keys - The keys where the sorted sets are stored.\n     * @returns {number} - The number of members in the resulting sorted set.\n     */\n    zinterstore(destination, ...keys) {\n        const intersection = this.ZINTER(...keys);\n        const resultMap = new XMap();\n\n        for (const member of intersection) {\n            const scores = keys.map(key => {\n                const sortedSet = this.store.get(key);\n                return sortedSet ? sortedSet.get(member) : undefined;\n            }).filter(score => score !== undefined);\n\n            if (scores.length > 0) {\n                resultMap.set(member, Math.max(...scores));\n            }\n        }\n\n        this.storeSet(destination, resultMap);\n        return resultMap.size;\n    }\n\n    /**\n     * Count the number of members in a sorted set stored at the given key with scores between the given min and max values.\n     *\n     * @param {*} key - The key where the sorted set is stored.\n     * @param {*} min - The minimum score.\n     * @param {*} max - The maximum score.\n     * @returns {number} - The number of members with scores between min and max.\n     */\n    zlexcount(key, min, max) {\n        const sortedSet = this.store.get(key) || new XMap();\n        const sortedMembers = Array.from(sortedSet.keys()).sort();\n        let count = 0;\n\n        for (const member of sortedMembers) {\n            if (member >= min && member <= max) {\n                count++;\n            }\n        }\n\n        return count;\n    }\n\n    /**\n     * Pop the specified number of members with the lowest scores from the given sorted sets.\n     *\n     * @param {number} count - The number of members to pop.\n     * @param {...string} keys - The keys where the sorted sets are stored.\n     * @returns {Array} - An array containing the key and the popped members with their scores.\n     */\n    zmpop(count, ...keys) {\n        const result = [];\n\n        for (const key of keys) {\n            const sortedSet = this.store.get(key);\n            if (sortedSet && sortedSet.size > 0) {\n                const poppedMembers = Array.from(sortedSet.entries())\n                    .sort((a, b) => a[1] - b[1])\n                    .slice(0, count)\n                    .map(([member, score]) => {\n                        sortedSet.delete(member);\n                        return [member, score];\n                    });\n\n                result.push([key, ...poppedMembers]);\n                break;\n            }\n        }\n\n        return result;\n    }\n\n    /**\n     * Get the scores of the specified members in a sorted set stored at the given key.\n     *\n     * @param {*} key - The key where the sorted set is stored.\n     * @param {...*} members - The members whose scores to retrieve.\n     * @returns {Array} - An array containing the scores of the specified members.\n     */\n    zmscore(key, ...members) {\n        const sortedSet = this.store.get(key) || new XMap();\n        return members.map(member => sortedSet.get(member));\n    }\n\n    /**\n     * Pop the specified number of members with the highest scores from a sorted set.\n     *\n     * @param {*} key - The key where the sorted set is stored.\n     * @param {number} count - The number of members to pop.\n     * @returns {Array} - An array containing the popped members with their scores.\n     */\n    zpopmax(key, count) {\n        const sortedSet = this.store.get(key);\n        if (!sortedSet || sortedSet.size === 0) {\n            return [];\n        }\n\n        const poppedMembers = Array.from(sortedSet.entries())\n            .sort((a, b) => b[1] - a[1])\n            .slice(0, count)\n            .map(([member, score]) => {\n                sortedSet.delete(member);\n                return [member, score];\n            });\n\n        return poppedMembers;\n    }\n\n    /**\n     * Pop the specified number of members with the lowest scores from a sorted set.\n     *\n     * @param {*} key - The key where the sorted set is stored.\n     * @param {number} count - The number of members to pop.\n     * @returns {Array} - An array containing the popped members with their scores.\n     */\n    zpopmin(key, count) {\n        const sortedSet = this.store.get(key);\n        if (!sortedSet || sortedSet.size === 0) {\n            return [];\n        }\n\n        const poppedMembers = Array.from(sortedSet.entries())\n            .sort((a, b) => a[1] - b[1])\n            .slice(0, count)\n            .map(([member, score]) => {\n                sortedSet.delete(member);\n                return [member, score];\n            });\n\n        return poppedMembers;\n    }\n\n    /**\n     * Get the specified number of random members from a sorted set stored at the given key.\n     *\n     * @param {*} key - The key where the sorted set is stored.\n     * @param {number} [count=1] - The number of random members to retrieve.\n     * @returns {Array} - An array containing the randomly chosen members.\n     */\n    zrandmember(key, count = 1) {\n        const sortedSet = this.store.get(key);\n        if (!sortedSet || sortedSet.size === 0) {\n            return [];\n        }\n\n        const members = Array.from(sortedSet.keys());\n        const result = [];\n\n        for (let i = 0; i < count; i++) {\n            const randomIndex = Math.floor(Math.random() * members.length);\n            result.push(members[randomIndex]);\n        }\n\n        return result;\n    }\n\n    /**\n     * Get the members in a sorted set stored at the given key with their scores between the specified start and stop indices.\n     *\n     * @param {*} key - The key where the sorted set is stored.\n     * @param {number} start - The start index.\n     * @param {number} stop - The stop index.\n     * @returns {Array} - An array containing the members and their scores within the specified range.\n     */\n    zrange(key, start, stop) {\n        const sortedSet = this.store.get(key) || new XMap();\n        const sortedMembers = Array.from(sortedSet.entries()).sort((a, b) => a[1] - b[1]);\n\n        if (start < 0) start = sortedMembers.length + start;\n        if (stop < 0) stop = sortedMembers.length + stop;\n\n        return sortedMembers.slice(start, stop + 1).map(([member, score]) => [member, score]);\n    }\n\n    /**\n     * Returns all elements in the sorted set stored at the key with a value between min and max (inclusive) in lexicographical order.\n     * @param {*} key - The key of the sorted set.\n     * @param {string} min - The minimum member value.\n     * @param {string} max - The maximum member value.\n     * @param {Object} [options={}] - Additional options (e.g., { limit: { offset, count } }).\n     * @returns {string[]} - The filtered and sorted set members.\n     */\n    zrangebylex(key, min, max, options = {}) {\n        const sortedSet = this.store.get(key) || new XMap();\n        const sortedMembers = Array.from(sortedSet.keys()).sort();\n\n        let result = sortedMembers.filter(member => member >= min && member <= max);\n\n        if (options.limit) {\n            const { offset, count } = options.limit;\n            result = result.slice(offset, offset + count);\n        }\n\n        return result;\n    }\n\n    /**\n     * Returns all elements in the sorted set stored at the key with a score between min and max (inclusive).\n     * @param {*} key - The key of the sorted set.\n     * @param {number} min - The minimum score value.\n     * @param {number} max - The maximum score value.\n     * @param {Object} [options={}] - Additional options (e.g., { withscores: true, limit: { offset, count } }).\n     * @returns {(string[]|Array[])} - The filtered and sorted set members, with or without scores based on options.\n     */\n    zrangebyscore(key, min, max, options = {}) {\n        const sortedSet = this.store.get(key) || new XMap();\n        const sortedMembers = Array.from(sortedSet.entries()).sort((a, b) => a[1] - b[1]);\n\n        let result = sortedMembers.filter(([, score]) => score >= min && score <= max);\n\n        if (options.withscores) {\n            result = result.map(([member, score]) => [member, score]);\n        } else {\n            result = result.map(([member]) => member);\n        }\n\n        if (options.limit) {\n            const { offset, count } = options.limit;\n            result = result.slice(offset, offset + count);\n        }\n\n        return result;\n    }\n\n    /**\n     * Copies a range of elements from a sorted set to another sorted set.\n     * @param {string} destination - The destination key for the new sorted set.\n     * @param {*} key - The key of the source sorted set.\n     * @param {number} start - The starting index.\n     * @param {number} stop - The ending index.\n     * @returns {number} - The number of elements in the new sorted set.\n     */\n    zrangestore(destination, key, start, stop) {\n        const sortedSet = this.store.get(key) || new XMap();\n        const sortedMembers = Array.from(sortedSet.entries()).sort((a, b) => a[1] - b[1]);\n\n        if (start < 0) start = sortedMembers.length + start;\n        if (stop < 0) stop = sortedMembers.length + stop;\n\n        const resultMap = new XMap(sortedMembers.slice(start, stop + 1));\n        this.storeSet(destination, resultMap);\n        return resultMap.size;\n    }\n\n    /**\n     * Determines the index of a member in the sorted set stored at the key.\n     * @param {*} key - The key of the sorted set.\n     * @param {string} member - The member to find the index of.\n     * @returns {(number|undefined)} - The index of the member, or undefined if not found.\n     */\n    zrank(key, member) {\n        const sortedSet = this.store.get(key);\n        if (!sortedSet)\n            return undefined;\n\n        const sortedMembers = Array.from(sortedSet.entries()).sort((a, b) => a[1] - b[1]);\n        for (let i = 0; i < sortedMembers.length; i++) {\n            if (sortedMembers[i][0] === member) {\n                return i;\n            }\n        }\n\n        return undefined;\n    }\n\n    /**\n     * Removes one or more members from the sorted set stored at the key.\n     * @param {*} key - The key of the sorted set.\n     * @param {...string} members - The members to remove from the sorted set.\n     * @returns {number} - The number of members removed.\n     */\n    zrem(key, ...members) {\n        const sortedSet = this.store.get(key);\n        if (!sortedSet) {\n            return 0;\n        }\n\n        let removedCount = 0;\n        for (const member of members) {\n            if (sortedSet.delete(member)) {\n                removedCount++;\n            }\n        }\n\n        return removedCount;\n    }\n\n    /**\n     * Removes all elements in the sorted set stored at the key with a value between min and max (inclusive) in lexicographical order.\n     * @param {*} key - The key of the sorted set.\n     * @param {string} min - The minimum member value.\n     * @param {string} max - The maximum member value.\n     * @returns {number} - The number of members removed.\n     */\n    zremrangebylex(key, min, max) {\n        const sortedSet = this.store.get(key);\n        if (!sortedSet) {\n            return 0;\n        }\n\n        const sortedMembers = Array.from(sortedSet.keys()).sort();\n        let removedCount = 0;\n\n        for (const member of sortedMembers) {\n            if (member >= min && member <= max) {\n                sortedSet.delete(member);\n                removedCount++;\n            }\n        }\n\n        return removedCount;\n    }\n\n    /**\n     * Removes all elements in the sorted set stored at key with rank between start and stop.\n     * @param {string} key - The key of the sorted set.\n     * @param {number} start - The start rank.\n     * @param {number} stop - The stop rank.\n     * @returns {number} - The number of elements removed.\n     */\n    zremrangebyrank(key, start, stop) {\n        const sortedSet = this.store.get(key);\n        if (!sortedSet) {\n            return 0;\n        }\n\n        const sortedMembers = Array.from(sortedSet.entries()).sort((a, b) => a[1] - b[1]);\n\n        if (start < 0) start = sortedMembers.length + start;\n        if (stop < 0) stop = sortedMembers.length + stop;\n\n        let removedCount = 0;\n        for (let i = start; i <= stop; i++) {\n            if (sortedSet.delete(sortedMembers[i][0])) {\n                removedCount++;\n            }\n        }\n\n        return removedCount;\n    }\n\n    /**\n     * Removes all elements in the sorted set stored at key with a score between min and max (inclusive).\n     * @param {string} key - The key of the sorted set.\n     * @param {number} min - The minimum score.\n     * @param {number} max - The maximum score.\n     * @returns {number} - The number of elements removed.\n     */\n    zremrangebyscore(key, min, max) {\n        const sortedSet = this.store.get(key);\n        if (!sortedSet) {\n            return 0;\n        }\n\n        const sortedMembers = Array.from(sortedSet.entries()).sort((a, b) => a[1] - b[1]);\n        let removedCount = 0;\n\n        for (const [member, score] of sortedMembers) {\n            if (score >= min && score <= max) {\n                sortedSet.delete(member);\n                removedCount++;\n            }\n        }\n\n        return removedCount;\n    }\n\n    /**\n     * Returns the specified range of elements in the sorted set stored at key in reverse order.\n     * @param {string} key - The key of the sorted set.\n     * @param {number} start - The start index.\n     * @param {number} stop - The stop index.\n     * @returns {Array} - The specified range of elements in reverse order.\n     */\n    zrevrange(key, start, stop) {\n        const sortedSet = this.store.get(key) || new XMap();\n        const sortedMembers = Array.from(sortedSet.entries()).sort((a, b) => b[1] - a[1]);\n\n        if (start < 0) start = sortedMembers.length + start;\n        if (stop < 0) stop = sortedMembers.length + stop;\n\n        return sortedMembers.slice(start, stop + 1).map(([member, score]) => [member, score]);\n    }\n\n    /**\n     * Returns all elements in the sorted set stored at key with a value between max and min.\n     * @param {string} key - The key of the sorted set.\n     * @param {*} max - The maximum value.\n     * @param {*} min - The minimum value.\n     * @param {Object} options - Additional options.\n     * @returns {Array} - The specified range of elements.\n     */\n    zrevrangebylex(key, max, min, options = {}) {\n        const sortedSet = this.store.get(key) || new XMap();\n        const sortedMembers = Array.from(sortedSet.keys()).sort().reverse();\n\n        let result = sortedMembers.filter(member => member >= min && member <= max);\n\n        if (options.limit) {\n            const { offset, count } = options.limit;\n            result = result.slice(offset, offset + count);\n        }\n\n        return result;\n    }\n\n    /**\n     * Returns all elements in the sorted set stored at key with a score between max and min (inclusive) in reverse order.\n     * @param {string} key - The key of the sorted set.\n     * @param {number} max - The maximum score.\n     * @param {number} min - The minimum score.\n     * @param {Object} options - Additional options.\n     * @returns {Array} - The specified range of elements in reverse order.\n     */\n    zrevrangebyscore(key, max, min, options = {}) {\n        const sortedSet = this.store.get(key) || new XMap();\n        const sortedMembers = Array.from(sortedSet.entries()).sort((a, b) => b[1] - a[1]);\n\n        let result = sortedMembers.filter(([, score]) => score >= min && score <= max);\n\n        if (options.withscores) {\n            result = result.map(([member, score]) => [member, score]);\n        } else {\n            result = result.map(([member]) => member);\n        }\n\n        if (options.limit) {\n            const { offset, count } = options.limit;\n            result = result.slice(offset, offset + count);\n        }\n\n        return result;\n    }\n\n    /**\n     * Returns the rank of member in the sorted set stored at key, with the scores ordered from high to low.\n     * @param {string} key - The key of the sorted set.\n     * @param {*} member - The member whose rank to determine.\n     * @returns {number|undefined} - The rank of the member, or undefined if the member or sorted set does not exist.\n     */\n    zrevrank(key, member) {\n        const sortedSet = this.store.get(key);\n        if (!sortedSet) {\n            return undefined;\n        }\n\n        const sortedMembers = Array.from(sortedSet.entries()).sort((a, b) => b[1] - a[1]);\n        for (let i = 0; i < sortedMembers.length; i++) {\n            if (sortedMembers[i][0] === member) {\n                return i;\n            }\n        }\n\n        return undefined;\n    }\n\n    /**\n     * Incrementally iterates the elements of the sorted set stored at key.\n     * @param {string} key - The key of the sorted set.\n     * @param {number} cursor - The cursor position.\n     * @param {Object} options - Additional options.\n     * @returns {Array} - An array containing the next cursor and the result.\n     */\n    zscan(key, cursor, options = {}) {\n        const sortedSet = this.store.get(key) || new XMap();\n        const sortedMembers = Array.from(sortedSet.entries()).sort((a, b) => a[1] - b[1]);\n        const result = [];\n\n        let count = options.count || 10;\n        let index = cursor;\n\n        while (count > 0 && index < sortedMembers.length) {\n            if (!options.match || new RegExp(options.match.replace('*', '.*')).test(sortedMembers[index][0])) {\n                result.push(sortedMembers[index]);\n                count--;\n            }\n            index++;\n        }\n\n        return [index >= sortedMembers.length ? 0 : index, result];\n    }\n\n    /**\n     * Returns the score of a member in the sorted set stored at key.\n     * @param {string} key - The key of the sorted set.\n     * @param {*} member - The member whose score to retrieve.\n     * @returns {number|undefined} - The score of the member, or undefined if the member or sorted set does not exist.\n     */\n    zscore(key, member) {\n        const sortedSet = this.store.get(key);\n        if (!sortedSet)\n            return undefined;\n\n        return sortedSet.get(member);\n    }\n\n    /**\n     * Computes the union of multiple sorted sets specified by the keys array.\n     * @param {Array<string>} keys - An array of keys identifying the sorted sets to be combined.\n     * @returns {Array} - The union of the specified sorted sets, sorted by score.\n     */\n    zunion(keys) {\n        const unionMap = new XMap();\n\n        for (const key of keys) {\n            const sortedSet = this.store.get(key);\n            if (sortedSet) {\n                for (const [member, score] of sortedSet.entries()) {\n                    unionMap.set(member, (unionMap.get(member) || 0) + score);\n                }\n            }\n        }\n\n        return Array.from(unionMap.entries()).sort((a, b) => a[1] - b[1]);\n    }\n\n    /**\n     * Computes the union of multiple sorted sets specified by the keys array and stores the result in a new sorted set with the given destination key.\n     * @param {string} destination - The key of the new sorted set where the result will be stored.\n     * @param {Array<string>} keys - An array of keys identifying the sorted sets to be combined.\n     * @returns {number} - The size of the resulting sorted set.\n     */\n    zunionstore(destination, keys) {\n        const unionResult = this.zunion(keys);\n        const resultMap = new XMap(unionResult);\n        this.storeSet(destination, resultMap);\n        return resultMap.size;\n    }\n\n    /**\n     * Adds the specified geospatial item to the sorted set stored at key.\n     * @param {*} key - The key of the sorted set.\n     * @param {number} longitude - The longitude of the geospatial item.\n     * @param {number} latitude - The latitude of the geospatial item.\n     * @param {string} member - The member to be added to the sorted set.\n     * @returns {number} - The number of elements added to the sorted set (0 or 1).\n     */\n    geoadd(key, longitude, latitude, member) {\n        if (typeof longitude !== 'number' || typeof latitude !== 'number') {\n            throw new Error('Invalid longitude or latitude value');\n        }\n\n        const sortedSet = this.store.get(key) || new XMap();\n        const existingMember = sortedSet.get(member);\n\n        if (!existingMember) {\n            const geoData = { longitude, latitude };\n            sortedSet.set(member, geoData);\n            this.storeSet(key, sortedSet);\n            return 1;\n        }\n\n        return 0;\n    }\n    /**\n     * Calculates the distance between two geospatial items.\n     * @param {*} key - The key of the sorted set.\n     * @param {string} member1 - The first member in the sorted set.\n     * @param {string} member2 - The second member in the sorted set.\n     * @param {string} [unit='m'] - The unit of the returned distance (m, km, mi, ft).\n     * @returns {number|undefined} - The distance between the two members or undefined if not found.\n     */\n    geodist(key, member1, member2, unit = 'm') {\n        const sortedSet = this.store.get(key);\n        if (!sortedSet)\n            return undefined;\n\n        const pos1 = sortedSet.get(member1);\n        const pos2 = sortedSet.get(member2);\n\n        if (!pos1 || !pos2)\n            return undefined;\n\n        const distance = this._haversineDistance(pos1.latitude, pos1.longitude, pos2.latitude, pos2.longitude);\n\n        return this._convertDistance(distance, unit);\n    }\n\n    /**\n     * Returns the geohash string of one or more members.\n     * @param {*} key - The key of the sorted set.\n     * @param {...string} members - One or more members for which to return the geohash.\n     * @returns {string[]} - An array of geohash strings for the requested members.\n     */\n    geohash(key, ...members) {\n        const sortedSet = this.store.get(key);\n        if (!sortedSet) {\n            return [];\n        }\n\n        return members.map(member => {\n            const pos = sortedSet.get(member);\n            return pos ? this._encodeGeohash(pos.latitude, pos.longitude) : null;\n        });\n    }\n\n    /**\n     * Returns the positions (latitude, longitude) of one or more members.\n     * @param {*} key - The key of the sorted set.\n     * @param {...string} members - One or more members for which to return the positions.\n     * @returns {Array<[number, number]>} - An array of positions for the requested members.\n     */\n    geopos(key, ...members) {\n        const sortedSet = this.store.get(key);\n        if (!sortedSet) {\n            return [];\n        }\n\n        return members.map(member => {\n            const pos = sortedSet.get(member);\n            return pos ? [pos.latitude, pos.longitude] : null;\n        });\n    }\n\n    /**\n     * Returns members of a sorted set whose positions are within the specified radius from the given point.\n     * @param {*} key - The key of the sorted set.\n     * @param {number} longitude - The longitude of the center point.\n     * @param {number} latitude - The latitude of the center point.\n     * @param {number} radius - The search radius.\n     * @param {string} [unit='m'] - The unit of the search radius (m, km, mi, ft).\n     * @returns {string[]} - An array of members within the specified radius.\n     */\n    georadius(key, longitude, latitude, radius, unit = 'm') {\n        const sortedSet = this.store.get(key);\n        if (!sortedSet) {\n            return [];\n        }\n\n        const convertedRadius = this._convertDistance(radius, unit, 'm');\n        const result = [];\n\n        for (const [member, pos] of sortedSet.entries()) {\n            const distance = this._haversineDistance(latitude, longitude, pos.latitude, pos.longitude);\n            if (distance <= convertedRadius) {\n                result.push(member);\n            }\n        }\n\n        return result;\n    }\n\n    /**\n     * Computes the members of a geospatial index within the given radius (read-only version).\n     * @param {number} latitude - The latitude of the center point.\n     * @param {number} longitude - The longitude of the center point.\n     * @param {number} radius - The radius to search within.\n     * @param {string} key - The key of the geospatial index.\n     * @returns {Array} - An array of members within the specified radius.\n     */\n    georadius_ro(latitude, longitude, radius, key) {\n        return this.georadius(latitude, longitude, radius, key, true);\n    }\n\n    /**\n     * Computes the members of a geospatial index within the given radius around a specified member's coordinates.\n     * @param {string} key - The key of the geospatial index.\n     * @param {*} member - The member around which to search.\n     * @param {number} radius - The radius to search within.\n     * @returns {Array|undefined} - An array of members within the specified radius or undefined if the member is not found.\n     */\n    georadiusbymember(key, member, radius) {\n        const coord = this.geopos(key, member);\n        if (!coord) return undefined;\n        return this.georadius(coord[0], coord[1], radius, key);\n    }\n\n    /**\n     * Computes the members of a geospatial index within the given radius around a specified member's coordinates (read-only version).\n     * @param {string} key - The key of the geospatial index.\n     * @param {*} member - The member around which to search.\n     * @param {number} radius - The radius to search within.\n     * @returns {Array|undefined} - An array of members within the specified radius or undefined if the member is not found.\n     */\n    georadiusbymember_ro(key, member, radius) {\n        const coord = this.geopos(key, member);\n        if (!coord) return undefined;\n        return this.georadius(coord[0], coord[1], radius, key, true);\n    }\n\n    /**\n     * Searches for members within a specified radius around a given point in a geospatial index.\n     * @param {string} key - The key of the geospatial index.\n     * @param {number} latitude - The latitude of the center point.\n     * @param {number} longitude - The longitude of the center point.\n     * @param {number} radius - The radius to search within.\n     * @returns {Array} - An array of members within the specified radius.\n     */\n    geosearch(key, latitude, longitude, radius) {\n        return this.georadius(latitude, longitude, radius, key);\n    }\n\n    /**\n     * Searches for members within a specified radius around a given point in a geospatial index and stores the results in a new key.\n     * @param {string} destinationKey - The key where the results will be stored.\n     * @param {string} key - The key of the geospatial index.\n     * @param {number} latitude - The latitude of the center point.\n     * @param {number} longitude - The longitude of the center point.\n     * @param {number} radius - The radius to search within.\n     * @returns {number} - The number of members found within the specified radius.\n     */\n    geosearchstore(destinationKey, key, latitude, longitude, radius) {\n        const results = this.georadius(latitude, longitude, radius, key);\n        this.set(destinationKey, results);\n        return results.length;\n    }\n\n    /**\n     * Scans keys based on the given cursor, match pattern, and count.\n     * @param {number} cursor - The starting index for the scan.\n     * @param {string} [match='*'] - The pattern to match keys against.\n     * @param {number} [count=10] - The maximum number of keys to return.\n     * @returns {[number, string[]]} - An array containing the next cursor and the matched keys.\n     */\n    scan(cursor, match = '*', count = 10) {\n        const keys = this.keys(match);\n        const endIndex = Math.min(cursor + count, keys.length);\n        const nextCursor = endIndex === keys.length ? 0 : endIndex;\n\n        return [nextCursor, keys.slice(cursor, endIndex)];\n    }\n\n    /**\n     * Sorts the elements in the list, set, or sorted set stored at the key.\n     * @param {*} key - The key to retrieve the list, set, or sorted set.\n     * @param {string} [order='ASC'] - The order to sort the elements (ASC or DESC).\n     * @param {boolean} [alpha=false] - Whether to sort elements alphabetically or numerically.\n     * @returns {Array} - The sorted elements.\n     */\n    sort(key, order = 'ASC', alpha = false) {\n        const list = this.store.get(key);\n        if (!Array.isArray(list)) return [];\n\n        const sorted = list.slice().sort((a, b) => {\n            if (alpha) {\n                return order === 'ASC' ? a.localeCompare(b) : b.localeCompare(a);\n            } else {\n                return order === 'ASC' ? a - b : b - a;\n            }\n        });\n\n        return sorted;\n    }\n\n    /**\n     * Alters the last access time of a key(s).\n     * @param {...string} keys - The keys to update the access time.\n     * @returns {number} - The number of existing keys touched.\n     */\n    touch(...keys) {\n        return keys.reduce((acc, key) => acc + (this.exists(key) ? 1 : 0), 0);\n    }\n\n    /**\n     * Alias for the sort method that sorts elements in a read-only manner.\n     * @param {*} key - The key to retrieve the list, set, or sorted set.\n     * @param {string} [order='ASC'] - The order to sort the elements (ASC or DESC).\n     * @param {boolean} [alpha=false] - Whether to sort elements alphabetically or numerically.\n     * @returns {Array} - The sorted elements.\n     */\n    sort_ro(key, order = 'ASC', alpha = false) {\n        return this.sort(key, order, alpha);\n    }\n\n    /**\n     * Unlinks (deletes) the specified keys.\n     * @param {...string} keys - The keys to be removed.\n     * @returns {number} - The number of keys removed.\n     */\n    unlink(...keys) {\n        let removed = 0;\n        for (const key of keys) {\n            if (this.del(key)) {\n                removed++;\n            }\n        }\n        return removed;\n    }\n\n    /**\n     * Set the value of a field in a hash stored at the given key.\n     *\n     * @param {*} key - The key where the hash is stored.\n     * @param {string} field - The field to set the value for.\n     * @param {*} value - The value to set.\n     * @returns {number} - Returns 1 if a new field is created, 0 otherwise.\n     */\n    hset(key, field, value) {\n        if (!this.store.has(key)) {\n            this.storeSet(key, new XMap());\n        }\n        const hashMap = this.store.get(key);\n        const isNewField = !hashMap.has(field);\n\n        hashMap.set(field, value);\n        return isNewField ? 1 : 0;\n    }\n\n    /**\n     * Delete one or more fields from a hash stored at the given key.\n     *\n     * @param {*} key - The key where the hash is stored.\n     * @param {...string} fields - The fields to delete.\n     * @returns {number} - The number of fields removed from the hash.\n     */\n    hdel(key, ...fields) {\n        const hashMap = this.store.get(key);\n        if (!hashMap) return 0;\n\n        let removed = 0;\n        for (const field of fields) {\n            if (hashMap.delete(field)) {\n                removed++;\n            }\n        }\n        return removed;\n    }\n\n    /**\n     * Get the value of a field in a hash stored at the given key.\n     *\n     * @param {*} key - The key where the hash is stored.\n     * @param {string} field - The field to get the value for.\n     * @returns {*} - The value of the field, or undefined if the field does not exist.\n     */\n    hget(key, field) {\n        const hashMap = this.store.get(key);\n        return hashMap ? hashMap.get(field) : undefined;\n    }\n\n    /**\n     * Get all fields and their values in a hash stored at the given key.\n     *\n     * @param {*} key - The key where the hash is stored.\n     * @returns {Object} - An object containing field-value pairs,\n     *                     or an empty object if the hash does not exist.\n     */\n    hgetall(key) {\n        const hashMap = this.store.get(key);\n        if (!hashMap) return {};\n\n        const result = {};\n        for (const [field, value] of hashMap) {\n            result[field] = value;\n        }\n        return result;\n    }\n\n    /**\n     * Increment the integer value of a field in a hash stored at the given key.\n     *\n     * @param {*} key - The key where the hash is stored.\n     * @param {string} field - The field to increment.\n     * @param {number} increment - The value to increment by.\n     * @returns {number} - The new value of the field after the increment.\n     */\n    hincrby(key, field, increment) {\n        const hashMap = this.store.get(key) || new XMap();\n        const currentValue = parseInt(hashMap.get(field) || 0, 10);\n        const newValue = currentValue + increment;\n\n        hashMap.set(field, newValue.toString());\n        this.storeSet(key, hashMap);\n        return newValue;\n    }\n\n    /**\n     * Increment the float value of a field in a hash stored at the given key.\n     *\n     * @param {*} key - The key where the hash is stored.\n     * @param {string} field - The field to increment.\n     * @param {number} increment - The value to increment by.\n     * @returns {number} - The new value of the field after the increment.\n     */\n    hincrbyfloat(key, field, increment) {\n        const hashMap = this.store.get(key) || new XMap();\n        const currentValue = parseFloat(hashMap.get(field) || 0);\n        const newValue = currentValue + increment;\n\n        hashMap.set(field, newValue.toString());\n        this.storeSet(key, hashMap);\n        return newValue;\n    }\n\n    /**\n     * Get all field names in a hash stored at the given key.\n     *\n     * @param {*} key - The key where the hash is stored.\n     * @returns {Array} - An array of field names, or an empty array if the hash does not exist.\n     */\n    hkeys(key) {\n        const hashMap = this.store.get(key);\n        return hashMap ? Array.from(hashMap.keys()) : [];\n    }\n\n    /**\n     * Get the number of fields in a hash stored at the given key.\n     *\n     * @param {*} key - The key where the hash is stored.\n     * @returns {number} - The number of fields in the hash, or 0 if the hash does not exist.\n     */\n    hlen(key) {\n        const hashMap = this.store.get(key);\n        return hashMap ? hashMap.size : 0;\n    }\n\n    /**\n     * Get the values of multiple fields in a hash stored at the given key.\n     *\n     * @param {*} key - The key where the hash is stored.\n     * @param {...string} fields - The fields to get the values for.\n     * @returns {Array} - An array of field values.\n     */\n    hmget(key, ...fields) {\n        const hashMap = this.store.get(key) || new XMap();\n        return fields.map(field => hashMap.get(field));\n    }\n\n    /**\n     * Set the values of multiple fields in a hash stored at the given key.\n     *\n     * @param {*} key - The key where the hash is stored.\n     * @param {...*} fieldValuePairs - An array of field-value pairs.\n     * @returns {string} - Returns \"OK\" on successful update.\n     */\n    hmset(key, ...fieldValuePairs) {\n        const hashMap = this.store.get(key) || new XMap();\n\n        for (let i = 0; i < fieldValuePairs.length; i += 2) {\n            const field = fieldValuePairs[i];\n            const value = fieldValuePairs[i + 1];\n            hashMap.set(field, value);\n        }\n\n        this.storeSet(key, hashMap);\n        return true;\n    }\n\n    /**\n     * Set the value of a field in a hash stored at the given key, only if the field does not exist.\n     *\n     * @param {*} key - The key where the hash is stored.\n     * @param {string} field - The field to set the value for.\n     * @param {*} value - The value to set.\n     * @returns {number} - Returns 1 if the field is newly created, 0 otherwise.\n     */\n    hsetnx(key, field, value) {\n        const hashMap = this.store.get(key) || new XMap();\n\n        if (hashMap.has(field)) {\n            return 0;\n        }\n\n        hashMap.set(field, value);\n        this.storeSet(key, hashMap);\n        return 1;\n    }\n\n    /**\n     * Get the length of the string value of a field in a hash stored at the given key.\n     *\n     * @param {*} key - The key where the hash is stored.\n     * @param {string} field - The field to get the value length for.\n     * @returns {number} - The length of the field value, or 0 if the field does not exist.\n     */\n    hstrlen(key, field) {\n        const hashMap = this.store.get(key);\n        const value = hashMap ? hashMap.get(field) : null;\n        return value ? value.length : 0;\n    }\n\n    /**\n     * Get all values in a hash stored at the given key.\n     *\n     * @param {*} key - The key where the hash is stored.\n     * @returns {Array} - An array of field values, or an empty array if the hash does not exist.\n     */\n    hvals(key) {\n        const hashMap = this.store.get(key);\n        return hashMap ? Array.from(hashMap.values()) : [];\n    }\n\n    /**\n     * Incrementally iterate over a hash stored at the given key.\n     *\n     * @param {*} key - The key where the hash is stored.\n     * @param {number} cursor - The starting position for the iteration.\n     * @param {string} match - The pattern to filter field names (default is \"*\").\n     * @param {number} count - The maximum number of elements to return (default is 10).\n     * @returns {Array} - An array containing the next cursor and the filtered field-value pairs.\n     */\n    hscan(key, cursor, match = '*', count = 10) {\n        const hashMap = this.store.get(key) || new XMap();\n        const filteredFields = Array.from(hashMap.keys()).filter(field => field.includes(match));\n        const endIndex = Math.min(cursor + count, filteredFields.length);\n        const nextCursor = endIndex === filteredFields.length ? 0 : endIndex;\n\n        return [nextCursor, filteredFields.slice(cursor, endIndex).map(field => [field, hashMap.get(field)])];\n    }\n\n    /**\n     * Check if a field exists in a hash stored at the given key.\n     *\n     * @param {*} key - The key where the hash is stored.\n     * @param {string} field - The field to check for existence.\n     * @returns {number} - Returns 1 if the field exists, 0 otherwise.\n     */\n    hexists(key, field) {\n        const hashMap = this.store.get(key);\n        return hashMap && hashMap.has(field) ? 1 : 0;\n    }\n\n    /**\n     * Get random field(s) from a hash stored at the given key.\n     *\n     * @param {*} key - The key where the hash is stored.\n     * @param {number} count - The number of random fields to return (default is 1).\n     * @returns {Array} - An array of random field names, or an empty array if the hash does not exist.\n     */\n    hrandfield(key, count = 1) {\n        const hashMap = this.store.get(key);\n        if (!hashMap) return [];\n\n        const fields = Array.from(hashMap.keys());\n        const result = [];\n\n        for (let i = 0; i < count; i++) {\n            const randomIndex = Math.floor(Math.random() * fields.length);\n            result.push(fields[randomIndex]);\n        }\n\n        return result;\n    }\n\n    /**\n     * Checks if a key has expired and removes it if it has.\n     * @param {*} key - The key to check for expiration.\n     * @returns {boolean} - Returns true if the key was expired and removed, false otherwise.\n     */\n    _checkAndRemoveExpiredKey(key) {\n        const expireTime = this.expireTimes.get(key);\n        if (expireTime && Date.now() > expireTime) {\n            this.store.delete(key);\n            this.expireTimes.delete(key);\n            // Remove from IndexedDB if available\n            if (this.isIndexedDBAvailable && this.db) {\n                this._removeFromIndexedDB(key);\n            }\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * Initializes a cleanup loop that runs at a specified interval and removes expired keys from the store.\n     * @param {number} cleanupIntervalMs - The interval, in milliseconds, at which the cleanup loop should run.\n     */\n    _initCleanupLoop(cleanupIntervalMs) {\n        // create new cleanup loop\n        if (this.store.size === 1) {\n            this.cleanupLoop = setInterval(() => {\n                if (this.store.size === 0 && this.cleanupLoop) {\n                    clearInterval(this.cleanupLoop);\n                } else {\n                    for (const key of this.expireTimes.keys()) {\n                        this._checkAndRemoveExpiredKey(key);\n                    }\n                }\n            }, cleanupIntervalMs);\n            \n            // Only call unref() if it exists (Node.js environment)\n            // In browsers, setInterval returns a number, not an object with unref()\n            if (typeof this.cleanupLoop === 'object' && typeof this.cleanupLoop.unref === 'function') {\n                this.cleanupLoop.unref();\n            }\n        }\n    }\n\n    /**\n     * Calculates the haversine distance between two geographic coordinates.\n     * @param {number} lat1 - The latitude of the first coordinate.\n     * @param {number} lon1 - The longitude of the first coordinate.\n     * @param {number} lat2 - The latitude of the second coordinate.\n     * @param {number} lon2 - The longitude of the second coordinate.\n     * @returns {number} - The haversine distance in meters.\n     */\n    _haversineDistance(lat1, lon1, lat2, lon2) {\n        const toRadians = (angle) => (angle * Math.PI) / 180;\n        const R = 6371e3; // Earth's radius in meters\n\n        const dLat = toRadians(lat2 - lat1);\n        const dLon = toRadians(lon2 - lon1);\n\n        const a =\n            Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n            Math.cos(toRadians(lat1)) * Math.cos(toRadians(lat2)) * Math.sin(dLon / 2) * Math.sin(dLon / 2);\n\n        const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n\n        return R * c;\n    }\n\n    /**\n     * Converts a distance value from one unit to another.\n     * @param {number} distance - The distance value to convert.\n     * @param {string} fromUnit - The unit of the given distance (m, km, mi, ft).\n     * @param {string} toUnit - The target unit to convert the distance to (m, km, mi, ft).\n     * @returns {number} - The distance value converted to the target unit.\n     */\n    _convertDistance(distance, fromUnit, toUnit) {\n        const conversionFactors = {\n            m: 1,\n            km: 0.001,\n            mi: 0.000621371,\n            ft: 3.28084,\n        };\n\n        if (!conversionFactors[fromUnit] || !conversionFactors[toUnit]) {\n            throw new Error('Invalid distance unit');\n        }\n\n        return (distance * conversionFactors[fromUnit]) / conversionFactors[toUnit];\n    }\n\n    /**\n     * Encodes a geographic coordinate (latitude, longitude) into a geohash string.\n     * @param {number} latitude - The latitude of the coordinate.\n     * @param {number} longitude - The longitude of the coordinate.\n     * @returns {string} - The geohash string.\n     */\n    _encodeGeohash(latitude, longitude) {\n        const base32 = '0123456789bcdefghjkmnpqrstuvwxyz';\n        let hash = '';\n\n        let minLat = -90;\n        let maxLat = 90;\n        let minLon = -180;\n        let maxLon = 180;\n\n        let even = true;\n        let bit = 0;\n        let charIndex = 0;\n\n        while (hash.length < 12) {\n            if (even) {\n                const midLon = (minLon + maxLon) / 2;\n                if (longitude > midLon) {\n                    charIndex = (charIndex << 1) + 1;\n                    minLon = midLon;\n                } else {\n                    charIndex = charIndex << 1;\n                    maxLon = midLon;\n                }\n            } else {\n                const midLat = (minLat + maxLat) / 2;\n                if (latitude > midLat) {\n                    charIndex = (charIndex << 1) + 1;\n                    minLat = midLat;\n                } else {\n                    charIndex = charIndex << 1;\n                    maxLat = midLat;\n                }\n            }\n\n            even = !even;\n\n            if (bit < 4) {\n                bit++;\n            } else {\n                hash += base32[charIndex];\n                bit = 0;\n                charIndex = 0;\n            }\n        }\n\n        return hash;\n    }\n\n    /**\n     * Removes all keys and associated values from the store and clears all expiration times\n     * @returns {boolean} - Returns true if the function was successful.\n     */\n    flushall() {\n        // Clear all keys and associated values from the store\n        this.store.clear();\n\n        // Clear all expiration times from the expirations map\n        this.expireTimes.clear();\n\n        // Clear IndexedDB if available\n        if (this.isIndexedDBAvailable && this.db) {\n            this._clearIndexedDB();\n        }\n\n        // Return true to indicate that the function was successful\n        return true;\n    }\n\n    /**\n     * Clear all data from IndexedDB\n     * @private\n     */\n    async _clearIndexedDB() {\n        if (!this.db) return;\n\n        try {\n            const transaction = this.db.transaction(['store', 'expireTimes'], 'readwrite');\n            const storeObjectStore = transaction.objectStore('store');\n            const expireTimesObjectStore = transaction.objectStore('expireTimes');\n            \n            storeObjectStore.clear();\n            expireTimesObjectStore.clear();\n        } catch (error) {\n            console.warn('Failed to clear IndexedDB:', error);\n        }\n    }\n}\n\nmodule.exports = kvjs;", "import putility from '@heyputer/putility';\n\nimport kvjs from '@heyputer/kv.js';\nimport APICallLogger from './lib/APICallLogger.js';\nimport path from './lib/path.js';\nimport localStorageMemory from './lib/polyfills/localStorage.js';\nimport xhrshim from './lib/polyfills/xhrshim.js';\nimport * as utils from './lib/utils.js';\nimport AI from './modules/AI.js';\nimport Apps from './modules/Apps.js';\nimport Auth from './modules/Auth.js';\nimport { Debug } from './modules/Debug.js';\nimport Drivers from './modules/Drivers.js';\nimport { PuterJSFileSystemModule } from './modules/FileSystem/index.js';\nimport FSItem from './modules/FSItem.js';\nimport Hosting from './modules/Hosting.js';\nimport KV from './modules/KV.js';\nimport { PSocket } from './modules/networking/PSocket.js';\nimport { PTLSSocket } from './modules/networking/PTLS.js';\nimport { pFetch } from './modules/networking/requests.js';\nimport OS from './modules/OS.js';\nimport Perms from './modules/Perms.js';\nimport Threads from './modules/Threads.js';\nimport UI from './modules/UI.js';\nimport Util from './modules/Util.js';\nimport { WorkersHandler } from './modules/Workers.js';\nimport { APIAccessService } from './services/APIAccess.js';\nimport { FilesystemService } from './services/Filesystem.js';\nimport { FSRelayService } from './services/FSRelay.js';\nimport { NoPuterYetService } from './services/NoPuterYet.js';\nimport { XDIncomingService } from './services/XDIncoming.js';\n\n// TODO: This is for a safe-guard below; we should check if we can\n//       generalize this behavior rather than hard-coding it.\n//       (using defaultGUIOrigin breaks locally-hosted apps)\nconst PROD_ORIGIN = 'https://puter.com';\n\nconst puterInit = (function () {\n    'use strict';\n\n    class Puter {\n        // The environment that the SDK is running in. Can be 'gui', 'app' or 'web'.\n        // 'gui' means the SDK is running in the Puter GUI, i.e. Puter.com.\n        // 'app' means the SDK is running as a Puter app, i.e. within an iframe in the Puter GUI.\n        // 'web' means the SDK is running in a 3rd-party website.\n        env;\n\n        #defaultAPIOrigin = 'https://api.puter.com';\n        #defaultGUIOrigin = 'https://puter.com';\n\n        get defaultAPIOrigin () {\n            return globalThis.PUTER_API_ORIGIN || globalThis.PUTER_API_ORIGIN_ENV || this.#defaultAPIOrigin;\n        }\n        set defaultAPIOrigin (v) {\n            this.#defaultAPIOrigin = v;\n        }\n\n        get defaultGUIOrigin () {\n            return globalThis.PUTER_ORIGIN || globalThis.PUTER_ORIGIN_ENV || this.#defaultGUIOrigin;\n        }\n        set defaultGUIOrigin (v) {\n            this.#defaultGUIOrigin = v;\n        }\n\n        // An optional callback when the user is authenticated. This can be set by the app using the SDK.\n        onAuth;\n\n        /**\n         * State object to keep track of the authentication request status.\n         * This is used to prevent multiple authentication popups from showing up by different parts of the app.\n         */\n        puterAuthState = {\n            isPromptOpen: false,\n            authGranted: null,\n            resolver: null,\n        };\n\n        // Holds the unique app instance ID that is provided by the host environment\n        appInstanceID;\n\n        // Holds the unique app instance ID for the parent (if any), which is provided by the host environment\n        parentInstanceID;\n\n        // Expose the FSItem class\n        static FSItem = FSItem;\n\n        // Event handling properties\n        eventHandlers = {};\n\n        // debug flag\n        debugMode = false;\n\n        /**\n         * Puter.js Modules\n         *\n         * These are the modules you see on docs.puter.com; for example:\n         * - puter.fs\n         * - puter.kv\n         * - puter.ui\n         *\n         * initSubmodules is called from the constructor of this class.\n         */\n        initSubmodules = function () {\n            // Util\n            this.util = new Util();\n\n            this.registerModule('auth', Auth);\n            this.registerModule('os', OS);\n            this.registerModule('fs', PuterJSFileSystemModule);\n            this.registerModule('ui', UI, {\n                appInstanceID: this.appInstanceID,\n                parentInstanceID: this.parentInstanceID,\n            });\n            this.registerModule('hosting', Hosting);\n            this.registerModule('apps', Apps);\n            this.registerModule('ai', AI);\n            this.registerModule('kv', KV);\n            this.registerModule('threads', Threads);\n            this.registerModule('perms', Perms);\n            this.registerModule('drivers', Drivers);\n            this.registerModule('debug', Debug);\n\n            // Path\n            this.path = path;\n        };\n\n        // --------------------------------------------\n        // Constructor\n        // --------------------------------------------\n        constructor () {\n\n            // Initialize the cache using kv.js\n            this._cache = new kvjs({ dbName: 'puter_cache' });\n            this._opscache = new kvjs();\n\n            // \"modules\" in puter.js are external interfaces for the developer\n            this.modules_ = [];\n            // \"services\" in puter.js are used by modules and may interact with each other\n            const context = new putility.libs.context.Context()\n                .follow(this, ['env', 'util', 'authToken', 'APIOrigin', 'appID']);\n\n            context.puter = this;\n\n            this.services = new putility.system.ServiceManager({ context });\n            this.context = context;\n            context.services = this.services;\n\n            // Holds the query parameters found in the current URL\n            let URLParams = new URLSearchParams(globalThis.location?.search);\n\n            // Figure out the environment in which the SDK is running\n            if ( URLParams.has('puter.app_instance_id') ) {\n                this.env = 'app';\n            } else if ( globalThis.puter_gui_enabled === true )\n            {\n                this.env = 'gui';\n            }\n            else if ( globalThis.WorkerGlobalScope ) {\n                if ( globalThis.ServiceWorkerGlobalScope ) {\n                    this.env = 'service-worker';\n                    if ( ! globalThis.XMLHttpRequest ) {\n                        globalThis.XMLHttpRequest = xhrshim;\n                    }\n                    if ( ! globalThis.location ) {\n                        globalThis.location = new URL('https://puter.site/');\n                    }\n                    // XHRShimGlobalize here\n                } else {\n                    this.env = 'web-worker';\n                }\n                if ( ! globalThis.localStorage ) {\n                    globalThis.localStorage = localStorageMemory;\n                }\n            } else if ( globalThis.process ) {\n                this.env = 'nodejs';\n                if ( ! globalThis.localStorage ) {\n                    globalThis.localStorage = localStorageMemory;\n                }\n                if ( ! globalThis.XMLHttpRequest ) {\n                    globalThis.XMLHttpRequest = xhrshim;\n                }\n                if ( ! globalThis.location ) {\n                    globalThis.location = new URL('https://nodejs.puter.site/');\n                }\n                if ( ! globalThis.addEventListener ) {\n                    globalThis.addEventListener = () => {\n                    }; // API Stub\n                }\n            } else {\n                this.env = 'web';\n            }\n\n            // There are some specific situations where puter is definitely loaded in GUI mode\n            // we're going to check for those situations here so that we don't break anything unintentionally\n            // if navigator URL's hostname is 'puter.com'\n            if ( this.env !== 'gui' ) {\n                // Retrieve the hostname from the URL: Remove the trailing dot if it exists. This is to handle the case where the URL is, for example, `https://puter.com.` (note the trailing dot).\n                // This is necessary because the trailing dot can cause the hostname to not match the expected value.\n                let hostname = location.hostname.replace(/\\.$/, '');\n\n                // Create a new URL object with the URL string\n                const url = new URL(PROD_ORIGIN);\n\n                // Extract hostname from the URL object\n                const gui_hostname = url.hostname;\n\n                // If the hostname matches the GUI hostname, then the SDK is running in the GUI environment\n                if ( hostname === gui_hostname ) {\n                    this.env = 'gui';\n                }\n            }\n\n            // Get the 'args' from the URL. This is used to pass arguments to the app.\n            if ( URLParams.has('puter.args') ) {\n                this.args = JSON.parse(decodeURIComponent(URLParams.get('puter.args')));\n            } else {\n                this.args = {};\n            }\n\n            // Try to extract appInstanceID from the URL. appInstanceID is included in every messaage\n            // sent to the host environment. This is used to help host environment identify the app\n            // instance that sent the message and communicate back to it.\n            if ( URLParams.has('puter.app_instance_id') ) {\n                this.appInstanceID = decodeURIComponent(URLParams.get('puter.app_instance_id'));\n            }\n\n            // Try to extract parentInstanceID from the URL. If another app launched this app instance, parentInstanceID\n            // holds its instance ID, and is used to communicate with that parent app.\n            if ( URLParams.has('puter.parent_instance_id') ) {\n                this.parentInstanceID = decodeURIComponent(URLParams.get('puter.parent_instance_id'));\n            }\n\n            // Try to extract `puter.app.id` from the URL. `puter.app.id` is the unique ID of the app.\n            // App ID is useful for identifying the app when communicating with the Puter API, among other things.\n            if ( URLParams.has('puter.app.id') ) {\n                this.appID = decodeURIComponent(URLParams.get('puter.app.id'));\n            }\n\n            // Extract app name (added later)\n            if ( URLParams.has('puter.app.name') ) {\n                this.appName = decodeURIComponent(URLParams.get('puter.app.name'));\n            }\n\n            // Construct this App's AppData path based on the appID. AppData path is used to store files that are specific to this app.\n            // The default AppData path is `~/AppData/<appID>`.\n            if ( this.appID ) {\n                this.appDataPath = `~/AppData/${this.appID}`;\n            }\n\n            // Construct APIOrigin from the URL. APIOrigin is used to build the URLs for the Puter API endpoints.\n            // The default APIOrigin is https://api.puter.com. However, if the URL contains a `puter.api_origin` query parameter,\n            // then that value is used as the APIOrigin. If the URL contains a `puter.domain` query parameter, then the APIOrigin\n            // is constructed as `https://api.<puter.domain>`.\n            // This should only be done when the SDK is running in 'app' mode.\n            this.APIOrigin = this.defaultAPIOrigin;\n            if ( URLParams.has('puter.api_origin') && this.env === 'app' ) {\n                this.APIOrigin = decodeURIComponent(URLParams.get('puter.api_origin'));\n            } else if ( URLParams.has('puter.domain') && this.env === 'app' ) {\n                this.APIOrigin = `https://api.${ URLParams.get('puter.domain')}`;\n            }\n\n            // === START :: Logger ===\n\n            // logger will log to console\n            let logger = new putility.libs.log.ConsoleLogger();\n\n            // logs can be toggled based on categories\n            logger = new putility.libs.log.CategorizedToggleLogger({ delegate: logger });\n            const cat_logger = logger;\n\n            // create facade for easy logging\n            this.logger = new putility.libs.log.LoggerFacade({\n                impl: logger,\n                cat: cat_logger,\n            });\n\n            // Initialize API call logger\n            this.apiCallLogger = new APICallLogger({\n                enabled: false, // Disabled by default\n            });\n\n            // === START :: Services === //\n\n            this.services.register('no-puter-yet', NoPuterYetService);\n            this.services.register('filesystem', FilesystemService);\n            this.services.register('api-access', APIAccessService);\n            this.services.register('xd-incoming', XDIncomingService);\n            if ( this.env !== 'app' ) {\n                this.services.register('fs-relay', FSRelayService);\n            }\n\n            // When api-access is initialized, bind `.authToken` and\n            // `.APIOrigin` as a 1-1 mapping with the `puter` global\n            (async () => {\n                await this.services.wait_for_init(['api-access']);\n                const svc_apiAccess = this.services.get('api-access');\n\n                svc_apiAccess.auth_token = this.authToken;\n                svc_apiAccess.api_origin = this.APIOrigin;\n                [\n                    ['authToken', 'auth_token'],\n                    ['APIOrigin', 'api_origin'],\n                ].forEach(([k1, k2]) => {\n                    Object.defineProperty(this, k1, {\n                        get () {\n                            return svc_apiAccess[k2];\n                        },\n                        set (v) {\n                            svc_apiAccess[k2] = v;\n                        },\n                    });\n                });\n            })();\n\n            // === Start :: Modules === //\n\n            // The SDK is running in the Puter GUI (i.e. 'gui')\n            if ( this.env === 'gui' ) {\n                this.authToken = window.auth_token;\n                // initialize submodules\n                this.initSubmodules();\n            }\n            // Loaded in an iframe in the Puter GUI (i.e. 'app')\n            // When SDK is loaded in App mode the initiation process should start when the DOM is ready\n            else if ( this.env === 'app' ) {\n                this.authToken = decodeURIComponent(URLParams.get('puter.auth.token'));\n                // initialize submodules\n                this.initSubmodules();\n                // If the authToken is already set in localStorage, then we don't need to show the dialog\n                try {\n                    if ( localStorage.getItem('puter.auth.token') ) {\n                        this.setAuthToken(localStorage.getItem('puter.auth.token'));\n                    }\n                    // if appID is already set in localStorage, then we don't need to show the dialog\n                    if ( localStorage.getItem('puter.app.id') ) {\n                        this.setAppID(localStorage.getItem('puter.app.id'));\n                    }\n                } catch ( error ) {\n                    // Handle the error here\n                    console.error('Error accessing localStorage:', error);\n                }\n            }\n            // SDK was loaded in a 3rd-party website.\n            // When SDK is loaded in GUI the initiation process should start when the DOM is ready. This is because\n            // the SDK needs to show a dialog to the user to ask for permission to access their Puter account.\n            else if ( this.env === 'web' ) {\n                // initialize submodules\n                this.initSubmodules();\n                try {\n                    // If the authToken is already set in localStorage, then we don't need to show the dialog\n                    if ( localStorage.getItem('puter.auth.token') ) {\n                        this.setAuthToken(localStorage.getItem('puter.auth.token'));\n                    }\n                    // if appID is already set in localStorage, then we don't need to show the dialog\n                    if ( localStorage.getItem('puter.app.id') ) {\n                        this.setAppID(localStorage.getItem('puter.app.id'));\n                    }\n                } catch ( error ) {\n                    // Handle the error here\n                    console.error('Error accessing localStorage:', error);\n                }\n            } else if ( this.env === 'web-worker' || this.env === 'service-worker' || this.env === 'nodejs' ) {\n                this.initSubmodules();\n            }\n\n            // Add prefix logger (needed to happen after modules are initialized)\n            (async () => {\n                await this.services.wait_for_init(['api-access']);\n                const whoami = await this.auth.whoami();\n                logger = new putility.libs.log.PrefixLogger({\n                    delegate: logger,\n                    prefix: `[${\n                        whoami?.app_name ?? this.appInstanceID ?? 'HOST'\n                    }] `,\n                });\n\n                this.logger.impl = logger;\n            })();\n\n            // Lock to prevent multiple requests to `/rao`\n            this.lock_rao_ = new putility.libs.promise.Lock();\n            // Promise that resolves when it's okay to request `/rao`\n            this.p_can_request_rao_ = new putility.libs.promise.TeePromise();\n            // Flag that indicates if a request to `/rao` has been made\n            this.rao_requested_ = false;\n\n            // In case we're already auth'd, request `/rao`\n            (async () => {\n                await this.services.wait_for_init(['api-access']);\n                this.p_can_request_rao_.resolve();\n            })();\n\n            this.net = {\n                generateWispV1URL: async () => {\n                    const { token: wispToken, server: wispServer } = (await (await fetch(`${this.APIOrigin }/wisp/relay-token/create`, {\n                        method: 'POST',\n                        headers: {\n                            Authorization: `Bearer ${this.authToken}`,\n                            'Content-Type': 'application/json',\n                        },\n                        body: JSON.stringify({}),\n                    })).json());\n                    return `${wispServer}/${wispToken}/`;\n                },\n                Socket: PSocket,\n                tls: {\n                    TLSSocket: PTLSSocket,\n                },\n                fetch: pFetch,\n            };\n\n            this.workers = new WorkersHandler(this.authToken);\n\n            // Initialize network connectivity monitoring and cache purging\n            this.initNetworkMonitoring();\n        }\n\n        /**\n         * @internal\n         * Makes a request to `/rao`. This method aquires a lock to prevent\n         * multiple requests, and is effectively idempotent.\n         */\n        async request_rao_ () {\n            await this.p_can_request_rao_;\n\n            if ( this.env === 'gui' ) {\n                return;\n            }\n\n            // setAuthToken is called more than once when auth completes, which\n            // causes multiple requests to /rao. This lock prevents that.\n            await this.lock_rao_.acquire();\n            if ( this.rao_requested_ ) {\n                this.lock_rao_.release();\n                return;\n            }\n\n            let had_error = false;\n            try {\n                const resp = await fetch(`${this.APIOrigin }/rao`, {\n                    method: 'POST',\n                    headers: {\n                        Authorization: `Bearer ${this.authToken}`,\n                        Origin: location.origin, // This is ignored in the browser but needed for workers and nodejs\n                    },\n                });\n                return await resp.json();\n            } catch ( e ) {\n                had_error = true;\n                console.error(e);\n            } finally {\n                this.lock_rao_.release();\n            }\n            if ( ! had_error ) {\n                this.rao_requested_ = true;\n            }\n        }\n\n        registerModule (name, cls, parameters = {}) {\n            const instance = new cls(this.context, parameters);\n            this.modules_.push(name);\n            this[name] = instance;\n            if ( instance._init ) instance._init({ puter: this });\n        }\n\n        updateSubmodules () {\n            // Update submodules with new auth token and API origin\n            for ( const name of this.modules_ ) {\n                if ( ! this[name] ) continue;\n                this[name]?.setAuthToken?.(this.authToken);\n                this[name]?.setAPIOrigin?.(this.APIOrigin);\n            }\n        }\n\n        setAppID = function (appID) {\n            // save to localStorage\n            try {\n                localStorage.setItem('puter.app.id', appID);\n            } catch ( error ) {\n                // Handle the error here\n                console.error('Error accessing localStorage:', error);\n            }\n            this.appID = appID;\n        };\n\n        setAuthToken = function (authToken) {\n            this.authToken = authToken;\n            // If the SDK is running on a 3rd-party site or an app, then save the authToken in localStorage\n            if ( this.env === 'web' || this.env === 'app' ) {\n                try {\n                    localStorage.setItem('puter.auth.token', authToken);\n                } catch ( error ) {\n                    // Handle the error here\n                    console.error('Error accessing localStorage:', error);\n                }\n            }\n            // initialize loop for updating caches for major directories\n            if ( this.env === 'gui' ) {\n                // check and update gui fs cache regularly\n                setInterval(puter.checkAndUpdateGUIFScache, 10000);\n            }\n            // reinitialize submodules\n            this.updateSubmodules();\n\n            // rao\n            this.request_rao_();\n\n            // perform whoami and cache results\n            this.getUser().then((user) => {\n                this.whoami = user;\n            });\n        };\n\n        setAPIOrigin = function (APIOrigin) {\n            this.APIOrigin = APIOrigin;\n            // reinitialize submodules\n            this.updateSubmodules();\n        };\n\n        resetAuthToken = function () {\n            this.authToken = null;\n            // If the SDK is running on a 3rd-party site or an app, then save the authToken in localStorage\n            if ( this.env === 'web' || this.env === 'app' ) {\n                try {\n                    localStorage.removeItem('puter.auth.token');\n                } catch ( error ) {\n                    // Handle the error here\n                    console.error('Error accessing localStorage:', error);\n                }\n            }\n            // reinitialize submodules\n            this.updateSubmodules();\n        };\n\n        exit = function (statusCode = 0) {\n            if ( statusCode && (typeof statusCode !== 'number') ) {\n                console.warn('puter.exit() requires status code to be a number. Treating it as 1');\n                statusCode = 1;\n            }\n\n            globalThis.parent.postMessage({\n                msg: 'exit',\n                appInstanceID: this.appInstanceID,\n                statusCode,\n            }, '*');\n        };\n\n        /**\n         * A function that generates a domain-safe name by combining a random adjective, a random noun, and a random number (between 0 and 9999).\n         * The result is returned as a string with components separated by hyphens.\n         * It is useful when you need to create unique identifiers that are also human-friendly.\n         *\n         * @param {string} [separateWith='-'] - The character to use to separate the components of the generated name.\n         * @returns {string} A unique, hyphen-separated string comprising of an adjective, a noun, and a number.\n         *\n         */\n        randName = function (separateWith = '-') {\n            const first_adj = ['helpful', 'sensible', 'loyal', 'honest', 'clever', 'capable', 'calm', 'smart', 'genius', 'bright', 'charming', 'creative', 'diligent', 'elegant', 'fancy',\n                'colorful', 'avid', 'active', 'gentle', 'happy', 'intelligent', 'jolly', 'kind', 'lively', 'merry', 'nice', 'optimistic', 'polite',\n                'quiet', 'relaxed', 'silly', 'victorious', 'witty', 'young', 'zealous', 'strong', 'brave', 'agile', 'bold'];\n\n            const nouns = ['street', 'roof', 'floor', 'tv', 'idea', 'morning', 'game', 'wheel', 'shoe', 'bag', 'clock', 'pencil', 'pen',\n                'magnet', 'chair', 'table', 'house', 'dog', 'room', 'book', 'car', 'cat', 'tree',\n                'flower', 'bird', 'fish', 'sun', 'moon', 'star', 'cloud', 'rain', 'snow', 'wind', 'mountain',\n                'river', 'lake', 'sea', 'ocean', 'island', 'bridge', 'road', 'train', 'plane', 'ship', 'bicycle',\n                'horse', 'elephant', 'lion', 'tiger', 'bear', 'zebra', 'giraffe', 'monkey', 'snake', 'rabbit', 'duck',\n                'goose', 'penguin', 'frog', 'crab', 'shrimp', 'whale', 'octopus', 'spider', 'ant', 'bee', 'butterfly', 'dragonfly',\n                'ladybug', 'snail', 'camel', 'kangaroo', 'koala', 'panda', 'piglet', 'sheep', 'wolf', 'fox', 'deer', 'mouse', 'seal',\n                'chicken', 'cow', 'dinosaur', 'puppy', 'kitten', 'circle', 'square', 'garden', 'otter', 'bunny', 'meerkat', 'harp'];\n\n            // return a random combination of first_adj + noun + number (between 0 and 9999)\n            // e.g. clever-idea-123\n            return first_adj[Math.floor(Math.random() * first_adj.length)] + separateWith + nouns[Math.floor(Math.random() * nouns.length)] + separateWith + Math.floor(Math.random() * 10000);\n        };\n\n        getUser = function (...args) {\n            let options;\n\n            // If first argument is an object, it's the options\n            if ( typeof args[0] === 'object' && args[0] !== null ) {\n                options = args[0];\n            } else {\n                // Otherwise, we assume separate arguments are provided\n                options = {\n                    success: args[0],\n                    error: args[1],\n                };\n            }\n\n            return new Promise((resolve, reject) => {\n                const xhr = utils.initXhr('/whoami', this.APIOrigin, this.authToken, 'get');\n                // set up event handlers for load and error events\n                utils.setupXhrEventHandlers(xhr, options.success, options.error, resolve, reject);\n\n                xhr.send();\n            });\n        };\n\n        print = function (...args) {\n            // Check if the last argument is an options object with escapeHTML or code property\n            let options = {};\n            if ( args.length > 0 && typeof args[args.length - 1] === 'object' && args[args.length - 1] !== null &&\n                ('escapeHTML' in args[args.length - 1] || 'code' in args[args.length - 1]) ) {\n                options = args.pop();\n            }\n\n            for ( let arg of args ) {\n                // Escape HTML if the option is set to true or if code option is true\n                if ( (options.escapeHTML === true || options.code === true) && typeof arg === 'string' ) {\n                    arg = arg.replace(/&/g, '&amp;')\n                        .replace(/</g, '&lt;')\n                        .replace(/>/g, '&gt;')\n                        .replace(/\"/g, '&quot;')\n                        .replace(/'/g, '&#039;');\n                }\n\n                // Wrap in code/pre tags if code option is true\n                if ( options.code === true ) {\n                    arg = `<code><pre>${arg}</pre></code>`;\n                }\n\n                document.body.innerHTML += arg;\n            }\n        };\n\n        /**\n         * Configures API call logging settings\n         * @param {Object} config - Configuration options for API call logging\n         * @param {boolean} config.enabled - Enable/disable API call logging\n          * @param {boolean} config.enabled - Enable/disable API call logging\n         */\n        configureAPILogging = function (config = {}) {\n            if ( this.apiCallLogger ) {\n                this.apiCallLogger.updateConfig(config);\n            }\n            return this;\n        };\n\n        /**\n         * Enables API call logging with optional configuration\n         * @param {Object} config - Optional configuration to apply when enabling\n         */\n        enableAPILogging = function (config = {}) {\n            if ( this.apiCallLogger ) {\n                this.apiCallLogger.updateConfig({ ...config, enabled: true });\n            }\n            return this;\n        };\n\n        /**\n         * Disables API call logging\n         */\n        disableAPILogging = function () {\n            if ( this.apiCallLogger ) {\n                this.apiCallLogger.disable();\n            }\n            return this;\n        };\n\n        /**\n         * Initializes network connectivity monitoring to purge cache when connection is lost\n         * @private\n         */\n        initNetworkMonitoring = function () {\n            // Only initialize in environments that support navigator.onLine and window events\n            if ( typeof globalThis.navigator === 'undefined' ||\n                typeof globalThis.addEventListener !== 'function' ) {\n                return;\n            }\n\n            // Track previous online state\n            let wasOnline = navigator.onLine;\n\n            // Function to handle network state changes\n            const handleNetworkChange = () => {\n                const isOnline = navigator.onLine;\n\n                // If we went from online to offline, purge the cache\n                if ( wasOnline && !isOnline ) {\n                    console.log('Network connection lost - purging cache');\n                    try {\n                        this._cache.flushall();\n                        console.log('Cache purged successfully');\n                    } catch ( error ) {\n                        console.error('Error purging cache:', error);\n                    }\n                }\n\n                // Update the previous state\n                wasOnline = isOnline;\n            };\n\n            // Listen for online/offline events\n            globalThis.addEventListener('online', handleNetworkChange);\n            globalThis.addEventListener('offline', handleNetworkChange);\n\n            // Also listen for visibility change as an additional indicator\n            // (some browsers don't fire offline events reliably)\n            if ( typeof document !== 'undefined' ) {\n                document.addEventListener('visibilitychange', () => {\n                    // Small delay to allow network state to update\n                    setTimeout(handleNetworkChange, 100);\n                });\n            }\n        };\n\n        /**\n         * Checks and updates the GUI FS cache for most-commonly used paths\n         * @private\n         */\n        checkAndUpdateGUIFScache = function () {\n            // only run in gui environment\n            if ( puter.env !== 'gui' ) return;\n            // only run if user is authenticated\n            if ( ! puter.whoami ) return;\n\n            let username = puter.whoami.username;\n\n            // common paths\n            let home_path = `/${username}`;\n            let desktop_path = `/${username}/Desktop`;\n            let documents_path = `/${username}/Documents`;\n            let public_path = `/${username}/Public`;\n\n            // item:Home\n            if ( ! puter._cache.get(`item:${ home_path}`) ) {\n                console.log(`/${username} item is not cached, refetching cache`);\n                // fetch home\n                puter.fs.stat(home_path);\n            }\n            // item:Desktop\n            if ( ! puter._cache.get(`item:${ desktop_path}`) ) {\n                console.log(`/${username}/Desktop item is not cached, refetching cache`);\n                // fetch desktop\n                puter.fs.stat(desktop_path);\n            }\n            // item:Documents\n            if ( ! puter._cache.get(`item:${ documents_path}`) ) {\n                console.log(`/${username}/Documents item is not cached, refetching cache`);\n                // fetch documents\n                puter.fs.stat(documents_path);\n            }\n            // item:Public\n            if ( ! puter._cache.get(`item:${ public_path}`) ) {\n                console.log(`/${username}/Public item is not cached, refetching cache`);\n                // fetch public\n                puter.fs.stat(public_path);\n            }\n\n            // readdir:Home\n            if ( ! puter._cache.get(`readdir:${ home_path}`) ) {\n                console.log(`/${username} is not cached, refetching cache`);\n                // fetch home\n                puter.fs.readdir(home_path);\n            }\n            // readdir:Desktop\n            if ( ! puter._cache.get(`readdir:${ desktop_path}`) ) {\n                console.log(`/${username}/Desktop is not cached, refetching cache`);\n                // fetch desktop\n                puter.fs.readdir(desktop_path);\n            }\n            // readdir:Documents\n            if ( ! puter._cache.get(`readdir:${ documents_path}`) ) {\n                console.log(`/${username}/Documents is not cached, refetching cache`);\n                // fetch documents\n                puter.fs.readdir(documents_path);\n            }\n            // readdir:Public\n            if ( ! puter._cache.get(`readdir:${ public_path}`) ) {\n                console.log(`/${username}/Public is not cached, refetching cache`);\n                // fetch public\n                puter.fs.readdir(public_path);\n            }\n        };\n    }\n\n    // Create a new Puter object and return it\n    const puterobj = new Puter();\n\n    // Return the Puter object\n    return puterobj;\n});\n\nexport const puter =  puterInit();\nexport default puter;\nglobalThis.puter = puter;\n\nputer.tools = [];\n/**\n * @type {{messageTarget: Window}}\n */\nconst puterParent = puter.ui.parentApp();\nglobalThis.puterParent = puterParent;\nif ( puterParent ) {\n    console.log('I have a parent, registering tools');\n    puterParent.on('message', async (event) => {\n        console.log('Got tool req ', event);\n        if ( event.$ === 'requestTools' ) {\n            console.log('Responding with tools');\n            puterParent.postMessage({\n                $: 'providedTools',\n                tools: JSON.parse(JSON.stringify(puter.tools)),\n            });\n        }\n\n        if ( event.$ === 'executeTool' ) {\n            console.log('xecuting tools');\n            /**\n             * Puter tools format\n             * @type {[{exec: Function, function: {description: string, name: string, parameters: {properties: any, required: Array<string>}, type: string}}]}\n             */\n            const [tool] = puter.tools.filter(e => e.function.name === event.toolName);\n\n            const response = await tool.exec(event.parameters);\n            puterParent.postMessage({\n                $: 'toolResponse',\n                response,\n                tag: event.tag,\n            });\n        }\n    });\n    puterParent.postMessage({ $: 'ready' });\n}\n\nglobalThis.addEventListener && globalThis.addEventListener('message', async (event) => {\n    // if the message is not from Puter, then ignore it\n    if ( event.origin !== puter.defaultGUIOrigin ) return;\n\n    if ( event.data.msg && event.data.msg === 'requestOrigin' ) {\n        event.source.postMessage({\n            msg: 'originResponse',\n        }, '*');\n    }\n    else if ( event.data.msg === 'puter.token' ) {\n        // puterDialog.close();\n        // Set the authToken property\n        puter.setAuthToken(event.data.token);\n        // update appID\n        puter.setAppID(event.data.app_uid);\n        // Remove the event listener to avoid memory leaks\n        // window.removeEventListener('message', messageListener);\n\n        puter.puterAuthState.authGranted = true;\n        // Resolve the promise\n        // resolve();\n\n        // Call onAuth callback\n        if ( puter.onAuth && typeof puter.onAuth === 'function' ) {\n            puter.getUser().then((user) => {\n                puter.onAuth(user);\n            });\n        }\n\n        puter.puterAuthState.isPromptOpen = false;\n        // Resolve or reject any waiting promises.\n        if ( puter.puterAuthState.resolver ) {\n            if ( puter.puterAuthState.authGranted ) {\n                puter.puterAuthState.resolver.resolve();\n            } else {\n                puter.puterAuthState.resolver.reject();\n            }\n            puter.puterAuthState.resolver = null;\n        };\n    }\n});", "/*\n * Copyright (C) 2024-present Puter Technologies Inc.\n *\n * This file is part of Puter.\n *\n * Puter is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published\n * by the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\n/**\n * APICallLogger provides centralized logging for all API calls made by the puter-js SDK.\n * It logs API calls in a simple format: service - operation - params - result\n */\nclass APICallLogger {\n    constructor (config = {}) {\n        this.config = {\n            enabled: config.enabled ?? false,\n            ...config,\n        };\n    }\n\n    /**\n     * Updates the logger configuration\n     * @param {Object} newConfig - New configuration options\n     */\n    updateConfig (newConfig) {\n        this.config = { ...this.config, ...newConfig };\n    }\n\n    /**\n     * Enables API call logging\n     */\n    enable () {\n        this.config.enabled = true;\n    }\n\n    /**\n     * Disables API call logging\n     */\n    disable () {\n        this.config.enabled = false;\n    }\n\n    /**\n     * Checks if logging is enabled for the current configuration\n     * @returns {boolean}\n     */\n    isEnabled () {\n        return this.config.enabled;\n    }\n\n    /**\n     * Logs the completion of an API request in a simple format\n     * @param {Object} options - Request completion options\n     */\n    logRequest (options = {}) {\n        if ( ! this.isEnabled() ) return;\n\n        const {\n            service = 'unknown',\n            operation = 'unknown',\n            params = {},\n            result = null,\n            error = null,\n        } = options;\n\n        // Format params as a readable string\n        let paramsStr = '{}';\n        if ( params && Object.keys(params).length > 0 ) {\n            try {\n                paramsStr = JSON.stringify(params);\n            } catch (e) {\n                paramsStr = '[Unable to serialize params]';\n            }\n        }\n\n        // Format the log message with bold params\n        const logMessage = `${service} - ${operation} - \\x1b[1m${paramsStr}\\x1b[22m`;\n\n        if ( error ) {\n            console.error(logMessage, { error: error.message || error, result });\n        } else {\n            console.log(logMessage, result);\n        }\n    }\n\n    /**\n     * Gets current logging statistics\n     * @returns {Object}\n     */\n    getStats () {\n        return {\n            enabled: this.config.enabled,\n            config: { ...this.config },\n        };\n    }\n}\n\nexport default APICallLogger;", "// import {cwd} from './env.js'\nlet cwd;\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n//'use strict';\n\nconst\n    CHAR_UPPERCASE_A = 65,\n    CHAR_LOWERCASE_A = 97,\n    CHAR_UPPERCASE_Z = 90,\n    CHAR_LOWERCASE_Z = 122,\n    CHAR_DOT = 46,\n    CHAR_FORWARD_SLASH = 47,\n    CHAR_BACKWARD_SLASH = 92,\n    CHAR_COLON = 58,\n    CHAR_QUESTION_MARK = 63;\n\nfunction isPathSeparator (code) {\n    return code === CHAR_FORWARD_SLASH || code === CHAR_BACKWARD_SLASH;\n}\n\nfunction isPosixPathSeparator (code) {\n    return code === CHAR_FORWARD_SLASH;\n}\n\n// Resolves . and .. elements in a path with directory names\nfunction normalizeString (path, allowAboveRoot, separator, isPathSeparator) {\n    let res = '';\n    let lastSegmentLength = 0;\n    let lastSlash = -1;\n    let dots = 0;\n    let code = 0;\n    for ( let i = 0; i <= path.length; ++i ) {\n        if ( i < path.length )\n        {\n            code = path.charCodeAt(i);\n        }\n        else if ( isPathSeparator(code) )\n        {\n            break;\n        }\n        else\n        {\n            code = CHAR_FORWARD_SLASH;\n        }\n\n        if ( isPathSeparator(code) ) {\n            if ( lastSlash === i - 1 || dots === 1 ) {\n                // NOOP\n            } else if ( dots === 2 ) {\n                if ( res.length < 2 || lastSegmentLength !== 2 ||\n                    res.charCodeAt(res.length - 1) !== CHAR_DOT ||\n                    res.charCodeAt(res.length - 2) !== CHAR_DOT ) {\n                    if ( res.length > 2 ) {\n                        const lastSlashIndex = res.lastIndexOf(separator);\n                        if ( lastSlashIndex === -1 ) {\n                            res = '';\n                            lastSegmentLength = 0;\n                        } else {\n                            res = res.slice(0, lastSlashIndex);\n                            lastSegmentLength =\n                                res.length - 1 - res.lastIndexOf(res, separator);\n                        }\n                        lastSlash = i;\n                        dots = 0;\n                        continue;\n                    } else if ( res.length !== 0 ) {\n                        res = '';\n                        lastSegmentLength = 0;\n                        lastSlash = i;\n                        dots = 0;\n                        continue;\n                    }\n                }\n                if ( allowAboveRoot ) {\n                    res += res.length > 0 ? `${separator}..` : '..';\n                    lastSegmentLength = 2;\n                }\n            } else {\n                if ( res.length > 0 )\n                {\n                    res += `${separator}${path.slice(lastSlash + 1, i)}`;\n                }\n                else\n                {\n                    res = path.slice(lastSlash + 1, i);\n                }\n                lastSegmentLength = i - lastSlash - 1;\n            }\n            lastSlash = i;\n            dots = 0;\n        } else if ( code === CHAR_DOT && dots !== -1 ) {\n            ++dots;\n        } else {\n            dots = -1;\n        }\n    }\n    return res;\n}\n\nconst path = {\n    // path.resolve([from ...], to)\n    resolve (...args) {\n        let resolvedPath = '';\n        let resolvedAbsolute = false;\n\n        for ( let i = args.length - 1; i >= -1 && !resolvedAbsolute; i-- ) {\n        // orig const path = i >= 0 ? args[i] : posixCwd();\n            const path = i >= 0 ? args[i] : (cwd !== undefined ? cwd : '/');\n            // const path = i >= 0 ? args[i] : '/';\n\n            // Skip empty entries\n            if ( path.length === 0 ) {\n                continue;\n            }\n\n            resolvedPath = `${path}/${resolvedPath}`;\n            resolvedAbsolute =\n                path.charCodeAt(0) === CHAR_FORWARD_SLASH;\n        }\n\n        // At this point the path should be resolved to a full absolute path, but\n        // handle relative paths to be safe (might happen when process.cwd() fails)\n\n        // Normalize the path\n        resolvedPath = normalizeString(resolvedPath, !resolvedAbsolute, '/', isPosixPathSeparator);\n\n        if ( resolvedAbsolute ) {\n            return `/${resolvedPath}`;\n        }\n        return resolvedPath.length > 0 ? resolvedPath : '.';\n    },\n\n    normalize (path) {\n        if ( path.length === 0 )\n        {\n            return '.';\n        }\n\n        const isAbsolute =\n            path.charCodeAt(0) === CHAR_FORWARD_SLASH;\n        const trailingSeparator =\n            path.charCodeAt(path.length - 1) === CHAR_FORWARD_SLASH;\n\n        // Normalize the path\n        path = normalizeString(path, !isAbsolute, '/', isPosixPathSeparator);\n\n        if ( path.length === 0 ) {\n            if ( isAbsolute )\n            {\n                return '/';\n            }\n            return trailingSeparator ? './' : '.';\n        }\n        if ( trailingSeparator )\n        {\n            path += '/';\n        }\n\n        return isAbsolute ? `/${path}` : path;\n    },\n\n    isAbsolute (path) {\n        return path.length > 0 &&\n            path.charCodeAt(0) === CHAR_FORWARD_SLASH;\n    },\n\n    join (...args) {\n        if ( args.length === 0 )\n        {\n            return '.';\n        }\n        let joined;\n        for ( let i = 0; i < args.length; ++i ) {\n            const arg = args[i];\n            if ( arg.length > 0 ) {\n                if ( joined === undefined )\n                {\n                    joined = arg;\n                }\n                else\n                {\n                    joined += `/${arg}`;\n                }\n            }\n        }\n        if ( joined === undefined )\n        {\n            return '.';\n        }\n        return path.normalize(joined);\n    },\n\n    relative (from, to) {\n        if ( from === to )\n        {\n            return '';\n        }\n\n        // Trim leading forward slashes.\n        from = path.resolve(from);\n        to = path.resolve(to);\n\n        if ( from === to )\n        {\n            return '';\n        }\n\n        const fromStart = 1;\n        const fromEnd = from.length;\n        const fromLen = fromEnd - fromStart;\n        const toStart = 1;\n        const toLen = to.length - toStart;\n\n        // Compare paths to find the longest common path from root\n        const length = (fromLen < toLen ? fromLen : toLen);\n        let lastCommonSep = -1;\n        let i = 0;\n        for ( ; i < length; i++ ) {\n            const fromCode = from.charCodeAt(fromStart + i);\n            if ( fromCode !== to.charCodeAt(toStart + i) )\n            {\n                break;\n            }\n            else if ( fromCode === CHAR_FORWARD_SLASH )\n            {\n                lastCommonSep = i;\n            }\n        }\n        if ( i === length ) {\n            if ( toLen > length ) {\n                if ( to.charCodeAt(toStart + i) === CHAR_FORWARD_SLASH ) {\n                    // We get here if `from` is the exact base path for `to`.\n                    // For example: from='/foo/bar'; to='/foo/bar/baz'\n                    return to.slice(toStart + i + 1);\n                }\n                if ( i === 0 ) {\n                    // We get here if `from` is the root\n                    // For example: from='/'; to='/foo'\n                    return to.slice(toStart + i);\n                }\n            } else if ( fromLen > length ) {\n                if ( from.charCodeAt(fromStart + i) ===\n                    CHAR_FORWARD_SLASH ) {\n                    // We get here if `to` is the exact base path for `from`.\n                    // For example: from='/foo/bar/baz'; to='/foo/bar'\n                    lastCommonSep = i;\n                } else if ( i === 0 ) {\n                    // We get here if `to` is the root.\n                    // For example: from='/foo/bar'; to='/'\n                    lastCommonSep = 0;\n                }\n            }\n        }\n\n        let out = '';\n        // Generate the relative path based on the path difference between `to`\n        // and `from`.\n        for ( i = fromStart + lastCommonSep + 1; i <= fromEnd; ++i ) {\n            if ( i === fromEnd ||\n                from.charCodeAt(i) === CHAR_FORWARD_SLASH ) {\n                out += out.length === 0 ? '..' : '/..';\n            }\n        }\n\n        // Lastly, append the rest of the destination (`to`) path that comes after\n        // the common path parts.\n        return `${out}${to.slice(toStart + lastCommonSep)}`;\n    },\n\n    toNamespacedPath (path) {\n        // Non-op on posix systems\n        return path;\n    },\n\n    dirname (path) {\n        if ( path.length === 0 )\n        {\n            return '.';\n        }\n        const hasRoot = path.charCodeAt(0) === CHAR_FORWARD_SLASH;\n        let end = -1;\n        let matchedSlash = true;\n        for ( let i = path.length - 1; i >= 1; --i ) {\n            if ( path.charCodeAt(i) === CHAR_FORWARD_SLASH ) {\n                if ( ! matchedSlash ) {\n                    end = i;\n                    break;\n                }\n            } else {\n                // We saw the first non-path separator\n                matchedSlash = false;\n            }\n        }\n\n        if ( end === -1 )\n        {\n            return hasRoot ? '/' : '.';\n        }\n        if ( hasRoot && end === 1 )\n        {\n            return '//';\n        }\n        return path.slice(0, end);\n    },\n\n    basename (path, ext) {\n        let start = 0;\n        let end = -1;\n        let matchedSlash = true;\n\n        if ( ext !== undefined && ext.length > 0 && ext.length <= path.length ) {\n            if ( ext === path )\n            {\n                return '';\n            }\n            let extIdx = ext.length - 1;\n            let firstNonSlashEnd = -1;\n            for ( let i = path.length - 1; i >= 0; --i ) {\n                const code = path.charCodeAt(i);\n                if ( code === CHAR_FORWARD_SLASH ) {\n                    // If we reached a path separator that was not part of a set of path\n                    // separators at the end of the string, stop now\n                    if ( ! matchedSlash ) {\n                        start = i + 1;\n                        break;\n                    }\n                } else {\n                    if ( firstNonSlashEnd === -1 ) {\n                        // We saw the first non-path separator, remember this index in case\n                        // we need it if the extension ends up not matching\n                        matchedSlash = false;\n                        firstNonSlashEnd = i + 1;\n                    }\n                    if ( extIdx >= 0 ) {\n                        // Try to match the explicit extension\n                        if ( code === ext.charCodeAt(extIdx) ) {\n                            if ( --extIdx === -1 ) {\n                                // We matched the extension, so mark this as the end of our path\n                                // component\n                                end = i;\n                            }\n                        } else {\n                            // Extension does not match, so our result is the entire path\n                            // component\n                            extIdx = -1;\n                            end = firstNonSlashEnd;\n                        }\n                    }\n                }\n            }\n\n            if ( start === end )\n            {\n                end = firstNonSlashEnd;\n            }\n            else if ( end === -1 )\n            {\n                end = path.length;\n            }\n            return path.slice(start, end);\n        }\n        for ( let i = path.length - 1; i >= 0; --i ) {\n            if ( path.charCodeAt(i) === CHAR_FORWARD_SLASH ) {\n                // If we reached a path separator that was not part of a set of path\n                // separators at the end of the string, stop now\n                if ( ! matchedSlash ) {\n                    start = i + 1;\n                    break;\n                }\n            } else if ( end === -1 ) {\n                // We saw the first non-path separator, mark this as the end of our\n                // path component\n                matchedSlash = false;\n                end = i + 1;\n            }\n        }\n\n        if ( end === -1 )\n        {\n            return '';\n        }\n        return path.slice(start, end);\n    },\n\n    extname (path) {\n        let startDot = -1;\n        let startPart = 0;\n        let end = -1;\n        let matchedSlash = true;\n        // Track the state of characters (if any) we see before our first dot and\n        // after any path separator we find\n        let preDotState = 0;\n        for ( let i = path.length - 1; i >= 0; --i ) {\n            const code = path.charCodeAt(i);\n            if ( code === CHAR_FORWARD_SLASH ) {\n                // If we reached a path separator that was not part of a set of path\n                // separators at the end of the string, stop now\n                if ( ! matchedSlash ) {\n                    startPart = i + 1;\n                    break;\n                }\n                continue;\n            }\n            if ( end === -1 ) {\n                // We saw the first non-path separator, mark this as the end of our\n                // extension\n                matchedSlash = false;\n                end = i + 1;\n            }\n            if ( code === CHAR_DOT ) {\n                // If this is our first dot, mark it as the start of our extension\n                if ( startDot === -1 )\n                {\n                    startDot = i;\n                }\n                else if ( preDotState !== 1 )\n                {\n                    preDotState = 1;\n                }\n            } else if ( startDot !== -1 ) {\n                // We saw a non-dot and non-path separator before our dot, so we should\n                // have a good chance at having a non-empty extension\n                preDotState = -1;\n            }\n        }\n\n        if ( startDot === -1 ||\n            end === -1 ||\n        // We saw a non-dot character immediately before the dot\n            preDotState === 0 ||\n        // The (right-most) trimmed path component is exactly '..'\n            (preDotState === 1 &&\n                startDot === end - 1 &&\n                startDot === startPart + 1) ) {\n            return '';\n        }\n        return path.slice(startDot, end);\n    },\n\n    format: _format.bind(null, '/'),\n\n    parse (path) {\n        const ret = { root: '', dir: '', base: '', ext: '', name: '' };\n        if ( path.length === 0 )\n        {\n            return ret;\n        }\n        const isAbsolute =\n            path.charCodeAt(0) === CHAR_FORWARD_SLASH;\n        let start;\n        if ( isAbsolute ) {\n            ret.root = '/';\n            start = 1;\n        } else {\n            start = 0;\n        }\n        let startDot = -1;\n        let startPart = 0;\n        let end = -1;\n        let matchedSlash = true;\n        let i = path.length - 1;\n\n        // Track the state of characters (if any) we see before our first dot and\n        // after any path separator we find\n        let preDotState = 0;\n\n        // Get non-dir info\n        for ( ; i >= start; --i ) {\n            const code = path.charCodeAt(i);\n            if ( code === CHAR_FORWARD_SLASH ) {\n                // If we reached a path separator that was not part of a set of path\n                // separators at the end of the string, stop now\n                if ( ! matchedSlash ) {\n                    startPart = i + 1;\n                    break;\n                }\n                continue;\n            }\n            if ( end === -1 ) {\n                // We saw the first non-path separator, mark this as the end of our\n                // extension\n                matchedSlash = false;\n                end = i + 1;\n            }\n            if ( code === CHAR_DOT ) {\n                // If this is our first dot, mark it as the start of our extension\n                if ( startDot === -1 )\n                {\n                    startDot = i;\n                }\n                else if ( preDotState !== 1 )\n                {\n                    preDotState = 1;\n                }\n            } else if ( startDot !== -1 ) {\n                // We saw a non-dot and non-path separator before our dot, so we should\n                // have a good chance at having a non-empty extension\n                preDotState = -1;\n            }\n        }\n\n        if ( end !== -1 ) {\n            const start = startPart === 0 && isAbsolute ? 1 : startPart;\n            if ( startDot === -1 ||\n            // We saw a non-dot character immediately before the dot\n                preDotState === 0 ||\n            // The (right-most) trimmed path component is exactly '..'\n                (preDotState === 1 &&\n                    startDot === end - 1 &&\n                    startDot === startPart + 1) ) {\n                ret.base = ret.name = path.slice(start, end);\n            } else {\n                ret.name = path.slice(start, startDot);\n                ret.base = path.slice(start, end);\n                ret.ext = path.slice(startDot, end);\n            }\n        }\n\n        if ( startPart > 0 )\n        {\n            ret.dir = path.slice(0, startPart - 1);\n        }\n        else if ( isAbsolute )\n        {\n            ret.dir = '/';\n        }\n\n        return ret;\n    },\n\n    sep: '/',\n    delimiter: ':',\n    win32: null,\n    posix: null,\n};\n\nfunction _format (sep, pathObject) {\n    validateObject(pathObject, 'pathObject');\n    const dir = pathObject.dir || pathObject.root;\n    const base = pathObject.base ||\n        `${pathObject.name || ''}${pathObject.ext || ''}`;\n    if ( ! dir ) {\n        return base;\n    }\n    return dir === pathObject.root ? `${dir}${base}` : `${dir}${sep}${base}`;\n}\n\nexport default path;", "// https://github.com/gr2m/localstorage-memory under MIT\n\nconst root = {};\nvar localStorageMemory = {};\nvar cache = {};\n\n/**\n * number of stored items.\n */\nlocalStorageMemory.length = 0;\n\n/**\n * returns item for passed key, or null\n *\n * @para {String} key\n *       name of item to be returned\n * @returns {String|null}\n */\nlocalStorageMemory.getItem = function (key) {\n    if ( key in cache ) {\n        return cache[key];\n    }\n\n    return null;\n};\n\n/**\n * sets item for key to passed value, as String\n *\n * @para {String} key\n *       name of item to be set\n * @para {String} value\n *       value, will always be turned into a String\n * @returns {undefined}\n */\nlocalStorageMemory.setItem = function (key, value) {\n    if ( typeof value === 'undefined' ) {\n        localStorageMemory.removeItem(key);\n    } else {\n        if ( ! (cache.hasOwnProperty(key)) ) {\n            localStorageMemory.length++;\n        }\n\n        cache[key] = `${ value}`;\n    }\n};\n\n/**\n * removes item for passed key\n *\n * @para {String} key\n *       name of item to be removed\n * @returns {undefined}\n */\nlocalStorageMemory.removeItem = function (key) {\n    if ( cache.hasOwnProperty(key) ) {\n        delete cache[key];\n        localStorageMemory.length--;\n    }\n};\n\n/**\n * returns name of key at passed index\n *\n * @para {Number} index\n *       Position for key to be returned (starts at 0)\n * @returns {String|null}\n */\nlocalStorageMemory.key = function (index) {\n    return Object.keys(cache)[index] || null;\n};\n\n/**\n * removes all stored items and sets length to 0\n *\n * @returns {undefined}\n */\nlocalStorageMemory.clear = function () {\n    cache = {};\n    localStorageMemory.length = 0;\n};\n\nif ( typeof exports === 'object' ) {\n    module.exports = localStorageMemory;\n} else {\n    root.localStorage = localStorageMemory;\n}\n\nexport default localStorageMemory;\n", "// Originally from https://www.npmjs.com/package/xhr-shim under MIT, heavily modified since\n\n/* global module */\n/* global EventTarget, AbortController, DOMException */\n\nconst sReadyState = Symbol('readyState');\nconst sHeaders = Symbol('headers');\nconst sRespHeaders = Symbol('response headers');\nconst sAbortController = Symbol('AbortController');\nconst sMethod = Symbol('method');\nconst sURL = Symbol('URL');\nconst sMIME = Symbol('MIME');\nconst sDispatch = Symbol('dispatch');\nconst sErrored = Symbol('errored');\nconst sTimeout = Symbol('timeout');\nconst sTimedOut = Symbol('timedOut');\nconst sIsResponseText = Symbol('isResponseText');\n\n// SO: https://stackoverflow.com/questions/49129643/how-do-i-merge-an-array-of-uint8arrays\nfunction mergeUint8Arrays (...arrays) {\n    const totalSize = arrays.reduce((acc, e) => acc + e.length, 0);\n    const merged = new Uint8Array(totalSize);\n\n    arrays.forEach((array, i, arrays) => {\n        const offset = arrays.slice(0, i).reduce((acc, e) => acc + e.length, 0);\n        merged.set(array, offset);\n    });\n\n    return merged;\n}\n\n/**\n * Exposes incoming data\n * @this {XMLHttpRequest}\n * @param {Uint8Array} bytes\n */\nasync function parseBody (bytes) {\n    const responseType = this.responseType || 'text';\n    const textde = new TextDecoder();\n    const finalMIME = this[sMIME] || this[sRespHeaders].get('content-type') || 'text/plain';\n    switch ( responseType ) {\n    case 'text':\n        this.response = textde.decode(bytes);\n        break;\n    case 'blob':\n        this.response = new Blob([bytes], { type: finalMIME });\n        break;\n    case 'arraybuffer':\n        this.response = bytes.buffer;\n        break;\n    case 'json':\n        this.response = JSON.parse(textde.decode(bytes));\n        break;\n    }\n}\n\nconst XMLHttpRequestShim = class XMLHttpRequest extends EventTarget {\n    onreadystatechange () {\n\n    }\n\n    set readyState (value) {\n        if ( this[sReadyState] === value ) return; // dont do anything if \"value\" is already the internal value\n        this[sReadyState] = value;\n        this.dispatchEvent(new Event('readystatechange'));\n        this.onreadystatechange(new Event('readystatechange'));\n\n    }\n    get readyState () {\n        return this[sReadyState];\n    }\n\n    constructor () {\n        super();\n        this.readyState = this.constructor.UNSENT;\n        this.response = null;\n        this.responseType = '';\n        this.responseURL = '';\n        this.status = 0;\n        this.statusText = '';\n        this.timeout = 0;\n        this.withCredentials = false;\n        this[sHeaders] = Object.create(null);\n        this[sHeaders].accept = '*/*';\n        this[sRespHeaders] = Object.create(null);\n        this[sAbortController] = new AbortController();\n        this[sMethod] = '';\n        this[sURL] = '';\n        this[sMIME] = '';\n        this[sErrored] = false;\n        this[sTimeout] = 0;\n        this[sTimedOut] = false;\n        this[sIsResponseText] = true;\n    }\n    static get UNSENT () {\n        return 0;\n    }\n    static get OPENED () {\n        return 1;\n    }\n    static get HEADERS_RECEIVED () {\n        return 2;\n    }\n    static get LOADING () {\n        return 3;\n    }\n    static get DONE () {\n        return 4;\n    }\n    upload = {\n        addEventListener () {\n            // stub, doesn't do anything since its not possible to monitor with fetch and http/1.1\n        },\n    };\n    get responseText () {\n        if ( this[sErrored] ) return null;\n        if ( this.readyState < this.constructor.HEADERS_RECEIVED ) return '';\n        if ( this[sIsResponseText] ) return this.response;\n        throw new DOMException('Response type not set to text', 'InvalidStateError');\n    }\n    get responseXML () {\n        throw new Error('XML not supported');\n    }\n    [sDispatch] (evt) {\n        const attr = `on${evt.type}`;\n        if ( typeof this[attr] === 'function' ) {\n            this.addEventListener(evt.type, this[attr].bind(this), {\n                once: true,\n            });\n        }\n        this.dispatchEvent(evt);\n    }\n    abort () {\n        this[sAbortController].abort();\n        this.status = 0;\n        this.readyState = this.constructor.UNSENT;\n    }\n    open (method, url) {\n        this.status = 0;\n        this[sMethod] = method;\n        this[sURL] = url;\n        this.readyState = this.constructor.OPENED;\n    }\n    setRequestHeader (header, value) {\n        header = String(header).toLowerCase();\n        if ( typeof this[sHeaders][header] === 'undefined' ) {\n            this[sHeaders][header] = String(value);\n        } else {\n            this[sHeaders][header] += `, ${value}`;\n        }\n    }\n    overrideMimeType (mimeType) {\n        this[sMIME] = String(mimeType);\n    }\n    getAllResponseHeaders () {\n        if ( this[sErrored] || this.readyState < this.constructor.HEADERS_RECEIVED ) return '';\n        return Array.from(this[sRespHeaders].entries().map(([header, value]) => `${header}: ${value}`)).join('\\r\\n');\n    }\n    getResponseHeader (headerName) {\n        const value = this[sRespHeaders].get(String(headerName).toLowerCase());\n        return typeof value === 'string' ? value : null;\n    }\n    send (body = null) {\n        if ( this.timeout > 0 ) {\n            this[sTimeout] = setTimeout(() => {\n                this[sTimedOut] = true;\n                this[sAbortController].abort();\n            }, this.timeout);\n        }\n        const responseType = this.responseType || 'text';\n        this[sIsResponseText] = responseType === 'text';\n\n        this.setRequestHeader('user-agent', 'puter-js/1.0');\n        this.setRequestHeader('origin', 'https://puter.work');\n        this.setRequestHeader('referer', 'https://puter.work/');\n\n        fetch(this[sURL], {\n            method: this[sMethod] || 'GET',\n            signal: this[sAbortController].signal,\n            headers: this[sHeaders],\n            credentials: this.withCredentials ? 'include' : 'same-origin',\n            body,\n        }).then(async resp => {\n            this.responseURL = resp.url;\n            this.status = resp.status;\n            this.statusText = resp.statusText;\n            this[sRespHeaders] = resp.headers;\n            this.readyState = this.constructor.HEADERS_RECEIVED;\n\n            if ( resp.headers.get('content-type').includes('application/x-ndjson') || this.streamRequestBadForPerformance ) {\n                let bytes = new Uint8Array();\n                for await ( const chunk of resp.body ) {\n                    this.readyState = this.constructor.LOADING;\n\n                    bytes = mergeUint8Arrays(bytes, chunk);\n                    parseBody.call(this, bytes);\n                    this[sDispatch](new CustomEvent('progress'));\n                }\n            } else {\n                const bytesChunks = [];\n                for await ( const chunk of resp.body ) {\n                    bytesChunks.push(chunk);\n                }\n                parseBody.call(this, mergeUint8Arrays(...bytesChunks));\n            }\n\n            this.readyState = this.constructor.DONE;\n            this[sDispatch](new CustomEvent('load'));\n        }, err => {\n            let eventName = 'abort';\n            if ( err.name !== 'AbortError' ) {\n                this[sErrored] = true;\n                eventName = 'error';\n            } else if ( this[sTimedOut] ) {\n                eventName = 'timeout';\n            }\n            this.readyState = this.constructor.DONE;\n            this[sDispatch](new CustomEvent(eventName));\n        }).finally(() => this[sDispatch](new CustomEvent('loadend'))).finally(() => {\n            clearTimeout(this[sTimeout]);\n            this[sDispatch](new CustomEvent('loadstart'));\n        });\n    }\n};\n\nif ( typeof module === 'object' && module.exports ) {\n    module.exports = XMLHttpRequestShim;\n} else {\n    (globalThis || self).XMLHttpRequestShim = XMLHttpRequestShim;\n}\n\nexport default XMLHttpRequestShim;", "function toBase64FromBuffer(buffer) {\n    const bytes = new Uint8Array(buffer);\n    // use the requested reduce logic\n    const binary = bytes.reduce((data, byte) => data + String.fromCharCode(byte), '');\n    return typeof btoa === 'function' ? btoa(binary) : Buffer.from(binary, 'binary').toString('base64');\n}\n\nexport class FileReaderPoly {\n    constructor() {\n        this.result = null;\n        this.error = null;\n        this.onloadend = null;\n    }\n    readAsDataURL(blob) {\n        const self = this;\n        (async function () {\n            try {\n                let buffer;\n                if (blob && typeof blob.arrayBuffer === 'function') {\n                    buffer = await blob.arrayBuffer();\n                } else if (blob instanceof ArrayBuffer) {\n                    buffer = blob;\n                } else if (ArrayBuffer.isView(blob)) {\n                    buffer = blob.buffer;\n                } else {\n                    buffer = new Uint8Array(0).buffer;\n                }\n\n                const base64 = toBase64FromBuffer(buffer);\n                const mime = (blob && blob.type) || 'application/octet-stream';\n                self.result = 'data:' + mime + ';base64,' + base64;\n                if (typeof self.onloadend === 'function') self.onloadend();\n            } catch (err) {\n                self.error = err;\n                if (typeof self.onloadend === 'function') self.onloadend();\n            }\n        })();\n    }\n}\n\n", "import { FileReaderPoly } from \"./polyfills/fileReaderPoly.js\";\n\n/**\n * Parses a given response text into a JSON object. If the parsing fails due to invalid JSON format,\n * the original response text is returned.\n *\n * @param {string} responseText - The response text to be parsed into JSON. It is expected to be a valid JSON string.\n * @returns {Object|string} The parsed JSON object if the responseText is valid JSON, otherwise returns the original responseText.\n * @example\n * // returns { key: \"value\" }\n * parseResponse('{\"key\": \"value\"}');\n *\n * @example\n * // returns \"Invalid JSON\"\n * parseResponse('Invalid JSON');\n */\nasync function parseResponse (target) {\n    if ( target.responseType === 'blob' ) {\n        // Get content type of the blob\n        const contentType = target.getResponseHeader('content-type');\n        if ( contentType.startsWith('application/json') ) {\n            // If the blob is JSON, parse it\n            const text = await target.response.text();\n            try {\n                return JSON.parse(text);\n            } catch ( error ) {\n                return text;\n            }\n        } else if ( contentType.startsWith('application/octet-stream') ) {\n            // If the blob is an octet stream, return the blob\n            return target.response;\n        }\n\n        // Otherwise return an ojbect\n        return {\n            success: true,\n            result: target.response,\n        };\n    }\n    const responseText = target.responseText;\n    try {\n        return JSON.parse(responseText);\n    } catch ( error ) {\n        return responseText;\n    }\n}\n\n/**\n * A function that generates a UUID (Universally Unique Identifier) using the version 4 format,\n * which are random UUIDs. It uses the cryptographic number generator available in modern browsers.\n *\n * The generated UUID is a 36 character string (32 alphanumeric characters separated by 4 hyphens).\n * It follows the pattern: xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx, where x is any hexadecimal digit\n * and y is one of 8, 9, A, or B.\n *\n * @returns {string} Returns a new UUID v4 string.\n *\n * @example\n *\n * let id = this.#uuidv4(); // Generate a new UUID\n *\n */\nfunction uuidv4 () {\n    return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, c =>\n        (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16));\n}\n\n/**\n * Initializes and returns an XMLHttpRequest object configured for a specific API endpoint, method, and headers.\n *\n * @param {string} endpoint - The API endpoint to which the request will be sent. This is appended to the API origin URL.\n * @param {string} APIOrigin - The origin URL of the API. This is prepended to the endpoint.\n * @param {string} authToken - The authorization token used for accessing the API. This is included in the request headers.\n * @param {string} [method='post'] - The HTTP method to be used for the request. Defaults to 'post' if not specified.\n * @param {string} [contentType='application/json;charset=UTF-8'] - The content type of the request. Defaults to\n *                                                                  'application/json;charset=UTF-8' if not specified.\n *\n * @returns {XMLHttpRequest} The initialized XMLHttpRequest object.\n */\nfunction initXhr (endpoint, APIOrigin, authToken, method = 'post', contentType = 'text/plain;actually=json', responseType = undefined) {\n    const xhr = new XMLHttpRequest();\n    xhr.open(method, APIOrigin + endpoint, true);\n    if ( authToken )\n    {\n        xhr.setRequestHeader('Authorization', `Bearer ${ authToken}`);\n    }\n    xhr.setRequestHeader('Content-Type', contentType);\n    xhr.responseType = responseType ?? '';\n\n    // Add API call logging if available\n    if ( globalThis.puter?.apiCallLogger?.isEnabled() ) {\n        xhr._puterRequestId = {\n            method,\n            service: 'xhr',\n            operation: endpoint.replace(/^\\//, ''),\n            params: { endpoint, contentType, responseType },\n        };\n    }\n\n    return xhr;\n}\n\n/**\n * Handles an HTTP response by invoking appropriate callback functions and resolving or rejecting a promise.\n *\n * @param {Function} success_cb - An optional callback function for successful responses. It should take a response object\n *                                as its only argument.\n * @param {Function} error_cb - An optional callback function for error handling. It should take an error object\n *                              as its only argument.\n * @param {Function} resolve_func - A function used to resolve a promise. It should take a response object\n *                                  as its only argument.\n * @param {Function} reject_func - A function used to reject a promise. It should take an error object\n *                                 as its only argument.\n * @param {Object} response - The HTTP response object from the request. Expected to have 'status' and 'responseText'\n *                            properties.\n *\n * @returns {void} The function does not return a value but will either resolve or reject a promise based on the\n *                 response status.\n */\nasync function handle_resp (success_cb, error_cb, resolve_func, reject_func, response) {\n    const resp = await parseResponse(response);\n    // error - unauthorized\n    if ( response.status === 401 ) {\n        // if error callback is provided, call it\n        if ( error_cb && typeof error_cb === 'function' )\n        {\n            error_cb({ status: 401, message: 'Unauthorized' });\n        }\n        // reject promise\n        return reject_func({ status: 401, message: 'Unauthorized' });\n    }\n    // error - other\n    else if ( response.status !== 200 ) {\n        // if error callback is provided, call it\n        if ( error_cb && typeof error_cb === 'function' )\n        {\n            error_cb(resp);\n        }\n        // reject promise\n        return reject_func(resp);\n    }\n    // success\n    else {\n        // This is a driver error\n        if ( resp.success === false && resp.error?.code === 'permission_denied' ) {\n            let perm = await puter.ui.requestPermission({ permission: 'driver:puter-image-generation:generate' });\n            // try sending again if permission was granted\n            if ( perm.granted ) {\n                // todo repeat request\n            }\n        }\n        // if success callback is provided, call it\n        if ( success_cb && typeof success_cb === 'function' )\n        {\n            success_cb(resp);\n        }\n        // resolve with success\n        return resolve_func(resp);\n    }\n}\n\n/**\n * Handles an error by invoking a specified error callback and then rejecting a promise.\n *\n * @param {Function} error_cb - An optional callback function that is called if it's provided.\n *                              This function should take an error object as its only argument.\n * @param {Function} reject_func - A function used to reject a promise. It should take an error object\n *                                 as its only argument.\n * @param {Object} error - The error object that is passed to both the error callback and the reject function.\n *\n * @returns {void} The function does not return a value but will call the reject function with the error.\n */\nfunction handle_error (error_cb, reject_func, error) {\n    // if error callback is provided, call it\n    if ( error_cb && typeof error_cb === 'function' )\n    {\n        error_cb(error);\n    }\n    // reject promise\n    return reject_func(error);\n}\n\nfunction setupXhrEventHandlers (xhr, success_cb, error_cb, resolve_func, reject_func) {\n    // load: success or error\n    xhr.addEventListener('load', async function (e) {\n        // Log the response if API logging is enabled\n        if ( globalThis.puter?.apiCallLogger?.isEnabled() && this._puterRequestId ) {\n            const response = await parseResponse(this).catch(() => null);\n            globalThis.puter.apiCallLogger.logRequest({\n                service: this._puterRequestId.service,\n                operation: this._puterRequestId.operation,\n                params: this._puterRequestId.params,\n                result: this.status >= 400 ? null : response,\n                error: this.status >= 400 ? { message: this.statusText, status: this.status } : null,\n            });\n        }\n        return handle_resp(success_cb, error_cb, resolve_func, reject_func, this, xhr);\n    });\n\n    // error\n    xhr.addEventListener('error', function (e) {\n        // Log the error if API logging is enabled\n        if ( globalThis.puter?.apiCallLogger?.isEnabled() && this._puterRequestId ) {\n            globalThis.puter.apiCallLogger.logRequest({\n                service: this._puterRequestId.service,\n                operation: this._puterRequestId.operation,\n                params: this._puterRequestId.params,\n                error: {\n                    message: 'Network error occurred',\n                    event: e.type,\n                },\n            });\n        }\n        return handle_error(error_cb, reject_func, this);\n    });\n}\n\nconst NOOP = () => {\n};\nclass Valid {\n    static callback (cb) {\n        return (cb && typeof cb === 'function') ? cb : undefined;\n    }\n}\n\n/**\n * Makes the hybrid promise/callback function for a particular driver method\n * @param {string[]} arg_defs - argument names (for now; definitions eventually)\n * @param {string} driverInterface - name of the interface\n * @param {string} driverName - name of the driver\n * @param {string} driverMethod - name of the method\n */\nfunction make_driver_method (arg_defs, driverInterface, driverName, driverMethod, settings = {}) {\n    return async function (...args) {\n        let driverArgs = {};\n        let options = {};\n\n        // Check if the first argument is an object and use it as named parameters\n        if ( args.length === 1 && typeof args[0] === 'object' && !Array.isArray(args[0]) ) {\n            driverArgs = { ...args[0] };\n            options = {\n                success: driverArgs.success,\n                error: driverArgs.error,\n            };\n            // Remove callback functions from driverArgs if they exist\n            delete driverArgs.success;\n            delete driverArgs.error;\n        } else {\n            // Handle as individual arguments\n            arg_defs.forEach((argName, index) => {\n                driverArgs[argName] = args[index];\n            });\n            options = {\n                success: args[arg_defs.length],\n                error: args[arg_defs.length + 1],\n            };\n        }\n\n        // preprocess\n        if ( settings.preprocess && typeof settings.preprocess === 'function' ) {\n            driverArgs = settings.preprocess(driverArgs);\n        }\n\n        return await driverCall(options, driverInterface, driverName, driverMethod, driverArgs, settings);\n    };\n}\n\nasync function driverCall (options, driverInterface, driverName, driverMethod, driverArgs, settings) {\n    const tp = new TeePromise();\n\n    driverCall_(options,\n                    tp.resolve.bind(tp),\n                    tp.reject.bind(tp),\n                    driverInterface,\n                    driverName,\n                    driverMethod,\n                    driverArgs,\n                    undefined,\n                    undefined,\n                    settings);\n\n    return await tp;\n}\n\n// This function encapsulates the logic for sending a driver call request\nasync function driverCall_ (\n    options = {},\n    resolve_func, reject_func,\n    driverInterface, driverName, driverMethod, driverArgs,\n    method,\n    contentType = 'text/plain;actually=json',\n    settings = {},\n) {\n    // Generate request ID for logging\n    // Store request info for logging\n    let requestInfo = null;\n    if ( globalThis.puter?.apiCallLogger?.isEnabled() ) {\n        requestInfo = {\n            interface: driverInterface,\n            driver: driverName,\n            method: driverMethod,\n            args: driverArgs,\n        };\n    }\n\n    // If there is no authToken and the environment is web, try authenticating with Puter\n    if ( !puter.authToken && puter.env === 'web' ) {\n        try {\n            await puter.ui.authenticateWithPuter();\n        } catch (e) {\n            // Log authentication error\n            if ( requestInfo && globalThis.puter?.apiCallLogger?.isEnabled() ) {\n                globalThis.puter.apiCallLogger.logRequest({\n                    service: 'drivers',\n                    operation: `${driverInterface}::${driverMethod}`,\n                    params: { interface: driverInterface, driver: driverName, method: driverMethod, args: driverArgs },\n                    error: { code: 'auth_canceled', message: 'Authentication canceled' },\n                });\n            }\n            return reject_func({\n                error: {\n                    code: 'auth_canceled', message: 'Authentication canceled',\n                },\n            });\n        }\n    }\n\n    const success_cb = Valid.callback(options.success) ?? NOOP;\n    const error_cb = Valid.callback(options.error) ?? NOOP;\n    // create xhr object\n    const xhr = initXhr('/drivers/call', puter.APIOrigin, undefined, 'POST', contentType);\n\n    // Store request info for later logging\n    if ( requestInfo ) {\n        xhr._puterDriverRequestInfo = requestInfo;\n    }\n\n    if ( settings.responseType ) {\n        xhr.responseType = settings.responseType;\n    }\n\n    // ===============================================\n    // TO UNDERSTAND THIS CODE, YOU MUST FIRST\n    // UNDERSTAND THE FOLLOWING TEXT:\n    //\n    // Everything between here and the comment reading\n    // \"=== END OF STREAMING ===\" is ONLY for handling\n    // requests with content type \"application/x-ndjson\"\n    // ===============================================\n\n    let is_stream = false;\n    let signal_stream_update = null;\n    let lastLength = 0;\n    let response_complete = false;\n\n    let buffer = '';\n\n    // NOTE: linked-list technically would perform better,\n    //       but in practice there are at most 2-3 lines\n    //       buffered so this does not matter.\n    const lines_received = [];\n\n    xhr.onreadystatechange = () => {\n        if ( xhr.readyState === 2 ) {\n            if ( xhr.getResponseHeader('Content-Type') !==\n                'application/x-ndjson'\n            ) return;\n            is_stream = true;\n            const Stream = async function* Stream () {\n                while ( !response_complete ) {\n                    const tp = new TeePromise();\n                    signal_stream_update = tp.resolve.bind(tp);\n                    await tp;\n                    if ( response_complete ) break;\n                    while ( lines_received.length > 0 ) {\n                        const line = lines_received.shift();\n                        if ( line.trim() === '' ) continue;\n                        const lineObject = (JSON.parse(line));\n                        if ( typeof (lineObject.text) === 'string' ) {\n                            Object.defineProperty(lineObject, 'toString', {\n                                enumerable: false,\n                                value: () => lineObject.text,\n                            });\n                        }\n                        yield lineObject;\n                    }\n                }\n            };\n\n            const startedStream = Stream();\n            Object.defineProperty(startedStream, 'start', {\n                enumerable: false,\n                value: async (controller) => {\n                    const texten = new TextEncoder();\n                    for await ( const part of startedStream ) {\n                        controller.enqueue(texten.encode(part));\n                    }\n                    controller.close();\n                },\n            });\n\n            return resolve_func(startedStream);\n        }\n        if ( xhr.readyState === 4 ) {\n            response_complete = true;\n            if ( is_stream ) {\n                signal_stream_update?.();\n            }\n        }\n    };\n\n    xhr.onprogress = function () {\n        if ( ! signal_stream_update ) return;\n\n        const newText = xhr.responseText.slice(lastLength);\n        lastLength = xhr.responseText.length; // Update lastLength to the current length\n\n        let hasUpdates = false;\n        for ( let i = 0; i < newText.length; i++ ) {\n            buffer += newText[i];\n            if ( newText[i] === '\\n' ) {\n                hasUpdates = true;\n                lines_received.push(buffer);\n                buffer = '';\n            }\n        }\n\n        if ( hasUpdates ) {\n            signal_stream_update();\n        }\n    };\n\n    // ========================\n    // === END OF STREAMING ===\n    // ========================\n\n    // load: success or error\n    xhr.addEventListener('load', async function (response) {\n        if ( is_stream ) {\n            return;\n        }\n        const resp = await parseResponse(response.target);\n\n        // Log driver call response\n        if ( this._puterDriverRequestInfo && globalThis.puter?.apiCallLogger?.isEnabled() ) {\n            globalThis.puter.apiCallLogger.logRequest({\n                service: 'drivers',\n                operation: `${this._puterDriverRequestInfo.interface}::${this._puterDriverRequestInfo.method}`,\n                params: { interface: this._puterDriverRequestInfo.interface, driver: this._puterDriverRequestInfo.driver, method: this._puterDriverRequestInfo.method, args: this._puterDriverRequestInfo.args },\n                result: response.status >= 400 || resp?.success === false ? null : resp,\n                error: response.status >= 400 || resp?.success === false ? resp : null,\n            });\n        }\n\n        // HTTP Error - unauthorized\n        if ( response.status === 401 || resp?.code === 'token_auth_failed' ) {\n            if ( resp?.code === 'token_auth_failed' && puter.env === 'web' ) {\n                try {\n                    puter.resetAuthToken();\n                    await puter.ui.authenticateWithPuter();\n                } catch (e) {\n                    return reject_func({\n                        error: {\n                            code: 'auth_canceled', message: 'Authentication canceled',\n                        },\n                    });\n                }\n            }\n            // if error callback is provided, call it\n            if ( error_cb && typeof error_cb === 'function' )\n            {\n                error_cb({ status: 401, message: 'Unauthorized' });\n            }\n            // reject promise\n            return reject_func({ status: 401, message: 'Unauthorized' });\n        }\n        // HTTP Error - other\n        else if ( response.status && response.status !== 200 ) {\n            // if error callback is provided, call it\n            error_cb(resp);\n            // reject promise\n            return reject_func(resp);\n        }\n        // HTTP Success\n        else {\n            // Driver Error: permission denied\n            if ( resp.success === false && resp.error?.code === 'permission_denied' ) {\n                let perm = await puter.ui.requestPermission({ permission: `driver:${ driverInterface }:${ driverMethod}` });\n                // try sending again if permission was granted\n                if ( perm.granted ) {\n                    // repeat request with permission granted\n                    return driverCall_(options, resolve_func, reject_func, driverInterface, driverMethod, driverArgs, method, contentType, settings);\n                } else {\n                    // if error callback is provided, call it\n                    error_cb(resp);\n                    // reject promise\n                    return reject_func(resp);\n                }\n            }\n            // Driver Error: other\n            else if ( resp.success === false ) {\n                // if error callback is provided, call it\n                error_cb(resp);\n                // reject promise\n                return reject_func(resp);\n            }\n\n            let result = resp.result !== undefined ? resp.result : resp;\n            if ( settings.transform ) {\n                result = await settings.transform(result);\n            }\n\n            // Success: if callback is provided, call it\n            if ( resolve_func.success )\n            {\n                success_cb(result);\n            }\n            // Success: resolve with the result\n            return resolve_func(result);\n        }\n    });\n\n    // error\n    xhr.addEventListener('error', function (e) {\n        // Log driver call error\n        if ( this._puterDriverRequestInfo && globalThis.puter?.apiCallLogger?.isEnabled() ) {\n            globalThis.puter.apiCallLogger.logRequest({\n                service: 'drivers',\n                operation: `${this._puterDriverRequestInfo.interface}::${this._puterDriverRequestInfo.method}`,\n                params: { interface: this._puterDriverRequestInfo.interface, driver: this._puterDriverRequestInfo.driver, method: this._puterDriverRequestInfo.method, args: this._puterDriverRequestInfo.args },\n                error: { message: 'Network error occurred', event: e.type },\n            });\n        }\n        return handle_error(error_cb, reject_func, this);\n    });\n\n    // send request\n    xhr.send(JSON.stringify({\n        interface: driverInterface,\n        driver: driverName,\n        test_mode: settings?.test_mode,\n        method: driverMethod,\n        args: driverArgs,\n        auth_token: puter.authToken,\n    }));\n}\n\nclass TeePromise {\n    static STATUS_PENDING = {};\n    static STATUS_RUNNING = {};\n    static STATUS_DONE = {};\n    constructor () {\n        this.status_ = this.constructor.STATUS_PENDING;\n        this.donePromise = new Promise((resolve, reject) => {\n            this.doneResolve = resolve;\n            this.doneReject = reject;\n        });\n    }\n    get status () {\n        return this.status_;\n    }\n    set status (status) {\n        this.status_ = status;\n        if ( status === this.constructor.STATUS_DONE ) {\n            this.doneResolve();\n        }\n    }\n    resolve (value) {\n        this.status_ = this.constructor.STATUS_DONE;\n        this.doneResolve(value);\n    }\n    awaitDone () {\n        return this.donePromise;\n    }\n    then (fn, rfn) {\n        return this.donePromise.then(fn, rfn);\n    }\n\n    reject (err) {\n        this.status_ = this.constructor.STATUS_DONE;\n        this.doneReject(err);\n    }\n\n    /**\n     * @deprecated use then() instead\n     */\n    onComplete (fn) {\n        return this.then(fn);\n    }\n}\n\nasync function blob_to_url (blob) {\n    const tp = new TeePromise();\n    const reader = new (globalThis.FileReader || FileReaderPoly)();\n    reader.onloadend = () => tp.resolve(reader.result);\n    reader.readAsDataURL(blob);\n    return await tp;\n}\n\nfunction blobToDataUri (blob) {\n    return new Promise((resolve, reject) => {\n        const reader = new (globalThis.FileReader || FileReaderPoly)();\n        reader.onload = function (event) {\n            resolve(event.target.result);\n        };\n        reader.onerror = function (error) {\n            reject(error);\n        };\n        reader.readAsDataURL(blob);\n    });\n}\n\nfunction arrayBufferToDataUri (arrayBuffer) {\n    return new Promise((resolve, reject) => {\n        const blob = new Blob([arrayBuffer]);\n        const reader = new (globalThis.FileReader || FileReaderPoly)();\n        reader.onload = function (event) {\n            resolve(event.target.result);\n        };\n        reader.onerror = function (error) {\n            reject(error);\n        };\n        reader.readAsDataURL(blob);\n    });\n}\n\nexport {\n    arrayBufferToDataUri, blob_to_url, blobToDataUri, driverCall, handle_error, handle_resp, initXhr, make_driver_method, parseResponse, setupXhrEventHandlers, TeePromise, uuidv4\n};\n", "import * as utils from '../lib/utils.js';\n\nconst normalizeTTSProvider = (value) => {\n    if ( typeof value !== 'string' ) {\n        return 'aws-polly';\n    }\n    const lower = value.toLowerCase();\n    if ( lower === 'openai' ) return 'openai';\n    if ( ['elevenlabs', 'eleven', '11labs', '11-labs', 'eleven-labs', 'elevenlabs-tts'].includes(lower) ) return 'elevenlabs';\n    if ( lower === 'aws' || lower === 'polly' || lower === 'aws-polly' ) return 'aws-polly';\n    return value;\n};\n\nconst TOGETHER_IMAGE_MODEL_PREFIXES = [\n    'black-forest-labs/',\n    'stabilityai/',\n    'togethercomputer/',\n    'playgroundai/',\n    'runwayml/',\n    'lightricks/',\n    'sg161222/',\n    'wavymulder/',\n    'prompthero/',\n    'bytedance-seed/',\n    'hidream-ai/',\n    'lykon/',\n    'qwen/',\n    'rundiffusion/',\n    'google/',\n    'ideogram/',\n];\n\nconst TOGETHER_IMAGE_MODEL_KEYWORDS = [\n    'flux',\n    'kling',\n    'sd3',\n    'stable-diffusion',\n    'kolors',\n];\n\nconst TOGETHER_VIDEO_MODEL_PREFIXES = [\n    'minimax/',\n    'google/',\n    'bytedance/',\n    'pixverse/',\n    'kwaivgi/',\n    'vidu/',\n    'wan-ai/',\n];\n\nclass AI {\n    /**\n     * Creates a new instance with the given authentication token, API origin, and app ID,\n     *\n     * @class\n     * @param {string} authToken - Token used to authenticate the user.\n     * @param {string} APIOrigin - Origin of the API server. Used to build the API endpoint URLs.\n     * @param {string} appID - ID of the app to use.\n     */\n    constructor (context) {\n        this.authToken = context.authToken;\n        this.APIOrigin = context.APIOrigin;\n        this.appID = context.appID;\n    }\n\n    /**\n     * Sets a new authentication token and resets the socket connection with the updated token, if applicable.\n     *\n     * @param {string} authToken - The new authentication token.\n     * @memberof [AI]\n     * @returns {void}\n     */\n    setAuthToken (authToken) {\n        this.authToken = authToken;\n    }\n\n    /**\n     * Sets the API origin.\n     *\n     * @param {string} APIOrigin - The new API origin.\n     * @memberof [AI]\n     * @returns {void}\n     */\n    setAPIOrigin (APIOrigin) {\n        this.APIOrigin = APIOrigin;\n    }\n\n    /**\n     * Returns a list of available AI models.\n     * @param {string} provider - The provider to filter the models returned.\n     * @returns {Array} Array containing available model objects\n     */\n    async listModels (provider) {\n        // Prefer the public API endpoint and fall back to the legacy driver call if needed.\n        const headers = this.authToken ? { Authorization: `Bearer ${this.authToken}` } : {};\n\n        const tryFetchModels = async () => {\n            const resp = await fetch(`${this.APIOrigin }/puterai/chat/models/details`, { headers });\n            if ( !resp.ok ) return null;\n            const data = await resp.json();\n            const models = Array.isArray(data?.models) ? data.models : [];\n            return provider ? models.filter(model => model.provider === provider) : models;\n        };\n\n        const tryDriverModels = async () => {\n            const models = await puter.drivers.call('puter-chat-completion', 'ai-chat', 'models');\n            const result = Array.isArray(models?.result) ? models.result : [];\n            return provider ? result.filter(model => model.provider === provider) : result;\n        };\n\n        const models = await (async () => {\n            try {\n                const apiModels = await tryFetchModels();\n                if ( apiModels !== null ) return apiModels;\n            } catch (e) {\n                // Ignore and fall back to the driver call below.\n            }\n            try {\n                return await tryDriverModels();\n            } catch (e) {\n                return [];\n            }\n        })();\n\n        return models;\n    }\n\n    /**\n     * Returns a list of all available AI providers\n     * @returns {Array} Array containing providers\n     */\n    async listModelProviders () {\n        const models = await this.listModels();\n        const providers = new Set();\n        (models ?? []).forEach(item => {\n            if ( item?.provider ) providers.add(item.provider);\n        });\n        return Array.from(providers);\n    }\n\n    img2txt = async (...args) => {\n        const MAX_INPUT_SIZE = 10 * 1024 * 1024;\n        if ( !args || args.length === 0 ) {\n            throw { message: 'Arguments are required', code: 'arguments_required' };\n        }\n\n        const isBlobLike = (value) => {\n            if ( typeof Blob === 'undefined' ) return false;\n            return value instanceof Blob || (typeof File !== 'undefined' && value instanceof File);\n        };\n        const isPlainObject = (value) => value && typeof value === 'object' && !Array.isArray(value) && !isBlobLike(value);\n        const normalizeProvider = (value) => {\n            if ( ! value ) return 'aws-textract';\n            const normalized = String(value).toLowerCase();\n            if ( ['aws', 'textract', 'aws-textract'].includes(normalized) ) return 'aws-textract';\n            if ( ['mistral', 'mistral-ocr'].includes(normalized) ) return 'mistral';\n            return 'aws-textract';\n        };\n\n        let options = {};\n        if ( isPlainObject(args[0]) ) {\n            options = { ...args[0] };\n        } else {\n            options.source = args[0];\n        }\n\n        let testMode = false;\n        for ( let i = 1; i < args.length; i++ ) {\n            const value = args[i];\n            if ( typeof value === 'boolean' ) {\n                testMode = testMode || value;\n            } else if ( isPlainObject(value) ) {\n                options = { ...options, ...value };\n            }\n        }\n\n        if ( typeof options.testMode === 'boolean' ) {\n            testMode = options.testMode;\n        }\n\n        const provider = normalizeProvider(options.provider);\n        delete options.provider;\n        delete options.testMode;\n\n        if ( ! options.source ) {\n            throw { message: 'Source is required', code: 'source_required' };\n        }\n\n        if ( isBlobLike(options.source) ) {\n            options.source = await utils.blobToDataUri(options.source);\n        } else if ( options.source?.source && isBlobLike(options.source.source) ) {\n            // Support shape { source: Blob }\n            options.source = await utils.blobToDataUri(options.source.source);\n        }\n\n        if ( typeof options.source === 'string' &&\n            options.source.startsWith('data:') &&\n            options.source.length > MAX_INPUT_SIZE ) {\n            throw { message: `Input size cannot be larger than ${ MAX_INPUT_SIZE}`, code: 'input_too_large' };\n        }\n\n        const toText = (result) => {\n            if ( ! result ) return '';\n            if ( Array.isArray(result.blocks) && result.blocks.length ) {\n                let str = '';\n                for ( const block of result.blocks ) {\n                    if ( typeof block?.text !== 'string' ) continue;\n                    if ( !block.type || block.type === 'text/textract:LINE' || block.type.startsWith('text/') ) {\n                        str += `${block.text }\\n`;\n                    }\n                }\n                if ( str.trim() ) return str;\n            }\n            if ( Array.isArray(result.pages) && result.pages.length ) {\n                const markdown = result.pages\n                    .map(page => (page?.markdown || '').trim())\n                    .filter(Boolean)\n                    .join('\\n\\n');\n                if ( markdown.trim() ) return markdown;\n            }\n            if ( typeof result.document_annotation === 'string' ) {\n                return result.document_annotation;\n            }\n            if ( typeof result.text === 'string' ) {\n                return result.text;\n            }\n            return '';\n        };\n\n        const driverCall = utils.make_driver_method(['source'], 'puter-ocr', provider, 'recognize', {\n            test_mode: testMode ?? false,\n            transform: async (result) => toText(result),\n        });\n\n        return await driverCall.call(this, options);\n    };\n\n    txt2speech = async (...args) => {\n        let MAX_INPUT_SIZE = 3000;\n        let options = {};\n        let testMode = false;\n\n        if ( ! args ) {\n            throw ({ message: 'Arguments are required', code: 'arguments_required' });\n        }\n\n        // Accept arguments in the following formats:\n        // 1. Shorthand API\n        //      puter.ai.txt2speech(\"Hello world\")\n        // 2. Verbose API\n        //      puter.ai.txt2speech(\"Hello world\", {\n        //           voice: \"Joanna\",\n        //           engine: \"neural\",\n        //           language: \"en-US\"\n        //      })\n        // 3. Positional arguments (Legacy)\n        //      puter.ai.txt2speech(<text>, <language>, <voice>, <engine>)\n        //      e.g:\n        //      puter.ai.txt2speech(\"Hello world\", \"en-US\")\n        //      puter.ai.txt2speech(\"Hello world\", \"en-US\", \"Joanna\")\n        //      puter.ai.txt2speech(\"Hello world\", \"en-US\", \"Joanna\", \"neural\")\n        //\n        // Undefined parameters will be set to default values:\n        // - voice: \"Joanna\"\n        // - engine: \"standard\"\n        // - language: \"en-US\"\n\n        if ( typeof args[0] === 'string' ) {\n            options = { text: args[0] };\n        }\n\n        if ( args[1] && typeof args[1] === 'object' && !Array.isArray(args[1]) ) {\n            // for verbose object API\n            Object.assign(options, args[1]);\n        } else if ( args[1] && typeof args[1] === 'string' ) {\n            // for legacy positional-arguments API\n            //\n            // puter.ai.txt2speech(<text>, <language>, <voice>, <engine>)\n            options.language = args[1];\n\n            if ( args[2] && typeof args[2] === 'string' ) {\n                options.voice = args[2];\n            }\n\n            if ( args[3] && typeof args[3] === 'string' ) {\n                options.engine = args[3];\n            }\n        } else if ( args[1] && typeof args[1] !== 'boolean' ) {\n            // If second argument is not an object, string, or boolean, throw an error\n            throw { message: 'Second argument must be an options object or language string. Use: txt2speech(\"text\", { voice: \"name\", engine: \"type\", language: \"code\" }) or txt2speech(\"text\", \"language\", \"voice\", \"engine\")', code: 'invalid_arguments' };\n        }\n\n        // Validate required text parameter\n        if ( ! options.text ) {\n            throw { message: 'Text parameter is required', code: 'text_required' };\n        }\n\n        const validEngines = ['standard', 'neural', 'long-form', 'generative'];\n        let provider = normalizeTTSProvider(options.provider);\n\n        if ( options.engine && normalizeTTSProvider(options.engine) === 'openai' && !options.provider ) {\n            provider = 'openai';\n        }\n\n        if ( options.engine && normalizeTTSProvider(options.engine) === 'elevenlabs' && !options.provider ) {\n            provider = 'elevenlabs';\n        }\n\n        if ( provider === 'openai' ) {\n            if ( !options.model && typeof options.engine === 'string' ) {\n                options.model = options.engine;\n            }\n            if ( ! options.voice ) {\n                options.voice = 'alloy';\n            }\n            if ( ! options.model ) {\n                options.model = 'gpt-4o-mini-tts';\n            }\n            if ( ! options.response_format ) {\n                options.response_format = 'mp3';\n            }\n            delete options.engine;\n        } else if ( provider === 'elevenlabs' ) {\n            if ( ! options.voice ) {\n                options.voice = '21m00Tcm4TlvDq8ikWAM';\n            }\n            if ( ! options.model && typeof options.engine === 'string' ) {\n                options.model = options.engine;\n            }\n            if ( ! options.model ) {\n                options.model = 'eleven_multilingual_v2';\n            }\n            if ( ! options.output_format && !options.response_format ) {\n                options.output_format = 'mp3_44100_128';\n            }\n            if ( options.response_format && !options.output_format ) {\n                options.output_format = options.response_format;\n            }\n            delete options.engine;\n        } else {\n            provider = 'aws-polly';\n\n            if ( options.engine && !validEngines.includes(options.engine) ) {\n                throw { message: `Invalid engine. Must be one of: ${ validEngines.join(', ')}`, code: 'invalid_engine' };\n            }\n\n            if ( ! options.voice ) {\n                options.voice = 'Joanna';\n            }\n            if ( ! options.engine ) {\n                options.engine = 'standard';\n            }\n            if ( ! options.language ) {\n                options.language = 'en-US';\n            }\n        }\n\n        // check input size\n        if ( options.text.length > MAX_INPUT_SIZE ) {\n            throw { message: `Input size cannot be larger than ${ MAX_INPUT_SIZE}`, code: 'input_too_large' };\n        }\n\n        // determine if test mode is enabled (check all arguments for boolean true)\n        for ( let i = 0; i < args.length; i++ ) {\n            if ( typeof args[i] === 'boolean' && args[i] === true ) {\n                testMode = true;\n                break;\n            }\n        }\n\n        const driverName = provider === 'openai'\n            ? 'openai-tts'\n            : (provider === 'elevenlabs' ? 'elevenlabs-tts' : 'aws-polly');\n\n        return await utils.make_driver_method(['source'], 'puter-tts', driverName, 'synthesize', {\n            responseType: 'blob',\n            test_mode: testMode ?? false,\n            transform: async (result) => {\n                let url;\n                if ( typeof result === 'string' ) {\n                    url = result;\n                } else if ( result instanceof Blob ) {\n                    url = await utils.blob_to_url(result);\n                } else if ( result instanceof ArrayBuffer ) {\n                    const blob = new Blob([result]);\n                    url = await utils.blob_to_url(blob);\n                } else if ( result && typeof result === 'object' && typeof result.arrayBuffer === 'function' ) {\n                    const arrayBuffer = await result.arrayBuffer();\n                    const blob = new Blob([arrayBuffer], { type: result.type || undefined });\n                    url = await utils.blob_to_url(blob);\n                } else {\n                    throw { message: 'Unexpected audio response format', code: 'invalid_audio_response' };\n                }\n                const audio = new (globalThis.Audio || Object)();\n                audio.src = url;\n                audio.toString = () => url;\n                audio.valueOf = () => url;\n                return audio;\n            },\n        }).call(this, options);\n    };\n\n    speech2speech = async (...args) => {\n        const MAX_INPUT_SIZE = 25 * 1024 * 1024;\n        if ( !args || !args.length ) {\n            throw ({ message: 'Arguments are required', code: 'arguments_required' });\n        }\n\n        const normalizeSource = async (value) => {\n            if ( value instanceof Blob ) {\n                return await utils.blobToDataUri(value);\n            }\n            return value;\n        };\n\n        const normalizeOptions = (opts = {}) => {\n            const normalized = { ...opts };\n            if ( normalized.voiceId && !normalized.voice && !normalized.voice_id ) normalized.voice = normalized.voiceId;\n            if ( normalized.modelId && !normalized.model && !normalized.model_id ) normalized.model = normalized.modelId;\n            if ( normalized.outputFormat && !normalized.output_format ) normalized.output_format = normalized.outputFormat;\n            if ( normalized.voiceSettings && !normalized.voice_settings ) normalized.voice_settings = normalized.voiceSettings;\n            if ( normalized.fileFormat && !normalized.file_format ) normalized.file_format = normalized.fileFormat;\n            if ( normalized.removeBackgroundNoise !== undefined && normalized.remove_background_noise === undefined ) {\n                normalized.remove_background_noise = normalized.removeBackgroundNoise;\n            }\n            if ( normalized.optimizeStreamingLatency !== undefined && normalized.optimize_streaming_latency === undefined ) {\n                normalized.optimize_streaming_latency = normalized.optimizeStreamingLatency;\n            }\n            if ( normalized.enableLogging !== undefined && normalized.enable_logging === undefined ) {\n                normalized.enable_logging = normalized.enableLogging;\n            }\n            delete normalized.voiceId;\n            delete normalized.modelId;\n            delete normalized.outputFormat;\n            delete normalized.voiceSettings;\n            delete normalized.fileFormat;\n            delete normalized.removeBackgroundNoise;\n            delete normalized.optimizeStreamingLatency;\n            delete normalized.enableLogging;\n            return normalized;\n        };\n\n        let options = {};\n        let testMode = false;\n\n        const primary = args[0];\n        if ( primary && typeof primary === 'object' && !Array.isArray(primary) && !(primary instanceof Blob) ) {\n            options = { ...primary };\n        } else {\n            options.audio = await normalizeSource(primary);\n        }\n\n        if ( args[1] && typeof args[1] === 'object' && !Array.isArray(args[1]) && !(args[1] instanceof Blob) ) {\n            options = { ...options, ...args[1] };\n        } else if ( typeof args[1] === 'boolean' ) {\n            testMode = args[1];\n        }\n\n        if ( typeof args[2] === 'boolean' ) {\n            testMode = args[2];\n        }\n\n        if ( options.file ) {\n            options.audio = await normalizeSource(options.file);\n            delete options.file;\n        }\n\n        if ( options.audio instanceof Blob ) {\n            options.audio = await normalizeSource(options.audio);\n        }\n\n        if ( ! options.audio ) {\n            throw { message: 'Audio input is required', code: 'audio_required' };\n        }\n\n        if ( typeof options.audio === 'string' && options.audio.startsWith('data:') ) {\n            const base64 = options.audio.split(',')[1] || '';\n            const padding = base64.endsWith('==') ? 2 : (base64.endsWith('=') ? 1 : 0);\n            const byteLength = Math.floor((base64.length * 3) / 4) - padding;\n            if ( byteLength > MAX_INPUT_SIZE ) {\n                throw { message: 'Input size cannot be larger than 25 MB', code: 'input_too_large' };\n            }\n        }\n\n        const driverArgs = normalizeOptions({ ...options });\n        delete driverArgs.provider;\n\n        return await utils.make_driver_method(['audio'], 'puter-speech2speech', 'elevenlabs-voice-changer', 'convert', {\n            responseType: 'blob',\n            test_mode: testMode,\n            transform: async (result) => {\n                let url;\n                if ( typeof result === 'string' ) {\n                    url = result;\n                } else if ( result instanceof Blob ) {\n                    url = await utils.blob_to_url(result);\n                } else if ( result instanceof ArrayBuffer ) {\n                    const blob = new Blob([result]);\n                    url = await utils.blob_to_url(blob);\n                } else if ( result && typeof result === 'object' && typeof result.arrayBuffer === 'function' ) {\n                    const arrayBuffer = await result.arrayBuffer();\n                    const blob = new Blob([arrayBuffer], { type: result.type || undefined });\n                    url = await utils.blob_to_url(blob);\n                } else {\n                    throw { message: 'Unexpected audio response format', code: 'invalid_audio_response' };\n                }\n                const audio = new Audio(url);\n                audio.toString = () => url;\n                audio.valueOf = () => url;\n                return audio;\n            },\n        }).call(this, driverArgs);\n    };\n\n    speech2txt = async (...args) => {\n        const MAX_INPUT_SIZE = 25 * 1024 * 1024;\n        if ( !args || !args.length ) {\n            throw ({ message: 'Arguments are required', code: 'arguments_required' });\n        }\n\n        const normalizeSource = async (value) => {\n            if ( value instanceof Blob ) {\n                return await utils.blobToDataUri(value);\n            }\n            return value;\n        };\n\n        let options = {};\n        let testMode = false;\n\n        const primary = args[0];\n        if ( primary && typeof primary === 'object' && !Array.isArray(primary) && !(primary instanceof Blob) ) {\n            options = { ...primary };\n        } else {\n            options.file = await normalizeSource(primary);\n        }\n\n        if ( args[1] && typeof args[1] === 'object' && !Array.isArray(args[1]) && !(args[1] instanceof Blob) ) {\n            options = { ...options, ...args[1] };\n        } else if ( typeof args[1] === 'boolean' ) {\n            testMode = args[1];\n        }\n\n        if ( typeof args[2] === 'boolean' ) {\n            testMode = args[2];\n        }\n\n        if ( options.audio ) {\n            options.file = await normalizeSource(options.audio);\n            delete options.audio;\n        }\n\n        if ( options.file instanceof Blob ) {\n            options.file = await normalizeSource(options.file);\n        }\n\n        if ( ! options.file ) {\n            throw { message: 'Audio input is required', code: 'audio_required' };\n        }\n\n        if ( typeof options.file === 'string' && options.file.startsWith('data:') ) {\n            const base64 = options.file.split(',')[1] || '';\n            const padding = base64.endsWith('==') ? 2 : (base64.endsWith('=') ? 1 : 0);\n            const byteLength = Math.floor((base64.length * 3) / 4) - padding;\n            if ( byteLength > MAX_INPUT_SIZE ) {\n                throw { message: 'Input size cannot be larger than 25 MB', code: 'input_too_large' };\n            }\n        }\n\n        const driverMethod = options.translate ? 'translate' : 'transcribe';\n        const driverArgs = { ...options };\n        delete driverArgs.translate;\n\n        const responseFormat = driverArgs.response_format;\n\n        return await utils.make_driver_method([], 'puter-speech2txt', 'openai-speech2txt', driverMethod, {\n            test_mode: testMode,\n            transform: async (result) => {\n                if ( responseFormat === 'text' && result && typeof result === 'object' && typeof result.text === 'string' ) {\n                    return result.text;\n                }\n                return result;\n            },\n        }).call(this, driverArgs);\n    };\n\n    // Add new methods for TTS engine management\n    txt2speech = Object.assign(this.txt2speech, {\n        /**\n         * List available TTS engines with pricing information\n         * @returns {Promise<Array>} Array of available engines\n         */\n        listEngines: async (options = {}) => {\n            let provider = 'aws-polly';\n            let params = {};\n\n            if ( typeof options === 'string' ) {\n                provider = normalizeTTSProvider(options);\n            } else if ( options && typeof options === 'object' ) {\n                provider = normalizeTTSProvider(options.provider) || provider;\n                params = { ...options };\n                delete params.provider;\n            }\n\n            if ( provider === 'openai' ) {\n                params.provider = 'openai';\n            }\n\n            if ( provider === 'elevenlabs' ) {\n                params.provider = 'elevenlabs';\n            }\n\n            const driverName = provider === 'openai'\n                ? 'openai-tts'\n                : (provider === 'elevenlabs' ? 'elevenlabs-tts' : 'aws-polly');\n\n            return await utils.make_driver_method(['source'], 'puter-tts', driverName, 'list_engines', {\n                responseType: 'text',\n            }).call(this, params);\n        },\n\n        /**\n         * List all available voices, optionally filtered by engine\n         * @param {string} [engine] - Optional engine filter\n         * @returns {Promise<Array>} Array of available voices\n         */\n        listVoices: async (options) => {\n            let provider = 'aws-polly';\n            let params = {};\n\n            if ( typeof options === 'string' ) {\n                params.engine = options;\n            } else if ( options && typeof options === 'object' ) {\n                provider = normalizeTTSProvider(options.provider) || provider;\n                params = { ...options };\n                delete params.provider;\n            }\n\n            if ( provider === 'openai' ) {\n                params.provider = 'openai';\n                delete params.engine;\n            }\n\n            if ( provider === 'elevenlabs' ) {\n                params.provider = 'elevenlabs';\n            }\n\n            const driverName = provider === 'openai'\n                ? 'openai-tts'\n                : (provider === 'elevenlabs' ? 'elevenlabs-tts' : 'aws-polly');\n\n            return utils.make_driver_method(['source'], 'puter-tts', driverName, 'list_voices', {\n                responseType: 'text',\n            }).call(this, params);\n        },\n    });\n\n    // accepts either a string or an array of message objects\n    // if string, it's treated as the prompt which is a shorthand for { messages: [{ content: prompt }] }\n    // if object, it's treated as the full argument object that the API expects\n    chat = async (...args) => {\n        // requestParams: parameters that will be sent to the backend driver\n        let requestParams = {};\n        // userParams: parameters provided by the user in the function call\n        let userParams = {};\n        let testMode = false;\n\n        // default driver is openai-completion\n        let driver = 'openai-completion';\n\n        // Check that the argument is not undefined or null\n        if ( ! args ) {\n            throw ({ message: 'Arguments are required', code: 'arguments_required' });\n        }\n\n        // ai.chat(prompt)\n        if ( typeof args[0] === 'string' ) {\n            requestParams = { messages: [{ content: args[0] }] };\n        }\n\n        // ai.chat(prompt, testMode)\n        if ( typeof args[0] === 'string' && (!args[1] || typeof args[1] === 'boolean') ) {\n            requestParams = { messages: [{ content: args[0] }] };\n        }\n\n        // ai.chat(prompt, imageURL/File)\n        // ai.chat(prompt, imageURL/File, testMode)\n        else if ( typeof args[0] === 'string' && (typeof args[1] === 'string' || args[1] instanceof File) ) {\n            // if imageURL is a File, transform it to a data URI\n            if ( args[1] instanceof File ) {\n                args[1] = await utils.blobToDataUri(args[1]);\n            }\n\n            // parse args[1] as an image_url object\n            requestParams = {\n                vision: true,\n                messages: [\n                    {\n                        content: [\n                            args[0],\n                            {\n                                image_url: {\n                                    url: args[1],\n                                },\n                            },\n                        ],\n                    },\n                ],\n            };\n        }\n        // chat(prompt, [imageURLs])\n        else if ( typeof args[0] === 'string' && Array.isArray(args[1]) ) {\n            // parse args[1] as an array of image_url objects\n            for ( let i = 0; i < args[1].length; i++ ) {\n                args[1][i] = { image_url: { url: args[1][i] } };\n            }\n            requestParams = {\n                vision: true,\n                messages: [\n                    {\n                        content: [\n                            args[0],\n                            ...args[1],\n                        ],\n                    },\n                ],\n            };\n        }\n        // chat([messages])\n        else if ( Array.isArray(args[0]) ) {\n            requestParams = { messages: args[0] };\n        }\n\n        // determine if testMode is enabled\n        if ( typeof args[1] === 'boolean' && args[1] === true ||\n            typeof args[2] === 'boolean' && args[2] === true ||\n            typeof args[3] === 'boolean' && args[3] === true ) {\n            testMode = true;\n        }\n\n        // if any of the args is an object, assume it's the user parameters object\n        const is_object = v => {\n            return typeof v === 'object' &&\n                !Array.isArray(v) &&\n                v !== null;\n        };\n        for ( let i = 0; i < args.length; i++ ) {\n            if ( is_object(args[i]) ) {\n                userParams = args[i];\n                break;\n            }\n        }\n\n        // Copy relevant parameters from userParams to requestParams\n        if ( userParams.model ) {\n            requestParams.model = userParams.model;\n        }\n        if ( userParams.temperature ) {\n            requestParams.temperature = userParams.temperature;\n        }\n        if ( userParams.max_tokens ) {\n            requestParams.max_tokens = userParams.max_tokens;\n        }\n\n        // convert undefined to empty string so that .startsWith works\n        requestParams.model = requestParams.model ?? '';\n\n        // If model starts with \"anthropic/\", remove it\n        // later on we should standardize the model names to [vendor]/[model]\n        // for example: \"claude-3-5-sonnet\" should become \"anthropic/claude-3-5-sonnet\"\n        // but for now, we want to keep the old behavior\n        // so we remove the \"anthropic/\" prefix if it exists\n        if ( requestParams.model && requestParams.model.startsWith('anthropic/') ) {\n            requestParams.model = requestParams.model.replace('anthropic/', '');\n        }\n\n        // convert to the correct model name if necessary\n        if ( requestParams.model === 'claude-3-5-sonnet' ) {\n            requestParams.model = 'claude-3-5-sonnet-latest';\n        }\n        if ( requestParams.model === 'claude-3-7-sonnet' || requestParams.model === 'claude' ) {\n            requestParams.model = 'claude-3-7-sonnet-latest';\n        }\n        if ( requestParams.model === 'claude-sonnet-4' || requestParams.model === 'claude-sonnet-4-latest' ) {\n            requestParams.model = 'claude-sonnet-4-20250514';\n        }\n        if ( requestParams.model === 'claude-opus-4' || requestParams.model === 'claude-opus-4-latest' ) {\n            requestParams.model = 'claude-opus-4-20250514';\n        }\n        if ( requestParams.model === 'mistral' ) {\n            requestParams.model = 'mistral-large-latest';\n        }\n        if ( requestParams.model === 'groq' ) {\n            requestParams.model = 'llama3-8b-8192';\n        }\n        if ( requestParams.model === 'deepseek' ) {\n            requestParams.model = 'deepseek-chat';\n        }\n\n        // o1-mini to openrouter:openai/o1-mini\n        if ( requestParams.model === 'o1-mini' ) {\n            requestParams.model = 'openrouter:openai/o1-mini';\n        }\n\n        // if a model is prepended with \"openai/\", remove it\n        if ( requestParams.model && requestParams.model.startsWith('openai/') ) {\n            requestParams.model = requestParams.model.replace('openai/', '');\n            driver = 'openai-completion';\n        }\n        // For the following providers, we need to prepend \"openrouter:\" to the model name so that the backend driver can handle it\n        if (\n            requestParams.model.startsWith('agentica-org/') ||\n            requestParams.model.startsWith('ai21/') ||\n            requestParams.model.startsWith('aion-labs/') ||\n            requestParams.model.startsWith('alfredpros/') ||\n            requestParams.model.startsWith('allenai/') ||\n            requestParams.model.startsWith('alpindale/') ||\n            requestParams.model.startsWith('amazon/') ||\n            requestParams.model.startsWith('anthracite-org/') ||\n            requestParams.model.startsWith('arcee-ai/') ||\n            requestParams.model.startsWith('arliai/') ||\n            requestParams.model.startsWith('baidu/') ||\n            requestParams.model.startsWith('bytedance/') ||\n            requestParams.model.startsWith('cognitivecomputations/') ||\n            requestParams.model.startsWith('cohere/') ||\n            requestParams.model.startsWith('deepseek/') ||\n            requestParams.model.startsWith('eleutherai/') ||\n            requestParams.model.startsWith('google/') ||\n            requestParams.model.startsWith('gryphe/') ||\n            requestParams.model.startsWith('inception/') ||\n            requestParams.model.startsWith('infermatic/') ||\n            requestParams.model.startsWith('liquid/') ||\n            requestParams.model.startsWith('mancer/') ||\n            requestParams.model.startsWith('meta-llama/') ||\n            requestParams.model.startsWith('microsoft/') ||\n            requestParams.model.startsWith('minimax/') ||\n            requestParams.model.startsWith('mistralai/') ||\n            requestParams.model.startsWith('moonshotai/') ||\n            requestParams.model.startsWith('morph/') ||\n            requestParams.model.startsWith('neversleep/') ||\n            requestParams.model.startsWith('nousresearch/') ||\n            requestParams.model.startsWith('nvidia/') ||\n            requestParams.model.startsWith('openrouter/') ||\n            requestParams.model.startsWith('perplexity/') ||\n            requestParams.model.startsWith('pygmalionai/') ||\n            requestParams.model.startsWith('qwen/') ||\n            requestParams.model.startsWith('raifle/') ||\n            requestParams.model.startsWith('rekaai/') ||\n            requestParams.model.startsWith('sao10k/') ||\n            requestParams.model.startsWith('sarvamai/') ||\n            requestParams.model.startsWith('scb10x/') ||\n            requestParams.model.startsWith('shisa-ai/') ||\n            requestParams.model.startsWith('sophosympatheia/') ||\n            requestParams.model.startsWith('switchpoint/') ||\n            requestParams.model.startsWith('tencent/') ||\n            requestParams.model.startsWith('thedrummer/') ||\n            requestParams.model.startsWith('thudm/') ||\n            requestParams.model.startsWith('tngtech/') ||\n            requestParams.model.startsWith('undi95/') ||\n            requestParams.model.startsWith('x-ai/') ||\n            requestParams.model.startsWith('z-ai/')\n        ) {\n            requestParams.model = `openrouter:${ requestParams.model}`;\n        }\n\n        // map model to the appropriate driver\n        if ( !requestParams.model || requestParams.model.startsWith('gpt-') ) {\n            driver = 'openai-completion';\n        } else if (\n            requestParams.model.startsWith('claude-')\n        ) {\n            driver = 'claude';\n        } else if ( requestParams.model === 'meta-llama/Meta-Llama-3.1-8B-Instruct-Turbo' || requestParams.model === 'meta-llama/Meta-Llama-3.1-70B-Instruct-Turbo' || requestParams.model === 'meta-llama/Meta-Llama-3.1-405B-Instruct-Turbo' || requestParams.model === 'google/gemma-2-27b-it' ) {\n            driver = 'together-ai';\n        } else if ( requestParams.model.startsWith('mistral-') || requestParams.model.startsWith('codestral-') || requestParams.model.startsWith('pixtral-') || requestParams.model.startsWith('magistral-') || requestParams.model.startsWith('devstral-') || requestParams.model.startsWith('mistral-ocr-') || requestParams.model.startsWith('open-mistral-') ) {\n            driver = 'mistral';\n        } else if ( [\n            'distil-whisper-large-v3-en',\n            'gemma2-9b-it',\n            'gemma-7b-it',\n            'llama-3.1-70b-versatile',\n            'llama-3.1-8b-instant',\n            'llama3-70b-8192',\n            'llama3-8b-8192',\n            'llama3-groq-70b-8192-tool-use-preview',\n            'llama3-groq-8b-8192-tool-use-preview',\n            'llama-guard-3-8b',\n            'mixtral-8x7b-32768',\n            'whisper-large-v3',\n        ].includes(requestParams.model) ) {\n            driver = 'groq';\n        } else if ( requestParams.model === 'grok-beta' ) {\n            driver = 'xai';\n        }\n        else if ( requestParams.model.startsWith('grok-') ) {\n            driver = 'openrouter';\n        }\n        else if (\n            requestParams.model === 'deepseek-chat' ||\n            requestParams.model === 'deepseek-reasoner'\n        ) {\n            driver = 'deepseek';\n        }\n        else if (\n            requestParams.model === 'gemini-1.5-flash' ||\n            requestParams.model === 'gemini-2.0-flash' ||\n            requestParams.model === 'gemini-2.5-flash' ||\n            requestParams.model === 'gemini-2.5-flash-lite' ||\n            requestParams.model === 'gemini-2.0-flash-lite' ||\n            requestParams.model === 'gemini-3-pro-preview' ||\n            requestParams.model === 'gemini-2.5-pro'\n        ) {\n            driver = 'gemini';\n        }\n        else if ( requestParams.model.startsWith('openrouter:') ) {\n            driver = 'openrouter';\n        }\n        else if ( requestParams.model.startsWith('ollama:') ) {\n            driver = 'ollama';\n        }\n\n        // stream flag from userParams\n        if ( userParams.stream !== undefined && typeof userParams.stream === 'boolean' ) {\n            requestParams.stream = userParams.stream;\n        }\n\n        if ( userParams.driver ) {\n            driver = userParams.driver;\n        }\n\n        // Additional parameters to pass from userParams to requestParams\n        const PARAMS_TO_PASS = ['tools', 'response', 'reasoning', 'reasoning_effort', 'text', 'verbosity'];\n        for ( const name of PARAMS_TO_PASS ) {\n            if ( userParams[name] ) {\n                requestParams[name] = userParams[name];\n            }\n        }\n\n        if ( requestParams.model === '' ) {\n            delete requestParams.model;\n        }\n\n        // Call the original chat.complete method\n        return await utils.make_driver_method(['messages'], 'puter-chat-completion', driver, 'complete', {\n            test_mode: testMode ?? false,\n            transform: async (result) => {\n                result.toString = () => {\n                    return result.message?.content;\n                };\n\n                result.valueOf = () => {\n                    return result.message?.content;\n                };\n\n                return result;\n            },\n        }).call(this, requestParams);\n    };\n\n    /**\n     * Generate images from text prompts or perform image-to-image generation\n     *\n     * @param {string|object} prompt - Text prompt or options object\n     * @param {object|boolean} [options] - Generation options or test mode flag\n     * @param {string} [options.prompt] - Text description of the image to generate\n     * @param {string} [options.model] - Model to use (e.g., \"gemini-2.5-flash-image-preview\")\n     * @param {object} [options.ratio] - Image dimensions (e.g., {w: 1024, h: 1024})\n     * @param {string} [options.input_image] - Base64 encoded input image for image-to-image generation\n     * @param {string} [options.input_image_mime_type] - MIME type of input image (e.g., \"image/png\")\n     * @returns {Promise<Image>} Generated image object with src property\n     *\n     * @example\n     * // Text-to-image\n     * const img = await puter.ai.txt2img(\"A beautiful sunset\");\n     *\n     * @example\n     * // Image-to-image\n     * const img = await puter.ai.txt2img({\n     *   prompt: \"Transform this into a watercolor painting\",\n     *   input_image: base64ImageData,\n     *   input_image_mime_type: \"image/png\",\n     *   model: \"gemini-2.5-flash-image-preview\"\n     * });\n     */\n    txt2img = async (...args) => {\n        let options = {};\n        let testMode = false;\n\n        if ( ! args ) {\n            throw ({ message: 'Arguments are required', code: 'arguments_required' });\n        }\n\n        // if argument is string transform it to the object that the API expects\n        if ( typeof args[0] === 'string' ) {\n            options = { prompt: args[0] };\n        }\n\n        // if second argument is string, it's the `testMode`\n        if ( typeof args[1] === 'boolean' && args[1] === true ) {\n            testMode = true;\n        }\n\n        if ( typeof args[0] === 'string' && typeof args[1] === 'object' ) {\n            options = args[1];\n            options.prompt = args[0];\n        }\n\n        if ( typeof args[0] === 'object' ) {\n            options = args[0];\n        }\n\n        let AIService = 'openai-image-generation';\n        if ( options.model === 'nano-banana' )\n        {\n            options.model = 'gemini-2.5-flash-image-preview';\n        }\n\n        if (options.model === \"nano-banana-pro\") {\n            options.model = \"gemini-3-pro-image-preview\";\n        }\n\n        const driverHint = typeof options.driver === 'string' ? options.driver : undefined;\n        const providerRaw = typeof options.provider === 'string'\n            ? options.provider\n            : (typeof options.service === 'string' ? options.service : undefined);\n        const providerHint = typeof providerRaw === 'string' ? providerRaw.toLowerCase() : undefined;\n        const modelLower = typeof options.model === 'string' ? options.model.toLowerCase() : '';\n\n        const looksLikeTogetherModel =\n            typeof options.model === 'string' &&\n            (TOGETHER_IMAGE_MODEL_PREFIXES.some(prefix => modelLower.startsWith(prefix)) ||\n                TOGETHER_IMAGE_MODEL_KEYWORDS.some(keyword => modelLower.includes(keyword)));\n\n        if ( driverHint ) {\n            AIService = driverHint;\n        } else if ( providerHint === 'gemini' ) {\n            AIService = 'gemini-image-generation';\n        } else if ( providerHint === 'together' || providerHint === 'together-ai' ) {\n            AIService = 'together-image-generation';\n        } else if (options.model === 'gemini-2.5-flash-image-preview' || options.model === \"gemini-3-pro-image-preview\" ) {\n            AIService = 'gemini-image-generation';\n        } else if ( looksLikeTogetherModel ) {\n            AIService = 'together-image-generation';\n        }\n        // Call the original chat.complete method\n        return await utils.make_driver_method(['prompt'], 'puter-image-generation', AIService, 'generate', {\n            responseType: 'blob',\n            test_mode: testMode ?? false,\n            transform: async result => {\n                let url;\n                if ( typeof result === 'string' ) {\n                    url = result;\n                } else if ( result instanceof Blob ) {\n                    url = await utils.blob_to_url(result);\n                } else if ( result instanceof ArrayBuffer ) {\n                    const blob = new Blob([result]);\n                    url = await utils.blob_to_url(blob);\n                } else if ( result && typeof result === 'object' && typeof result.arrayBuffer === 'function' ) {\n                    const arrayBuffer = await result.arrayBuffer();\n                    const blob = new Blob([arrayBuffer], { type: result.type || undefined });\n                    url = await utils.blob_to_url(blob);\n                } else {\n                    throw { message: 'Unexpected image response format', code: 'invalid_image_response' };\n                }\n                let img = new (globalThis.Image || Object)();\n                img.src = url;\n                img.toString = () => img.src;\n                img.valueOf = () => img.src;\n                return img;\n            },\n        }).call(this, options);\n    };\n\n    txt2vid = async (...args) => {\n        let options = {};\n        let testMode = false;\n\n        if ( ! args ) {\n            throw ({ message: 'Arguments are required', code: 'arguments_required' });\n        }\n\n        if ( typeof args[0] === 'string' ) {\n            options = { prompt: args[0] };\n        }\n\n        if ( typeof args[1] === 'boolean' && args[1] === true ) {\n            testMode = true;\n        }\n\n        if ( typeof args[0] === 'string' && typeof args[1] === 'object' ) {\n            options = args[1];\n            options.prompt = args[0];\n        }\n\n        if ( typeof args[0] === 'object' ) {\n            options = args[0];\n        }\n\n        if ( ! options.prompt ) {\n            throw ({ message: 'Prompt parameter is required', code: 'prompt_required' });\n        }\n\n        if ( ! options.model ) {\n            options.model = 'sora-2';\n        }\n\n        if ( options.duration !== undefined && options.seconds === undefined ) {\n            options.seconds = options.duration;\n        }\n\n        let videoService = 'openai-video-generation';\n        const driverHint = typeof options.driver === 'string' ? options.driver : undefined;\n        const driverHintLower = driverHint ? driverHint.toLowerCase() : undefined;\n        const providerRaw = typeof options.provider === 'string'\n            ? options.provider\n            : (typeof options.service === 'string' ? options.service : undefined);\n        const providerHint = typeof providerRaw === 'string' ? providerRaw.toLowerCase() : undefined;\n        const modelLower = typeof options.model === 'string' ? options.model.toLowerCase() : '';\n\n        const looksLikeTogetherVideoModel = typeof options.model === 'string' &&\n            TOGETHER_VIDEO_MODEL_PREFIXES.some(prefix => modelLower.startsWith(prefix));\n\n        if ( driverHintLower === 'together' || driverHintLower === 'together-ai' ) {\n            videoService = 'together-video-generation';\n        } else if ( driverHintLower === 'together-video-generation' ) {\n            videoService = 'together-video-generation';\n        } else if ( driverHintLower === 'openai' ) {\n            videoService = 'openai-video-generation';\n        } else if ( driverHint ) {\n            videoService = driverHint;\n        } else if ( providerHint === 'together' || providerHint === 'together-ai' ) {\n            videoService = 'together-video-generation';\n        } else if ( looksLikeTogetherVideoModel ) {\n            videoService = 'together-video-generation';\n        }\n\n        return await utils.make_driver_method(['prompt'], 'puter-video-generation', videoService, 'generate', {\n            responseType: 'blob',\n            test_mode: testMode ?? false,\n            transform: async result => {\n                let sourceUrl = null;\n                let mimeType = null;\n                if ( result instanceof Blob ) {\n                    sourceUrl = await utils.blob_to_url(result);\n                    mimeType = result.type || 'video/mp4';\n                } else if ( typeof result === 'string' ) {\n                    sourceUrl = result;\n                } else if ( result && typeof result === 'object' ) {\n                    sourceUrl = result.asset_url || result.url || result.href || null;\n                    mimeType = result.mime_type || result.content_type || null;\n                }\n\n                if ( ! sourceUrl ) {\n                    return result;\n                }\n\n                const video = (globalThis.document?.createElement('video') || {setAttribute: ()=>{}});\n                video.src = sourceUrl;\n                video.controls = true;\n                video.preload = 'metadata';\n                if ( mimeType ) {\n                    video.setAttribute('data-mime-type', mimeType);\n                }\n                video.setAttribute('data-source', sourceUrl);\n                video.toString = () => video.src;\n                video.valueOf = () => video.src;\n                return video;\n            },\n        }).call(this, options);\n    };\n}\n\nexport default AI;\n", "import * as utils from '../lib/utils.js';\n\nclass Apps {\n    /**\n     * Creates a new instance with the given authentication token, API origin, and app ID,\n     *\n     * @class\n     * @param {string} authToken - Token used to authenticate the user.\n     * @param {string} APIOrigin - Origin of the API server. Used to build the API endpoint URLs.\n     * @param {string} appID - ID of the app to use.\n     */\n    constructor (context) {\n        this.authToken = context.authToken;\n        this.APIOrigin = context.APIOrigin;\n        this.appID = context.appID;\n    }\n\n    /**\n     * Sets a new authentication token.\n     *\n     * @param {string} authToken - The new authentication token.\n     * @memberof [Apps]\n     * @returns {void}\n     */\n    setAuthToken (authToken) {\n        this.authToken = authToken;\n    }\n\n    /**\n     * Sets the API origin.\n     *\n     * @param {string} APIOrigin - The new API origin.\n     * @memberof [Apps]\n     * @returns {void}\n     */\n    setAPIOrigin (APIOrigin) {\n        this.APIOrigin = APIOrigin;\n    }\n\n    list = async (...args) => {\n        let options = {};\n\n        // if args is a single object, assume it is the options object\n        if ( typeof args[0] === 'object' && args[0] !== null ) {\n            options.params = args[0];\n        }\n\n        options.predicate = ['user-can-edit'];\n\n        return utils.make_driver_method(['uid'], 'puter-apps', undefined, 'select').call(this, options);\n    };\n\n    create = async (...args) => {\n        let options = {};\n        // * allows for: puter.apps.new('example-app') *\n        if ( typeof args[0] === 'string' ) {\n            let indexURL = args[1];\n            let title = args[2] ?? args[0];\n\n            options = {\n                object: {\n                    name: args[0],\n                    index_url: indexURL,\n                    title: title,\n                },\n            };\n        }\n\n        // * allows for: puter.apps.new({name: 'example-app', indexURL: 'https://example.com'}) *\n        else if ( typeof args[0] === 'object' && args[0] !== null ) {\n            let options_raw = args[0];\n\n            options = {\n                object: {\n                    name: options_raw.name,\n                    index_url: options_raw.indexURL,\n                    // title is optional only if name is provided.\n                    // If title is provided, use it. If not, use name.\n                    title: options_raw.title ?? options_raw.name,\n                    description: options_raw.description,\n                    icon: options_raw.icon,\n                    maximize_on_start: options_raw.maximizeOnStart,\n                    background: options_raw.background,\n                    filetype_associations: options_raw.filetypeAssociations,\n                    metadata: options_raw.metadata,\n                },\n                options: {\n                    dedupe_name: options_raw.dedupeName ?? false,\n                },\n            };\n        }\n\n        // name and indexURL are required\n        if ( ! options.object.name ) {\n            throw {\n                success: false,\n                error: {\n                    code: 'invalid_request',\n                    message: 'Name is required',\n                },\n            };\n        }\n        if ( ! options.object.index_url ) {\n            throw {\n                success: false,\n                error: {\n                    code: 'invalid_request',\n                    message: 'Index URL is required',\n                },\n            };\n        }\n\n        // Call the original chat.complete method\n        return await utils.make_driver_method(['object'], 'puter-apps', undefined, 'create').call(this, options);\n    };\n\n    update = async (...args) => {\n        let options = {};\n\n        // if there is one string argument, assume it is the app name\n        // * allows for: puter.apps.update('example-app') *\n        if ( Array.isArray(args) && typeof args[0] === 'string' ) {\n            let object_raw = args[1];\n            let object = {\n                name: object_raw.name,\n                index_url: object_raw.indexURL,\n                title: object_raw.title,\n                description: object_raw.description,\n                icon: object_raw.icon,\n                maximize_on_start: object_raw.maximizeOnStart,\n                background: object_raw.background,\n                filetype_associations: object_raw.filetypeAssociations,\n                metadata: object_raw.metadata,\n            };\n\n            options = { id: { name: args[0] }, object: object };\n        }\n\n        // Call the original chat.complete method\n        return await utils.make_driver_method(['object'], 'puter-apps', undefined, 'update').call(this, options);\n    };\n\n    get = async (...args) => {\n        let options = {};\n\n        // if there is one string argument, assume it is the app name\n        // * allows for: puter.apps.get('example-app') *\n        if ( Array.isArray(args) && typeof args[0] === 'string' ) {\n            // if second argument is an object, assume it is the options object\n            if ( typeof args[1] === 'object' && args[1] !== null ) {\n                options.params = args[1];\n            }\n            // name\n            options.id = { name: args[0] };\n        }\n\n        // if first argument is an object, assume it is the options object\n        if ( typeof args[0] === 'object' && args[0] !== null ) {\n            options.params = args[0];\n        }\n\n        return utils.make_driver_method(['uid'], 'puter-apps', undefined, 'read').call(this, options);\n    };\n\n    delete = async (...args) => {\n        let options = {};\n        // if there is one string argument, assume it is the app name\n        // * allows for: puter.apps.get('example-app') *\n        if ( Array.isArray(args) && typeof args[0] === 'string' ) {\n            options = { id: { name: args[0] } };\n        }\n        return utils.make_driver_method(['uid'], 'puter-apps', undefined, 'delete').call(this, options);\n    };\n\n    getDeveloperProfile = function (...args) {\n        let options;\n\n        // If first argument is an object, it's the options\n        if ( typeof args[0] === 'object' && args[0] !== null ) {\n            options = args[0];\n        } else {\n            // Otherwise, we assume separate arguments are provided\n            options = {\n                success: args[0],\n                error: args[1],\n            };\n        }\n\n        return new Promise((resolve, reject) => {\n            let options;\n\n            // If first argument is an object, it's the options\n            if ( typeof args[0] === 'object' && args[0] !== null ) {\n                options = args[0];\n            } else {\n                // Otherwise, we assume separate arguments are provided\n                options = {\n                    success: args[0],\n                    error: args[1],\n                };\n            }\n\n            return new Promise((resolve, reject) => {\n                const xhr = utils.initXhr('/get-dev-profile', puter.APIOrigin, puter.authToken, 'get');\n\n                // set up event handlers for load and error events\n                utils.setupXhrEventHandlers(xhr, options.success, options.error, resolve, reject);\n\n                xhr.send();\n            });\n        });\n    };\n}\n\nexport default Apps;", "import * as utils from '../lib/utils.js';\n\nclass Auth {\n    // Used to generate a unique message id for each message sent to the host environment\n    // we start from 1 because 0 is falsy and we want to avoid that for the message id\n    #messageID = 1;\n\n    /**\n     * Creates a new instance with the given authentication token, API origin, and app ID,\n     *\n     * @class\n     * @param {string} authToken - Token used to authenticate the user.\n     * @param {string} APIOrigin - Origin of the API server. Used to build the API endpoint URLs.\n     * @param {string} appID - ID of the app to use.\n     */\n    constructor (context) {\n        this.authToken = context.authToken;\n        this.APIOrigin = context.APIOrigin;\n        this.appID = context.appID;\n    }\n\n    /**\n     * Sets a new authentication token.\n     *\n     * @param {string} authToken - The new authentication token.\n     * @memberof [Auth]\n     * @returns {void}\n     */\n    setAuthToken (authToken) {\n        this.authToken = authToken;\n    }\n\n    /**\n     * Sets the API origin.\n     *\n     * @param {string} APIOrigin - The new API origin.\n     * @memberof [Auth]\n     * @returns {void}\n     */\n    setAPIOrigin (APIOrigin) {\n        this.APIOrigin = APIOrigin;\n    }\n\n    signIn = (options) => {\n        options = options || {};\n\n        return new Promise((resolve, reject) => {\n            let msg_id = this.#messageID++;\n            let w = 600;\n            let h = 600;\n            let title = 'Puter';\n            var left = (screen.width / 2) - (w / 2);\n            var top = (screen.height / 2) - (h / 2);\n\n            // Store reference to the popup window\n            const popup = window.open(`${puter.defaultGUIOrigin}/action/sign-in?embedded_in_popup=true&msg_id=${msg_id}${window.crossOriginIsolated ? '&cross_origin_isolated=true' : ''}${options.attempt_temp_user_creation ? '&attempt_temp_user_creation=true' : ''}`,\n                            title,\n                            `toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=${w}, height=${h}, top=${top}, left=${left}`);\n\n            // Set up interval to check if popup was closed\n            const checkClosed = setInterval(() => {\n                if ( popup.closed ) {\n                    clearInterval(checkClosed);\n                    // Remove the message listener\n                    window.removeEventListener('message', messageHandler);\n                    reject({ error: 'auth_window_closed', msg: 'Authentication window was closed by the user without completing the process.' });\n                }\n            }, 100);\n\n            function messageHandler (e) {\n                if ( e.data.msg_id == msg_id ) {\n                    // Clear the interval since we got a response\n                    clearInterval(checkClosed);\n\n                    // remove redundant attributes\n                    delete e.data.msg_id;\n                    delete e.data.msg;\n\n                    if ( e.data.success ) {\n                        // set the auth token\n                        puter.setAuthToken(e.data.token);\n\n                        resolve(e.data);\n                    } else\n                    {\n                        reject(e.data);\n                    }\n\n                    // delete the listener\n                    window.removeEventListener('message', messageHandler);\n                }\n            }\n\n            window.addEventListener('message', messageHandler);\n        });\n    };\n\n    isSignedIn = () => {\n        if ( puter.authToken )\n        {\n            return true;\n        }\n        else\n        {\n            return false;\n        }\n    };\n\n    getUser = function (...args) {\n        let options;\n\n        // If first argument is an object, it's the options\n        if ( typeof args[0] === 'object' && args[0] !== null ) {\n            options = args[0];\n        } else {\n            // Otherwise, we assume separate arguments are provided\n            options = {\n                success: args[0],\n                error: args[1],\n            };\n        }\n\n        return new Promise((resolve, reject) => {\n            const xhr = utils.initXhr('/whoami', puter.APIOrigin, puter.authToken, 'get');\n\n            // set up event handlers for load and error events\n            utils.setupXhrEventHandlers(xhr, options.success, options.error, resolve, reject);\n\n            xhr.send();\n        });\n    };\n\n    signOut = () => {\n        puter.resetAuthToken();\n    };\n\n    async whoami () {\n        try {\n            const resp = await fetch(`${this.APIOrigin}/whoami`, {\n                headers: {\n                    Authorization: `Bearer ${this.authToken}`,\n                },\n            });\n\n            const result = await resp.json();\n\n            // Log the response\n            if ( globalThis.puter?.apiCallLogger?.isEnabled() ) {\n                globalThis.puter.apiCallLogger.logRequest({\n                    service: 'auth',\n                    operation: 'whoami',\n                    params: {},\n                    result: result,\n                });\n            }\n\n            return result;\n        } catch ( error ) {\n            // Log the error\n            if ( globalThis.puter?.apiCallLogger?.isEnabled() ) {\n                globalThis.puter.apiCallLogger.logRequest({\n                    service: 'auth',\n                    operation: 'whoami',\n                    params: {},\n                    error: {\n                        message: error.message || error.toString(),\n                        stack: error.stack,\n                    },\n                });\n            }\n            throw error;\n        }\n    }\n\n    async getMonthlyUsage () {\n        try {\n            const resp = await fetch(`${this.APIOrigin}/metering/usage`, {\n                headers: {\n                    Authorization: `Bearer ${this.authToken}`,\n                },\n            });\n\n            const result = await resp.json();\n\n            // Log the response\n            if ( globalThis.puter?.apiCallLogger?.isEnabled() ) {\n                globalThis.puter.apiCallLogger.logRequest({\n                    service: 'auth',\n                    operation: 'usage',\n                    params: {},\n                    result: result,\n                });\n            }\n\n            return result;\n        } catch ( error ) {\n            // Log the error\n            if ( globalThis.puter?.apiCallLogger?.isEnabled() ) {\n                globalThis.puter.apiCallLogger.logRequest({\n                    service: 'auth',\n                    operation: 'usage',\n                    params: {},\n                    error: {\n                        message: error.message || error.toString(),\n                        stack: error.stack,\n                    },\n                });\n            }\n            throw error;\n        }\n    }\n\n    async getDetailedAppUsage (appId) {\n        if ( ! appId ) {\n            throw new Error('appId is required');\n        }\n\n        try {\n            const resp = await fetch(`${this.APIOrigin}/metering/usage/${appId}`, {\n                headers: {\n                    Authorization: `Bearer ${this.authToken}`,\n                },\n            });\n\n            const result = await resp.json();\n\n            // Log the response\n            if ( globalThis.puter?.apiCallLogger?.isEnabled() ) {\n                globalThis.puter.apiCallLogger.logRequest({\n                    service: 'auth',\n                    operation: 'detailed_app_usage',\n                    params: { appId },\n                    result: result,\n                });\n            }\n\n            return result;\n        } catch ( error ) {\n            // Log the error\n            if ( globalThis.puter?.apiCallLogger?.isEnabled() ) {\n                globalThis.puter.apiCallLogger.logRequest({\n                    service: 'auth',\n                    operation: 'detailed_app_usage',\n                    params: { appId },\n                    error: {\n                        message: error.message || error.toString(),\n                        stack: error.stack,\n                    },\n                });\n            }\n            throw error;\n        }\n    }\n\n    async getGlobalUsage () {\n        try {\n            const resp = await fetch(`${this.APIOrigin}/metering/globalUsage`, {\n                headers: {\n                    Authorization: `Bearer ${this.authToken}`,\n                },\n            });\n\n            const result = await resp.json();\n\n            // Log the response\n            if ( globalThis.puter?.apiCallLogger?.isEnabled() ) {\n                globalThis.puter.apiCallLogger.logRequest({\n                    service: 'auth',\n                    operation: 'global_usage',\n                    params: {},\n                    result: result,\n                });\n            }\n\n            return result;\n        } catch ( error ) {\n            // Log the error\n            if ( globalThis.puter?.apiCallLogger?.isEnabled() ) {\n                globalThis.puter.apiCallLogger.logRequest({\n                    service: 'auth',\n                    operation: 'global_usage',\n                    params: {},\n                    error: {\n                        message: error.message || error.toString(),\n                        stack: error.stack,\n                    },\n                });\n            }\n            throw error;\n        }\n    }\n}\n\nexport default Auth;", "export class Debug {\n    constructor (context, parameters) {\n        this.context = context;\n        this.parameters = parameters;\n\n        this._init();\n    }\n\n    _init () {\n        // Check query parameter 'enabled_logs'\n        const url = new URL(location.href);\n        let enabled_logs = url.searchParams.get('enabled_logs');\n        if ( ! enabled_logs ) enabled_logs = '';\n        enabled_logs = enabled_logs.split(';');\n        for ( const category of enabled_logs ) {\n            if ( category === '' ) continue;\n            this.context.puter.logger.on(category);\n        }\n\n        globalThis.addEventListener('message', async e => {\n            // Ensure message is from parent window\n            if ( e.source !== globalThis.parent ) return;\n            // (parent window is allowed to be anything)\n\n            // Check if it's a debug message\n            if ( ! e.data.$ ) return;\n            if ( e.data.$ !== 'puterjs-debug' ) return;\n\n            // It's okay to log this; it will only show if a\n            // developer does something in the console.\n            console.log('Got a puter.js debug event!', e.data);\n\n            if ( e.data.cmd === 'log.on' ) {\n                console.log('Got instruction to turn logs on!');\n                this.context.puter.logger.on(e.data.category);\n            }\n        });\n    }\n}\n", "class FetchDriverCallBackend {\n    constructor ({ context }) {\n        this.context = context;\n        this.response_handlers = this.constructor.response_handlers;\n    }\n\n    static response_handlers = {\n        'application/x-ndjson': async resp => {\n            const Stream = async function* Stream (readableStream) {\n                const reader = readableStream.getReader();\n                let value, done;\n                while ( !done ) {\n                    ({ value, done } = await reader.read());\n                    if ( done ) break;\n                    const parts = (new TextDecoder().decode(value).split('\\n'));\n                    for ( const part of parts ) {\n                        if ( part.trim() === '' ) continue;\n                        yield JSON.parse(part);\n                    }\n                }\n            };\n\n            return Stream(resp.body);\n        },\n        'application/json': async resp => {\n            return await resp.json();\n        },\n        'application/octet-stream': async resp => {\n            return await resp.blob();\n        },\n    };\n\n    async call ({ driver, method_name, parameters }) {\n        try {\n            const resp = await fetch(`${this.context.APIOrigin}/drivers/call`, {\n                headers: {\n                    'Content-Type': 'text/plain;actually=json',\n                },\n                method: 'POST',\n                body: JSON.stringify({\n                    'interface': driver.iface_name,\n                    ...(driver.service_name\n                        ? { service: driver.service_name }\n                        : {}),\n                    method: method_name,\n                    args: parameters,\n                    auth_token: this.context.authToken,\n                }),\n            });\n\n            const content_type = resp.headers.get('content-type')\n                .split(';')[0].trim(); // TODO: parser for Content-Type\n            const handler = this.response_handlers[content_type];\n            if ( ! handler ) {\n                const msg = `unrecognized content type: ${content_type}`;\n                console.error(msg);\n                console.error('creating blob so dev tools shows response...');\n                await resp.blob();\n\n                // Log the error\n                if ( globalThis.puter?.apiCallLogger?.isEnabled() ) {\n                    globalThis.puter.apiCallLogger.logRequest({\n                        service: 'drivers',\n                        operation: `${driver.iface_name}::${method_name}`,\n                        params: { interface: driver.iface_name, driver: driver.service_name || driver.iface_name, method: method_name, args: parameters },\n                        error: { message: msg },\n                    });\n                }\n\n                throw new Error(msg);\n            }\n\n            const result = await handler(resp);\n\n            // Log the successful response\n            if ( globalThis.puter?.apiCallLogger?.isEnabled() ) {\n                globalThis.puter.apiCallLogger.logRequest({\n                    service: 'drivers',\n                    operation: `${driver.iface_name}::${method_name}`,\n                    params: { interface: driver.iface_name, driver: driver.service_name || driver.iface_name, method: method_name, args: parameters },\n                    result: result,\n                });\n            }\n\n            return result;\n        } catch ( error ) {\n            // Log unexpected errors\n            if ( globalThis.puter?.apiCallLogger?.isEnabled() ) {\n                globalThis.puter.apiCallLogger.logRequest({\n                    service: 'drivers',\n                    operation: `${driver.iface_name}::${method_name}`,\n                    params: { interface: driver.iface_name, driver: driver.service_name || driver.iface_name, method: method_name, args: parameters },\n                    error: {\n                        message: error.message || error.toString(),\n                        stack: error.stack,\n                    },\n                });\n            }\n            throw error;\n        }\n    }\n}\n\nclass Driver {\n    constructor ({\n        iface,\n        iface_name,\n        service_name,\n        call_backend,\n    }) {\n        this.iface = iface;\n        this.iface_name = iface_name;\n        this.service_name = service_name;\n        this.call_backend = call_backend;\n    }\n    async call (method_name, parameters) {\n        return await this.call_backend.call({\n            driver: this,\n            method_name,\n            parameters,\n        });\n    }\n}\n\nclass Drivers {\n    /**\n     * Creates a new instance with the given authentication token, API origin, and app ID,\n     *\n     * @class\n     * @param {string} authToken - Token used to authenticate the user.\n     * @param {string} APIOrigin - Origin of the API server. Used to build the API endpoint URLs.\n     * @param {string} appID - ID of the app to use.\n     */\n    constructor (context) {\n        this.authToken = context.authToken;\n        this.APIOrigin = context.APIOrigin;\n        this.appID = context.appID;\n\n        // Driver-specific\n        this.drivers_ = {};\n\n        // TODO: replace with `context` from constructor and test site login\n        this.context = {};\n        Object.defineProperty(this.context, 'authToken', {\n            get: () => this.authToken,\n        });\n        Object.defineProperty(this.context, 'APIOrigin', {\n            get: () => this.APIOrigin,\n        });\n    }\n\n    _init ({ puter }) {\n        puter.call = this.call.bind(this);\n    }\n\n    /**\n     * Sets a new authentication token and resets the socket connection with the updated token, if applicable.\n     *\n     * @param {string} authToken - The new authentication token.\n     * @memberof [AI]\n     * @returns {void}\n     */\n    setAuthToken (authToken) {\n        this.authToken = authToken;\n    }\n\n    /**\n     * Sets the API origin.\n     *\n     * @param {string} APIOrigin - The new API origin.\n     * @memberof [AI]\n     * @returns {void}\n     */\n    setAPIOrigin (APIOrigin) {\n        this.APIOrigin = APIOrigin;\n    }\n\n    async list () {\n        try {\n            const resp = await fetch(`${this.APIOrigin}/lsmod`, {\n                headers: {\n                    Authorization: `Bearer ${ this.authToken}`,\n                },\n                method: 'POST',\n            });\n\n            const list = await resp.json();\n\n            // Log the response\n            if ( globalThis.puter?.apiCallLogger?.isEnabled() ) {\n                globalThis.puter.apiCallLogger.logRequest({\n                    service: 'drivers',\n                    operation: 'list',\n                    params: {},\n                    result: list.interfaces,\n                });\n            }\n\n            return list.interfaces;\n        } catch ( error ) {\n            // Log the error\n            if ( globalThis.puter?.apiCallLogger?.isEnabled() ) {\n                globalThis.puter.apiCallLogger.logRequest({\n                    service: 'drivers',\n                    operation: 'list',\n                    params: {},\n                    error: {\n                        message: error.message || error.toString(),\n                        stack: error.stack,\n                    },\n                });\n            }\n            throw error;\n        }\n    }\n\n    async get (iface_name, service_name) {\n        if ( ! service_name ) service_name = iface_name;\n        const key = `${iface_name}:${service_name}`;\n        if ( this.drivers_[key] ) return this.drivers_[key];\n\n        // const interfaces = await this.list();\n        // if ( ! interfaces[iface_name] ) {\n        //     throw new Error(`Interface ${iface_name} not found`);\n        // }\n\n        return this.drivers_[key] = new Driver ({\n            call_backend: new FetchDriverCallBackend({\n                context: this.context,\n            }),\n            // iface: interfaces[iface_name],\n            iface_name,\n            service_name,\n        });\n    }\n\n    async call (...a) {\n        let iface_name, service_name, method_name, parameters;\n\n        // Services with the same name as an interface they implement\n        // are considered the default implementation for that interface.\n        //\n        // A method with the same name as the interface and service it is\n        // called on can be left unspecified in a driver call through puter.js.\n        //\n        // For example:\n        // puter.drivers.call('ipgeo', { ip: '1.2.3.4' });\n        //\n        // Is the same as:\n        // puter.drivers.call('ipgeo', 'ipgeo', 'ipgeo', { ip: '1.2.3.4' })\n        //\n        // This is commonly the case when an interface only exists to\n        // connect a particular service to the drivers API. In this case,\n        // the interface might not specify the structure of the response\n        // because it is only intended for that specific integration\n        // (and that integration alone is responsible for avoiding regressions)\n\n        // interface name, service name, method name, parameters\n        if ( a.length === 4 ) {\n            ([iface_name, service_name, method_name, parameters] = a);\n        }\n        // interface name, method name, parameters\n        else if ( a.length === 3 ) {\n            ([iface_name, method_name, parameters] = a);\n        }\n        // interface name, parameters\n        else if ( a.length === 2 ) {\n            ([iface_name, parameters] = a);\n            method_name = iface_name;\n        }\n\n        const driver = await this.get(iface_name, service_name);\n        return await driver.call(method_name, parameters);\n    }\n\n}\n\nexport default Drivers;\n", "/*!\n * Socket.IO v4.7.2\n * (c) 2014-2023 Guillermo Rauch\n * Released under the MIT License.\n */\nconst t=Object.create(null);t.open=\"0\",t.close=\"1\",t.ping=\"2\",t.pong=\"3\",t.message=\"4\",t.upgrade=\"5\",t.noop=\"6\";const e=Object.create(null);Object.keys(t).forEach((s=>{e[t[s]]=s}));const s={type:\"error\",data:\"parser error\"},n=\"function\"==typeof Blob||\"undefined\"!=typeof Blob&&\"[object BlobConstructor]\"===Object.prototype.toString.call(Blob),i=\"function\"==typeof ArrayBuffer,r=t=>\"function\"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,o=({type:e,data:s},o,h)=>n&&s instanceof Blob?o?h(s):a(s,h):i&&(s instanceof ArrayBuffer||r(s))?o?h(s):a(new Blob([s]),h):h(t[e]+(s||\"\")),a=(t,e)=>{const s=new FileReader;return s.onload=function(){const t=s.result.split(\",\")[1];e(\"b\"+(t||\"\"))},s.readAsDataURL(t)};function h(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let c;const u=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",p=\"undefined\"==typeof Uint8Array?[]:new Uint8Array(256);for(let t=0;t<64;t++)p[u.charCodeAt(t)]=t;const l=\"function\"==typeof ArrayBuffer,d=(t,n)=>{if(\"string\"!=typeof t)return{type:\"message\",data:y(t,n)};const i=t.charAt(0);if(\"b\"===i)return{type:\"message\",data:f(t.substring(1),n)};return e[i]?t.length>1?{type:e[i],data:t.substring(1)}:{type:e[i]}:s},f=(t,e)=>{if(l){const s=(t=>{let e,s,n,i,r,o=.75*t.length,a=t.length,h=0;\"=\"===t[t.length-1]&&(o--,\"=\"===t[t.length-2]&&o--);const c=new ArrayBuffer(o),u=new Uint8Array(c);for(e=0;e<a;e+=4)s=p[t.charCodeAt(e)],n=p[t.charCodeAt(e+1)],i=p[t.charCodeAt(e+2)],r=p[t.charCodeAt(e+3)],u[h++]=s<<2|n>>4,u[h++]=(15&n)<<4|i>>2,u[h++]=(3&i)<<6|63&r;return c})(t);return y(s,e)}return{base64:!0,data:t}},y=(t,e)=>\"blob\"===e?t instanceof Blob?t:new Blob([t]):t instanceof ArrayBuffer?t:t.buffer,g=String.fromCharCode(30);function m(){return new TransformStream({transform(t,e){!function(t,e){n&&t.data instanceof Blob?t.data.arrayBuffer().then(h).then(e):i&&(t.data instanceof ArrayBuffer||r(t.data))?e(h(t.data)):o(t,!1,(t=>{c||(c=new TextEncoder),e(c.encode(t))}))}(t,(s=>{const n=s.length;let i;if(n<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,n);else if(n<65536){i=new Uint8Array(3);const t=new DataView(i.buffer);t.setUint8(0,126),t.setUint16(1,n)}else{i=new Uint8Array(9);const t=new DataView(i.buffer);t.setUint8(0,127),t.setBigUint64(1,BigInt(n))}t.data&&\"string\"!=typeof t.data&&(i[0]|=128),e.enqueue(i),e.enqueue(s)}))}})}let b;function v(t){return t.reduce(((t,e)=>t+e.length),0)}function w(t,e){if(t[0].length===e)return t.shift();const s=new Uint8Array(e);let n=0;for(let i=0;i<e;i++)s[i]=t[0][n++],n===t[0].length&&(t.shift(),n=0);return t.length&&n<t[0].length&&(t[0]=t[0].slice(n)),s}function k(t){if(t)return function(t){for(var e in k.prototype)t[e]=k.prototype[e];return t}(t)}k.prototype.on=k.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[\"$\"+t]=this._callbacks[\"$\"+t]||[]).push(e),this},k.prototype.once=function(t,e){function s(){this.off(t,s),e.apply(this,arguments)}return s.fn=e,this.on(t,s),this},k.prototype.off=k.prototype.removeListener=k.prototype.removeAllListeners=k.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var s,n=this._callbacks[\"$\"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks[\"$\"+t],this;for(var i=0;i<n.length;i++)if((s=n[i])===e||s.fn===e){n.splice(i,1);break}return 0===n.length&&delete this._callbacks[\"$\"+t],this},k.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),s=this._callbacks[\"$\"+t],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(s){n=0;for(var i=(s=s.slice(0)).length;n<i;++n)s[n].apply(this,e)}return this},k.prototype.emitReserved=k.prototype.emit,k.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[\"$\"+t]||[]},k.prototype.hasListeners=function(t){return!!this.listeners(t).length};const _=\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:Function(\"return this\")();function E(t,...e){return e.reduce(((e,s)=>(t.hasOwnProperty(s)&&(e[s]=t[s]),e)),{})}const A=_.setTimeout,O=_.clearTimeout;function T(t,e){e.useNativeTimers?(t.setTimeoutFn=A.bind(_),t.clearTimeoutFn=O.bind(_)):(t.setTimeoutFn=_.setTimeout.bind(_),t.clearTimeoutFn=_.clearTimeout.bind(_))}class R extends Error{constructor(t,e,s){super(t),this.description=e,this.context=s,this.type=\"TransportError\"}}class C extends k{constructor(t){super(),this.writable=!1,T(this,t),this.opts=t,this.query=t.query,this.socket=t.socket}onError(t,e,s){return super.emitReserved(\"error\",new R(t,e,s)),this}open(){return this.readyState=\"opening\",this.doOpen(),this}close(){return\"opening\"!==this.readyState&&\"open\"!==this.readyState||(this.doClose(),this.onClose()),this}send(t){\"open\"===this.readyState&&this.write(t)}onOpen(){this.readyState=\"open\",this.writable=!0,super.emitReserved(\"open\")}onData(t){const e=d(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved(\"packet\",t)}onClose(t){this.readyState=\"closed\",super.emitReserved(\"close\",t)}pause(t){}createUri(t,e={}){return t+\"://\"+this._hostname()+this._port()+this.opts.path+this._query(e)}_hostname(){const t=this.opts.hostname;return-1===t.indexOf(\":\")?t:\"[\"+t+\"]\"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?\":\"+this.opts.port:\"\"}_query(t){const e=function(t){let e=\"\";for(let s in t)t.hasOwnProperty(s)&&(e.length&&(e+=\"&\"),e+=encodeURIComponent(s)+\"=\"+encodeURIComponent(t[s]));return e}(t);return e.length?\"?\"+e:\"\"}}const B=\"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_\".split(\"\"),N=64,S={};let x,L=0,q=0;function P(t){let e=\"\";do{e=B[t%N]+e,t=Math.floor(t/N)}while(t>0);return e}function j(){const t=P(+new Date);return t!==x?(L=0,x=t):t+\".\"+P(L++)}for(;q<N;q++)S[B[q]]=q;let U=!1;try{U=\"undefined\"!=typeof XMLHttpRequest&&\"withCredentials\"in new XMLHttpRequest}catch(t){}const D=U;function I(t){const e=t.xdomain;try{if(\"undefined\"!=typeof XMLHttpRequest&&(!e||D))return new XMLHttpRequest}catch(t){}if(!e)try{return new(_[[\"Active\"].concat(\"Object\").join(\"X\")])(\"Microsoft.XMLHTTP\")}catch(t){}}function F(){}const M=null!=new I({xdomain:!1}).responseType;class V extends k{constructor(t,e){super(),T(this,e),this.opts=e,this.method=e.method||\"GET\",this.uri=t,this.data=void 0!==e.data?e.data:null,this.create()}create(){var t;const e=E(this.opts,\"agent\",\"pfx\",\"key\",\"passphrase\",\"cert\",\"ca\",\"ciphers\",\"rejectUnauthorized\",\"autoUnref\");e.xdomain=!!this.opts.xd;const s=this.xhr=new I(e);try{s.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let t in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(t)&&s.setRequestHeader(t,this.opts.extraHeaders[t])}}catch(t){}if(\"POST\"===this.method)try{s.setRequestHeader(\"Content-type\",\"text/plain;charset=UTF-8\")}catch(t){}try{s.setRequestHeader(\"Accept\",\"*/*\")}catch(t){}null===(t=this.opts.cookieJar)||void 0===t||t.addCookies(s),\"withCredentials\"in s&&(s.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(s.timeout=this.opts.requestTimeout),s.onreadystatechange=()=>{var t;3===s.readyState&&(null===(t=this.opts.cookieJar)||void 0===t||t.parseCookies(s)),4===s.readyState&&(200===s.status||1223===s.status?this.onLoad():this.setTimeoutFn((()=>{this.onError(\"number\"==typeof s.status?s.status:0)}),0))},s.send(this.data)}catch(t){return void this.setTimeoutFn((()=>{this.onError(t)}),0)}\"undefined\"!=typeof document&&(this.index=V.requestsCount++,V.requests[this.index]=this)}onError(t){this.emitReserved(\"error\",t,this.xhr),this.cleanup(!0)}cleanup(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=F,t)try{this.xhr.abort()}catch(t){}\"undefined\"!=typeof document&&delete V.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;null!==t&&(this.emitReserved(\"data\",t),this.emitReserved(\"success\"),this.cleanup())}abort(){this.cleanup()}}if(V.requestsCount=0,V.requests={},\"undefined\"!=typeof document)if(\"function\"==typeof attachEvent)attachEvent(\"onunload\",H);else if(\"function\"==typeof addEventListener){addEventListener(\"onpagehide\"in _?\"pagehide\":\"unload\",H,!1)}function H(){for(let t in V.requests)V.requests.hasOwnProperty(t)&&V.requests[t].abort()}const K=\"function\"==typeof Promise&&\"function\"==typeof Promise.resolve?t=>Promise.resolve().then(t):(t,e)=>e(t,0),Y=_.WebSocket||_.MozWebSocket,W=\"undefined\"!=typeof navigator&&\"string\"==typeof navigator.product&&\"reactnative\"===navigator.product.toLowerCase();const z={websocket:class extends C{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return\"websocket\"}doOpen(){if(!this.check())return;const t=this.uri(),e=this.opts.protocols,s=W?{}:E(this.opts,\"agent\",\"perMessageDeflate\",\"pfx\",\"key\",\"passphrase\",\"cert\",\"ca\",\"ciphers\",\"rejectUnauthorized\",\"localAddress\",\"protocolVersion\",\"origin\",\"maxPayload\",\"family\",\"checkServerIdentity\");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=W?new Y(t,e,s):e?new Y(t,e):new Y(t)}catch(t){return this.emitReserved(\"error\",t)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:\"websocket connection closed\",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError(\"websocket error\",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const s=t[e],n=e===t.length-1;o(s,this.supportsBinary,(t=>{try{this.ws.send(t)}catch(t){}n&&K((()=>{this.writable=!0,this.emitReserved(\"drain\")}),this.setTimeoutFn)}))}}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?\"wss\":\"ws\",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=j()),this.supportsBinary||(e.b64=1),this.createUri(t,e)}check(){return!!Y}},webtransport:class extends C{get name(){return\"webtransport\"}doOpen(){\"function\"==typeof WebTransport&&(this.transport=new WebTransport(this.createUri(\"https\"),this.opts.transportOptions[this.name]),this.transport.closed.then((()=>{this.onClose()})).catch((t=>{this.onError(\"webtransport error\",t)})),this.transport.ready.then((()=>{this.transport.createBidirectionalStream().then((t=>{const e=function(t,e){b||(b=new TextDecoder);const n=[];let i=0,r=-1,o=!1;return new TransformStream({transform(a,h){for(n.push(a);;){if(0===i){if(v(n)<1)break;const t=w(n,1);o=128==(128&t[0]),r=127&t[0],i=r<126?3:126===r?1:2}else if(1===i){if(v(n)<2)break;const t=w(n,2);r=new DataView(t.buffer,t.byteOffset,t.length).getUint16(0),i=3}else if(2===i){if(v(n)<8)break;const t=w(n,8),e=new DataView(t.buffer,t.byteOffset,t.length),o=e.getUint32(0);if(o>Math.pow(2,21)-1){h.enqueue(s);break}r=o*Math.pow(2,32)+e.getUint32(4),i=3}else{if(v(n)<r)break;const t=w(n,r);h.enqueue(d(o?t:b.decode(t),e)),i=0}if(0===r||r>t){h.enqueue(s);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=t.readable.pipeThrough(e).getReader(),i=m();i.readable.pipeTo(t.writable),this.writer=i.writable.getWriter();const r=()=>{n.read().then((({done:t,value:e})=>{t||(this.onPacket(e),r())})).catch((t=>{}))};r();const o={type:\"open\"};this.query.sid&&(o.data=`{\"sid\":\"${this.query.sid}\"}`),this.writer.write(o).then((()=>this.onOpen()))}))})))}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const s=t[e],n=e===t.length-1;this.writer.write(s).then((()=>{n&&K((()=>{this.writable=!0,this.emitReserved(\"drain\")}),this.setTimeoutFn)}))}}doClose(){var t;null===(t=this.transport)||void 0===t||t.close()}},polling:class extends C{constructor(t){if(super(t),this.polling=!1,\"undefined\"!=typeof location){const e=\"https:\"===location.protocol;let s=location.port;s||(s=e?\"443\":\"80\"),this.xd=\"undefined\"!=typeof location&&t.hostname!==location.hostname||s!==t.port}const e=t&&t.forceBase64;this.supportsBinary=M&&!e,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return\"polling\"}doOpen(){this.poll()}pause(t){this.readyState=\"pausing\";const e=()=>{this.readyState=\"paused\",t()};if(this.polling||!this.writable){let t=0;this.polling&&(t++,this.once(\"pollComplete\",(function(){--t||e()}))),this.writable||(t++,this.once(\"drain\",(function(){--t||e()})))}else e()}poll(){this.polling=!0,this.doPoll(),this.emitReserved(\"poll\")}onData(t){((t,e)=>{const s=t.split(g),n=[];for(let t=0;t<s.length;t++){const i=d(s[t],e);if(n.push(i),\"error\"===i.type)break}return n})(t,this.socket.binaryType).forEach((t=>{if(\"opening\"===this.readyState&&\"open\"===t.type&&this.onOpen(),\"close\"===t.type)return this.onClose({description:\"transport closed by the server\"}),!1;this.onPacket(t)})),\"closed\"!==this.readyState&&(this.polling=!1,this.emitReserved(\"pollComplete\"),\"open\"===this.readyState&&this.poll())}doClose(){const t=()=>{this.write([{type:\"close\"}])};\"open\"===this.readyState?t():this.once(\"open\",t)}write(t){this.writable=!1,((t,e)=>{const s=t.length,n=new Array(s);let i=0;t.forEach(((t,r)=>{o(t,!1,(t=>{n[r]=t,++i===s&&e(n.join(g))}))}))})(t,(t=>{this.doWrite(t,(()=>{this.writable=!0,this.emitReserved(\"drain\")}))}))}uri(){const t=this.opts.secure?\"https\":\"http\",e=this.query||{};return!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=j()),this.supportsBinary||e.sid||(e.b64=1),this.createUri(t,e)}request(t={}){return Object.assign(t,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new V(this.uri(),t)}doWrite(t,e){const s=this.request({method:\"POST\",data:t});s.on(\"success\",e),s.on(\"error\",((t,e)=>{this.onError(\"xhr post error\",t,e)}))}doPoll(){const t=this.request();t.on(\"data\",this.onData.bind(this)),t.on(\"error\",((t,e)=>{this.onError(\"xhr poll error\",t,e)})),this.pollXhr=t}}},J=/^(?:(?![^:@\\/?#]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@\\/?#]*)(?::([^:@\\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/,$=[\"source\",\"protocol\",\"authority\",\"userInfo\",\"user\",\"password\",\"host\",\"port\",\"relative\",\"path\",\"directory\",\"file\",\"query\",\"anchor\"];function Q(t){const e=t,s=t.indexOf(\"[\"),n=t.indexOf(\"]\");-1!=s&&-1!=n&&(t=t.substring(0,s)+t.substring(s,n).replace(/:/g,\";\")+t.substring(n,t.length));let i=J.exec(t||\"\"),r={},o=14;for(;o--;)r[$[o]]=i[o]||\"\";return-1!=s&&-1!=n&&(r.source=e,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,\":\"),r.authority=r.authority.replace(\"[\",\"\").replace(\"]\",\"\").replace(/;/g,\":\"),r.ipv6uri=!0),r.pathNames=function(t,e){const s=/\\/{2,9}/g,n=e.replace(s,\"/\").split(\"/\");\"/\"!=e.slice(0,1)&&0!==e.length||n.splice(0,1);\"/\"==e.slice(-1)&&n.splice(n.length-1,1);return n}(0,r.path),r.queryKey=function(t,e){const s={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(t,e,n){e&&(s[e]=n)})),s}(0,r.query),r}class X extends k{constructor(t,e={}){super(),this.binaryType=\"arraybuffer\",this.writeBuffer=[],t&&\"object\"==typeof t&&(e=t,t=null),t?(t=Q(t),e.hostname=t.host,e.secure=\"https\"===t.protocol||\"wss\"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=Q(e.host).host),T(this,e),this.secure=null!=e.secure?e.secure:\"undefined\"!=typeof location&&\"https:\"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?\"443\":\"80\"),this.hostname=e.hostname||(\"undefined\"!=typeof location?location.hostname:\"localhost\"),this.port=e.port||(\"undefined\"!=typeof location&&location.port?location.port:this.secure?\"443\":\"80\"),this.transports=e.transports||[\"polling\",\"websocket\",\"webtransport\"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:\"/engine.io\",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:\"t\",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},e),this.opts.path=this.opts.path.replace(/\\/$/,\"\")+(this.opts.addTrailingSlash?\"/\":\"\"),\"string\"==typeof this.opts.query&&(this.opts.query=function(t){let e={},s=t.split(\"&\");for(let t=0,n=s.length;t<n;t++){let n=s[t].split(\"=\");e[decodeURIComponent(n[0])]=decodeURIComponent(n[1])}return e}(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,\"function\"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener(\"beforeunload\",this.beforeunloadEventListener,!1)),\"localhost\"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose(\"transport close\",{description:\"network connection lost\"})},addEventListener(\"offline\",this.offlineEventListener,!1))),this.open()}createTransport(t){const e=Object.assign({},this.opts.query);e.EIO=4,e.transport=t,this.id&&(e.sid=this.id);const s=Object.assign({},this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new z[t](s)}open(){let t;if(this.opts.rememberUpgrade&&X.priorWebsocketSuccess&&-1!==this.transports.indexOf(\"websocket\"))t=\"websocket\";else{if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved(\"error\",\"No transports available\")}),0);t=this.transports[0]}this.readyState=\"opening\";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on(\"drain\",this.onDrain.bind(this)).on(\"packet\",this.onPacket.bind(this)).on(\"error\",this.onError.bind(this)).on(\"close\",(t=>this.onClose(\"transport close\",t)))}probe(t){let e=this.createTransport(t),s=!1;X.priorWebsocketSuccess=!1;const n=()=>{s||(e.send([{type:\"ping\",data:\"probe\"}]),e.once(\"packet\",(t=>{if(!s)if(\"pong\"===t.type&&\"probe\"===t.data){if(this.upgrading=!0,this.emitReserved(\"upgrading\",e),!e)return;X.priorWebsocketSuccess=\"websocket\"===e.name,this.transport.pause((()=>{s||\"closed\"!==this.readyState&&(c(),this.setTransport(e),e.send([{type:\"upgrade\"}]),this.emitReserved(\"upgrade\",e),e=null,this.upgrading=!1,this.flush())}))}else{const t=new Error(\"probe error\");t.transport=e.name,this.emitReserved(\"upgradeError\",t)}})))};function i(){s||(s=!0,c(),e.close(),e=null)}const r=t=>{const s=new Error(\"probe error: \"+t);s.transport=e.name,i(),this.emitReserved(\"upgradeError\",s)};function o(){r(\"transport closed\")}function a(){r(\"socket closed\")}function h(t){e&&t.name!==e.name&&i()}const c=()=>{e.removeListener(\"open\",n),e.removeListener(\"error\",r),e.removeListener(\"close\",o),this.off(\"close\",a),this.off(\"upgrading\",h)};e.once(\"open\",n),e.once(\"error\",r),e.once(\"close\",o),this.once(\"close\",a),this.once(\"upgrading\",h),-1!==this.upgrades.indexOf(\"webtransport\")&&\"webtransport\"!==t?this.setTimeoutFn((()=>{s||e.open()}),200):e.open()}onOpen(){if(this.readyState=\"open\",X.priorWebsocketSuccess=\"websocket\"===this.transport.name,this.emitReserved(\"open\"),this.flush(),\"open\"===this.readyState&&this.opts.upgrade){let t=0;const e=this.upgrades.length;for(;t<e;t++)this.probe(this.upgrades[t])}}onPacket(t){if(\"opening\"===this.readyState||\"open\"===this.readyState||\"closing\"===this.readyState)switch(this.emitReserved(\"packet\",t),this.emitReserved(\"heartbeat\"),this.resetPingTimeout(),t.type){case\"open\":this.onHandshake(JSON.parse(t.data));break;case\"ping\":this.sendPacket(\"pong\"),this.emitReserved(\"ping\"),this.emitReserved(\"pong\");break;case\"error\":const e=new Error(\"server error\");e.code=t.data,this.onError(e);break;case\"message\":this.emitReserved(\"data\",t.data),this.emitReserved(\"message\",t.data)}}onHandshake(t){this.emitReserved(\"handshake\",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),\"closed\"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((()=>{this.onClose(\"ping timeout\")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved(\"drain\"):this.flush()}flush(){if(\"closed\"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved(\"flush\")}}getWritablePackets(){if(!(this.maxPayload&&\"polling\"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let s=0;s<this.writeBuffer.length;s++){const n=this.writeBuffer[s].data;if(n&&(t+=\"string\"==typeof(e=n)?function(t){let e=0,s=0;for(let n=0,i=t.length;n<i;n++)e=t.charCodeAt(n),e<128?s+=1:e<2048?s+=2:e<55296||e>=57344?s+=3:(n++,s+=4);return s}(e):Math.ceil(1.33*(e.byteLength||e.size))),s>0&&t>this.maxPayload)return this.writeBuffer.slice(0,s);t+=2}var e;return this.writeBuffer}write(t,e,s){return this.sendPacket(\"message\",t,e,s),this}send(t,e,s){return this.sendPacket(\"message\",t,e,s),this}sendPacket(t,e,s,n){if(\"function\"==typeof e&&(n=e,e=void 0),\"function\"==typeof s&&(n=s,s=null),\"closing\"===this.readyState||\"closed\"===this.readyState)return;(s=s||{}).compress=!1!==s.compress;const i={type:t,data:e,options:s};this.emitReserved(\"packetCreate\",i),this.writeBuffer.push(i),n&&this.once(\"flush\",n),this.flush()}close(){const t=()=>{this.onClose(\"forced close\"),this.transport.close()},e=()=>{this.off(\"upgrade\",e),this.off(\"upgradeError\",e),t()},s=()=>{this.once(\"upgrade\",e),this.once(\"upgradeError\",e)};return\"opening\"!==this.readyState&&\"open\"!==this.readyState||(this.readyState=\"closing\",this.writeBuffer.length?this.once(\"drain\",(()=>{this.upgrading?s():t()})):this.upgrading?s():t()),this}onError(t){X.priorWebsocketSuccess=!1,this.emitReserved(\"error\",t),this.onClose(\"transport error\",t)}onClose(t,e){\"opening\"!==this.readyState&&\"open\"!==this.readyState&&\"closing\"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners(\"close\"),this.transport.close(),this.transport.removeAllListeners(),\"function\"==typeof removeEventListener&&(removeEventListener(\"beforeunload\",this.beforeunloadEventListener,!1),removeEventListener(\"offline\",this.offlineEventListener,!1)),this.readyState=\"closed\",this.id=null,this.emitReserved(\"close\",t,e),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const e=[];let s=0;const n=t.length;for(;s<n;s++)~this.transports.indexOf(t[s])&&e.push(t[s]);return e}}X.protocol=4;const G=\"function\"==typeof ArrayBuffer,Z=t=>\"function\"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,tt=Object.prototype.toString,et=\"function\"==typeof Blob||\"undefined\"!=typeof Blob&&\"[object BlobConstructor]\"===tt.call(Blob),st=\"function\"==typeof File||\"undefined\"!=typeof File&&\"[object FileConstructor]\"===tt.call(File);function nt(t){return G&&(t instanceof ArrayBuffer||Z(t))||et&&t instanceof Blob||st&&t instanceof File}function it(t,e){if(!t||\"object\"!=typeof t)return!1;if(Array.isArray(t)){for(let e=0,s=t.length;e<s;e++)if(it(t[e]))return!0;return!1}if(nt(t))return!0;if(t.toJSON&&\"function\"==typeof t.toJSON&&1===arguments.length)return it(t.toJSON(),!0);for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&it(t[e]))return!0;return!1}function rt(t){const e=[],s=t.data,n=t;return n.data=ot(s,e),n.attachments=e.length,{packet:n,buffers:e}}function ot(t,e){if(!t)return t;if(nt(t)){const s={_placeholder:!0,num:e.length};return e.push(t),s}if(Array.isArray(t)){const s=new Array(t.length);for(let n=0;n<t.length;n++)s[n]=ot(t[n],e);return s}if(\"object\"==typeof t&&!(t instanceof Date)){const s={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=ot(t[n],e));return s}return t}function at(t,e){return t.data=ht(t.data,e),delete t.attachments,t}function ht(t,e){if(!t)return t;if(t&&!0===t._placeholder){if(\"number\"==typeof t.num&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error(\"illegal attachments\")}if(Array.isArray(t))for(let s=0;s<t.length;s++)t[s]=ht(t[s],e);else if(\"object\"==typeof t)for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(t[s]=ht(t[s],e));return t}const ct=[\"connect\",\"connect_error\",\"disconnect\",\"disconnecting\",\"newListener\",\"removeListener\"],ut=5;var pt;!function(t){t[t.CONNECT=0]=\"CONNECT\",t[t.DISCONNECT=1]=\"DISCONNECT\",t[t.EVENT=2]=\"EVENT\",t[t.ACK=3]=\"ACK\",t[t.CONNECT_ERROR=4]=\"CONNECT_ERROR\",t[t.BINARY_EVENT=5]=\"BINARY_EVENT\",t[t.BINARY_ACK=6]=\"BINARY_ACK\"}(pt||(pt={}));function lt(t){return\"[object Object]\"===Object.prototype.toString.call(t)}class dt extends k{constructor(t){super(),this.reviver=t}add(t){let e;if(\"string\"==typeof t){if(this.reconstructor)throw new Error(\"got plaintext data when reconstructing a packet\");e=this.decodeString(t);const s=e.type===pt.BINARY_EVENT;s||e.type===pt.BINARY_ACK?(e.type=s?pt.EVENT:pt.ACK,this.reconstructor=new ft(e),0===e.attachments&&super.emitReserved(\"decoded\",e)):super.emitReserved(\"decoded\",e)}else{if(!nt(t)&&!t.base64)throw new Error(\"Unknown type: \"+t);if(!this.reconstructor)throw new Error(\"got binary data when not reconstructing a packet\");e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved(\"decoded\",e))}}decodeString(t){let e=0;const s={type:Number(t.charAt(0))};if(void 0===pt[s.type])throw new Error(\"unknown packet type \"+s.type);if(s.type===pt.BINARY_EVENT||s.type===pt.BINARY_ACK){const n=e+1;for(;\"-\"!==t.charAt(++e)&&e!=t.length;);const i=t.substring(n,e);if(i!=Number(i)||\"-\"!==t.charAt(e))throw new Error(\"Illegal attachments\");s.attachments=Number(i)}if(\"/\"===t.charAt(e+1)){const n=e+1;for(;++e;){if(\",\"===t.charAt(e))break;if(e===t.length)break}s.nsp=t.substring(n,e)}else s.nsp=\"/\";const n=t.charAt(e+1);if(\"\"!==n&&Number(n)==n){const n=e+1;for(;++e;){const s=t.charAt(e);if(null==s||Number(s)!=s){--e;break}if(e===t.length)break}s.id=Number(t.substring(n,e+1))}if(t.charAt(++e)){const n=this.tryParse(t.substr(e));if(!dt.isPayloadValid(s.type,n))throw new Error(\"invalid payload\");s.data=n}return s}tryParse(t){try{return JSON.parse(t,this.reviver)}catch(t){return!1}}static isPayloadValid(t,e){switch(t){case pt.CONNECT:return lt(e);case pt.DISCONNECT:return void 0===e;case pt.CONNECT_ERROR:return\"string\"==typeof e||lt(e);case pt.EVENT:case pt.BINARY_EVENT:return Array.isArray(e)&&(\"number\"==typeof e[0]||\"string\"==typeof e[0]&&-1===ct.indexOf(e[0]));case pt.ACK:case pt.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class ft{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const t=at(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}var yt=Object.freeze({__proto__:null,protocol:5,get PacketType(){return pt},Encoder:class{constructor(t){this.replacer=t}encode(t){return t.type!==pt.EVENT&&t.type!==pt.ACK||!it(t)?[this.encodeAsString(t)]:this.encodeAsBinary({type:t.type===pt.EVENT?pt.BINARY_EVENT:pt.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id})}encodeAsString(t){let e=\"\"+t.type;return t.type!==pt.BINARY_EVENT&&t.type!==pt.BINARY_ACK||(e+=t.attachments+\"-\"),t.nsp&&\"/\"!==t.nsp&&(e+=t.nsp+\",\"),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){const e=rt(t),s=this.encodeAsString(e.packet),n=e.buffers;return n.unshift(s),n}},Decoder:dt});function gt(t,e,s){return t.on(e,s),function(){t.off(e,s)}}const mt=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class bt extends k{constructor(t,e,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[gt(t,\"open\",this.onopen.bind(this)),gt(t,\"packet\",this.onpacket.bind(this)),gt(t,\"error\",this.onerror.bind(this)),gt(t,\"close\",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),\"open\"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...t){return t.unshift(\"message\"),this.emit.apply(this,t),this}emit(t,...e){if(mt.hasOwnProperty(t))throw new Error('\"'+t.toString()+'\" is a reserved event name');if(e.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(e),this;const s={type:pt.EVENT,data:e,options:{}};if(s.options.compress=!1!==this.flags.compress,\"function\"==typeof e[e.length-1]){const t=this.ids++,n=e.pop();this._registerAckCallback(t,n),s.id=t}const n=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!n||!this.connected)||(this.connected?(this.notifyOutgoingListeners(s),this.packet(s)):this.sendBuffer.push(s)),this.flags={},this}_registerAckCallback(t,e){var s;const n=null!==(s=this.flags.timeout)&&void 0!==s?s:this._opts.ackTimeout;if(void 0===n)return void(this.acks[t]=e);const i=this.io.setTimeoutFn((()=>{delete this.acks[t];for(let e=0;e<this.sendBuffer.length;e++)this.sendBuffer[e].id===t&&this.sendBuffer.splice(e,1);e.call(this,new Error(\"operation has timed out\"))}),n);this.acks[t]=(...t)=>{this.io.clearTimeoutFn(i),e.apply(this,[null,...t])}}emitWithAck(t,...e){const s=void 0!==this.flags.timeout||void 0!==this._opts.ackTimeout;return new Promise(((n,i)=>{e.push(((t,e)=>s?t?i(t):n(e):n(t))),this.emit(t,...e)}))}_addToQueue(t){let e;\"function\"==typeof t[t.length-1]&&(e=t.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push(((t,...n)=>{if(s!==this._queue[0])return;return null!==t?s.tryCount>this._opts.retries&&(this._queue.shift(),e&&e(t)):(this._queue.shift(),e&&e(null,...n)),s.pending=!1,this._drainQueue()})),this._queue.push(s),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||0===this._queue.length)return;const e=this._queue[0];e.pending&&!t||(e.pending=!0,e.tryCount++,this.flags=e.flags,this.emit.apply(this,e.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){\"function\"==typeof this.auth?this.auth((t=>{this._sendConnectPacket(t)})):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:pt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved(\"connect_error\",t)}onclose(t,e){this.connected=!1,delete this.id,this.emitReserved(\"disconnect\",t,e)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case pt.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved(\"connect_error\",new Error(\"It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)\"));break;case pt.EVENT:case pt.BINARY_EVENT:this.onevent(t);break;case pt.ACK:case pt.BINARY_ACK:this.onack(t);break;case pt.DISCONNECT:this.ondisconnect();break;case pt.CONNECT_ERROR:this.destroy();const e=new Error(t.data.message);e.data=t.data.data,this.emitReserved(\"connect_error\",e)}}onevent(t){const e=t.data||[];null!=t.id&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const s of e)s.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&\"string\"==typeof t[t.length-1]&&(this._lastOffset=t[t.length-1])}ack(t){const e=this;let s=!1;return function(...n){s||(s=!0,e.packet({type:pt.ACK,id:t,data:n}))}}onack(t){const e=this.acks[t.id];\"function\"==typeof e&&(e.apply(this,t.data),delete this.acks[t.id])}onconnect(t,e){this.id=t,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this.emitReserved(\"connect\"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach((t=>this.emitEvent(t))),this.receiveBuffer=[],this.sendBuffer.forEach((t=>{this.notifyOutgoingListeners(t),this.packet(t)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose(\"io server disconnect\")}destroy(){this.subs&&(this.subs.forEach((t=>t())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:pt.DISCONNECT}),this.destroy(),this.connected&&this.onclose(\"io client disconnect\"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let s=0;s<e.length;s++)if(t===e[s])return e.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const e=this._anyOutgoingListeners;for(let s=0;s<e.length;s++)if(t===e[s])return e.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const e=this._anyOutgoingListeners.slice();for(const s of e)s.apply(this,t.data)}}}function vt(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}vt.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),s=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-s:t+s}return 0|Math.min(t,this.max)},vt.prototype.reset=function(){this.attempts=0},vt.prototype.setMin=function(t){this.ms=t},vt.prototype.setMax=function(t){this.max=t},vt.prototype.setJitter=function(t){this.jitter=t};class wt extends k{constructor(t,e){var s;super(),this.nsps={},this.subs=[],t&&\"object\"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||\"/socket.io\",this.opts=e,T(this,e),this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(s=e.randomizationFactor)&&void 0!==s?s:.5),this.backoff=new vt({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this._readyState=\"closed\",this.uri=t;const n=e.parser||yt;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=!1!==e.autoConnect,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null===(e=this.backoff)||void 0===e||e.setMin(t),this)}randomizationFactor(t){var e;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null===(e=this.backoff)||void 0===e||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null===(e=this.backoff)||void 0===e||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(t){if(~this._readyState.indexOf(\"open\"))return this;this.engine=new X(this.uri,this.opts);const e=this.engine,s=this;this._readyState=\"opening\",this.skipReconnect=!1;const n=gt(e,\"open\",(function(){s.onopen(),t&&t()})),i=e=>{this.cleanup(),this._readyState=\"closed\",this.emitReserved(\"error\",e),t?t(e):this.maybeReconnectOnOpen()},r=gt(e,\"error\",i);if(!1!==this._timeout){const t=this._timeout,s=this.setTimeoutFn((()=>{n(),i(new Error(\"timeout\")),e.close()}),t);this.opts.autoUnref&&s.unref(),this.subs.push((()=>{this.clearTimeoutFn(s)}))}return this.subs.push(n),this.subs.push(r),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState=\"open\",this.emitReserved(\"open\");const t=this.engine;this.subs.push(gt(t,\"ping\",this.onping.bind(this)),gt(t,\"data\",this.ondata.bind(this)),gt(t,\"error\",this.onerror.bind(this)),gt(t,\"close\",this.onclose.bind(this)),gt(this.decoder,\"decoded\",this.ondecoded.bind(this)))}onping(){this.emitReserved(\"ping\")}ondata(t){try{this.decoder.add(t)}catch(t){this.onclose(\"parse error\",t)}}ondecoded(t){K((()=>{this.emitReserved(\"packet\",t)}),this.setTimeoutFn)}onerror(t){this.emitReserved(\"error\",t)}socket(t,e){let s=this.nsps[t];return s?this._autoConnect&&!s.active&&s.connect():(s=new bt(this,t,e),this.nsps[t]=s),s}_destroy(t){const e=Object.keys(this.nsps);for(const t of e){if(this.nsps[t].active)return}this._close()}_packet(t){const e=this.encoder.encode(t);for(let s=0;s<e.length;s++)this.engine.write(e[s],t.options)}cleanup(){this.subs.forEach((t=>t())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose(\"forced close\"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,e){this.cleanup(),this.backoff.reset(),this._readyState=\"closed\",this.emitReserved(\"close\",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved(\"reconnect_failed\"),this._reconnecting=!1;else{const e=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn((()=>{t.skipReconnect||(this.emitReserved(\"reconnect_attempt\",t.backoff.attempts),t.skipReconnect||t.open((e=>{e?(t._reconnecting=!1,t.reconnect(),this.emitReserved(\"reconnect_error\",e)):t.onreconnect()})))}),e);this.opts.autoUnref&&s.unref(),this.subs.push((()=>{this.clearTimeoutFn(s)}))}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved(\"reconnect\",t)}}const kt={};function _t(t,e){\"object\"==typeof t&&(e=t,t=void 0);const s=function(t,e=\"\",s){let n=t;s=s||\"undefined\"!=typeof location&&location,null==t&&(t=s.protocol+\"//\"+s.host),\"string\"==typeof t&&(\"/\"===t.charAt(0)&&(t=\"/\"===t.charAt(1)?s.protocol+t:s.host+t),/^(https?|wss?):\\/\\//.test(t)||(t=void 0!==s?s.protocol+\"//\"+t:\"https://\"+t),n=Q(t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port=\"80\":/^(http|ws)s$/.test(n.protocol)&&(n.port=\"443\")),n.path=n.path||\"/\";const i=-1!==n.host.indexOf(\":\")?\"[\"+n.host+\"]\":n.host;return n.id=n.protocol+\"://\"+i+\":\"+n.port+e,n.href=n.protocol+\"://\"+i+(s&&s.port===n.port?\"\":\":\"+n.port),n}(t,(e=e||{}).path||\"/socket.io\"),n=s.source,i=s.id,r=s.path,o=kt[i]&&r in kt[i].nsps;let a;return e.forceNew||e[\"force new connection\"]||!1===e.multiplex||o?a=new wt(n,e):(kt[i]||(kt[i]=new wt(n,e)),a=kt[i]),s.query&&!e.query&&(e.query=s.queryKey),a.socket(s.path,e)}Object.assign(_t,{Manager:wt,Socket:bt,io:_t,connect:_t});export{wt as Manager,bt as Socket,_t as connect,_t as default,_t as io,ut as protocol};\n\n", "import path from '../../../lib/path.js';\n\nconst getAbsolutePathForApp = (relativePath) => {\n    // if we are in the gui environment, return the relative path as is\n    if ( puter.env === 'gui' )\n    {\n        return relativePath;\n    }\n\n    // if no relative path is provided, use the current working directory\n    if ( ! relativePath )\n    {\n        relativePath = '.';\n    }\n\n    // If relativePath is not provided, or it's not starting with a slash or tilde,\n    // it means it's a relative path. In that case, prepend the app's root directory.\n    if ( !relativePath || (!relativePath.startsWith('/') && !relativePath.startsWith('~') && puter.appID) ) {\n        relativePath = path.join('~/AppData', puter.appID, relativePath);\n    }\n\n    return relativePath;\n};\n\nexport default getAbsolutePathForApp;", "import * as utils from '../../../lib/utils.js';\nimport getAbsolutePathForApp from '../utils/getAbsolutePathForApp.js';\n\nconst copy = function (...args) {\n    let options;\n\n    // If first argument is an object, it's the options\n    if ( typeof args[0] === 'object' && args[0] !== null ) {\n        options = args[0];\n    } else {\n        // Otherwise, we assume separate arguments are provided\n        options = {\n            source: args[0],\n            destination: args[1],\n            overwrite: args[2]?.overwrite,\n            new_name: args[2]?.newName || args[2]?.new_name,\n            create_missing_parents: args[2]?.createMissingParents || args[2]?.create_missing_parents,\n            new_metadata: args[2]?.newMetadata || args[2]?.new_metadata,\n            original_client_socket_id: args[2]?.excludeSocketID || args[2]?.original_client_socket_id,\n            success: args[3],\n            error: args[4],\n            // Add more if needed...\n        };\n    }\n\n    return new Promise(async (resolve, reject) => {\n        // If auth token is not provided and we are in the web environment,\n        // try to authenticate with Puter\n        if ( !puter.authToken && puter.env === 'web' ) {\n            try {\n                await puter.ui.authenticateWithPuter();\n            } catch (e) {\n                // if authentication fails, throw an error\n                reject('Authentication failed.');\n            }\n        }\n\n        // convert paths to absolute path\n        options.source = getAbsolutePathForApp(options.source);\n        options.destination = getAbsolutePathForApp(options.destination);\n\n        // create xhr object\n        const xhr = utils.initXhr('/copy', this.APIOrigin, this.authToken);\n\n        // set up event handlers for load and error events\n        utils.setupXhrEventHandlers(xhr, options.success, options.error, resolve, reject);\n\n        xhr.send(JSON.stringify({\n            original_client_socket_id: this.socket.id,\n            socket_id: this.socket.id,\n            source: options.source,\n            destination: options.destination,\n            overwrite: options.overwrite,\n            new_name: (options.new_name || options.newName),\n            // if user is copying an item to where its source is, change the name so there is no conflict\n            dedupe_name: (options.dedupe_name || options.dedupeName),\n        }));\n    });\n};\n\nexport default copy;", "import path from '../../../lib/path.js';\nimport * as utils from '../../../lib/utils.js';\nimport getAbsolutePathForApp from '../utils/getAbsolutePathForApp.js';\n\nconst mkdir = function (...args) {\n    let options = {};\n\n    // If first argument is a string and the second is an object, or if the first is an object\n    if ( (typeof args[0] === 'string' && typeof args[1] === 'object' && !(args[1] instanceof Function)) || (typeof args[0] === 'object' && args[0] !== null) ) {\n        // If it's a string followed by an object, it means path then options\n        if ( typeof args[0] === 'string' ) {\n            options.path = args[0];\n            // Merge the options\n            Object.assign(options, args[1]);\n            options.success = args[2];\n            options.error = args[3];\n        } else {\n            options = args[0];\n        }\n    } else if ( typeof args[0] === 'string' ) {\n        // it means it's a path then functions (success and optionally error)\n        options.path = args[0];\n        options.success = args[1];\n        options.error = args[2];\n    }\n\n    return new Promise(async (resolve, reject) => {\n        // If auth token is not provided and we are in the web environment,\n        // try to authenticate with Puter\n        if ( !puter.authToken && puter.env === 'web' ) {\n            try {\n                await puter.ui.authenticateWithPuter();\n            } catch (e) {\n                // if authentication fails, throw an error\n                reject('Authentication failed.');\n            }\n        }\n\n        // create xhr object\n        const xhr = utils.initXhr('/mkdir', this.APIOrigin, this.authToken);\n\n        // set up event handlers for load and error events\n        utils.setupXhrEventHandlers(xhr, options.success, options.error, resolve, reject);\n\n        options.path = getAbsolutePathForApp(options.path);\n\n        xhr.send(JSON.stringify({\n            parent: path.dirname(options.path),\n            path:\tpath.basename(options.path),\n            overwrite: options.overwrite ?? false,\n            dedupe_name: (options.rename || options.dedupeName) ?? false,\n            shortcut_to: options.shortcutTo,\n            original_client_socket_id: this.socket.id,\n            create_missing_parents: (options.recursive || options.createMissingParents) ?? false,\n        }));\n    });\n};\n\nexport default mkdir;", "import * as utils from '../../../lib/utils.js';\nimport getAbsolutePathForApp from '../utils/getAbsolutePathForApp.js';\n\n// Track in-flight requests to avoid duplicate backend calls\n// Each entry stores: { promise, timestamp }\nconst inflightRequests = new Map();\n\n// Time window (in ms) to group duplicate requests together\n// Requests made within this window will share the same backend call\nconst DEDUPLICATION_WINDOW_MS = 2000; // 2 seconds\n\nconst stat = async function (...args) {\n    let options;\n\n    // If first argument is an object, it's the options\n    if ( typeof args[0] === 'object' && args[0] !== null ) {\n        options = args[0];\n    } else {\n        // Otherwise, we assume separate arguments are provided\n        options = {\n            path: args[0],\n            options: typeof args[1] === 'object' ? args[1] : {},\n            success: typeof args[1] === 'object' ? args[2] : args[1],\n            error: typeof args[1] === 'object' ? args[3] : args[2],\n            // Add more if needed...\n        };\n    }\n\n    return new Promise(async (resolve, reject) => {\n        // consistency levels\n        if ( ! options.consistency ) {\n            options.consistency = 'strong';\n        }\n\n        // Generate cache key based on path or uid\n        let cacheKey;\n        if ( options.path ) {\n            cacheKey = `item:${ options.path}`;\n        }\n\n        if ( options.consistency === 'eventual' && !options.returnSubdomains && !options.returnPermissions && !options.returnVersions && !options.returnSize ) {\n            // Check cache\n            const cachedResult = await puter._cache.get(cacheKey);\n            if ( cachedResult ) {\n                resolve(cachedResult);\n                return;\n            }\n        }\n\n        // Generate deduplication key based on all request parameters\n        const deduplicationKey = JSON.stringify({\n            path: options.path,\n            uid: options.uid,\n            returnSubdomains: options.returnSubdomains,\n            returnPermissions: options.returnPermissions,\n            returnVersions: options.returnVersions,\n            returnSize: options.returnSize,\n            consistency: options.consistency,\n        });\n\n        // Check if there's already an in-flight request for the same parameters\n        const existingEntry = inflightRequests.get(deduplicationKey);\n        const now = Date.now();\n\n        if ( existingEntry ) {\n            const timeSinceRequest = now - existingEntry.timestamp;\n\n            // Only reuse the request if it's within the deduplication window\n            if ( timeSinceRequest < DEDUPLICATION_WINDOW_MS ) {\n                // Wait for the existing request and return its result\n                try {\n                    const result = await existingEntry.promise;\n                    resolve(result);\n                } catch ( error ) {\n                    reject(error);\n                }\n                return;\n            } else {\n                // Request is too old, remove it from the tracker\n                inflightRequests.delete(deduplicationKey);\n            }\n        }\n\n        // Create a promise for this request and store it to deduplicate concurrent calls\n        const requestPromise = new Promise(async (resolveRequest, rejectRequest) => {\n            // If auth token is not provided and we are in the web environment,\n            // try to authenticate with Puter\n            if ( !puter.authToken && puter.env === 'web' ) {\n                try {\n                    await puter.ui.authenticateWithPuter();\n                } catch (e) {\n                    // if authentication fails, throw an error\n                    rejectRequest('Authentication failed.');\n                    return;\n                }\n            }\n\n            // create xhr object\n            const xhr = utils.initXhr('/stat', this.APIOrigin, undefined, 'post', 'text/plain;actually=json');\n\n            // set up event handlers for load and error events\n            utils.setupXhrEventHandlers(xhr, options.success, options.error, async (result) => {\n                // Calculate the size of the result for cache eligibility check\n                const resultSize = JSON.stringify(result).length;\n\n                // Cache the result if it's not bigger than MAX_CACHE_SIZE\n                const MAX_CACHE_SIZE = 20 * 1024 * 1024;\n\n                if ( resultSize <= MAX_CACHE_SIZE ) {\n                    // UPSERT the cache\n                    puter._cache.set(cacheKey, result);\n                }\n\n                resolveRequest(result);\n            }, rejectRequest);\n\n            let dataToSend = {};\n            if ( options.uid !== undefined ) {\n                dataToSend.uid = options.uid;\n            } else if ( options.path !== undefined ) {\n                // If dirPath is not provided or it's not starting with a slash, it means it's a relative path\n                // in that case, we need to prepend the app's root directory to it\n                dataToSend.path = getAbsolutePathForApp(options.path);\n            }\n\n            dataToSend.return_subdomains = options.returnSubdomains;\n            dataToSend.return_permissions = options.returnPermissions;\n            dataToSend.return_versions = options.returnVersions;\n            dataToSend.return_size = options.returnSize;\n            dataToSend.auth_token = this.authToken;\n\n            xhr.send(JSON.stringify(dataToSend));\n        });\n\n        // Store the promise and timestamp in the in-flight tracker\n        inflightRequests.set(deduplicationKey, {\n            promise: requestPromise,\n            timestamp: now,\n        });\n\n        // Wait for the request to complete and clean up\n        try {\n            const result = await requestPromise;\n            inflightRequests.delete(deduplicationKey);\n            resolve(result);\n        } catch ( error ) {\n            inflightRequests.delete(deduplicationKey);\n            reject(error);\n        }\n    });\n};\n\nexport default stat;", "import path from '../../../lib/path.js';\nimport * as utils from '../../../lib/utils.js';\nimport getAbsolutePathForApp from '../utils/getAbsolutePathForApp.js';\nimport stat from './stat.js';\n\nconst move = function (...args) {\n    let options;\n    // If first argument is an object, it's the options\n    if ( typeof args[0] === 'object' && args[0] !== null ) {\n        options = args[0];\n    } else {\n        // Otherwise, we assume separate arguments are provided\n        options = {\n            source: args[0],\n            destination: args[1],\n            overwrite: args[2]?.overwrite,\n            new_name: args[2]?.newName || args[2]?.new_name,\n            create_missing_parents: args[2]?.createMissingParents || args[2]?.create_missing_parents,\n            new_metadata: args[2]?.newMetadata || args[2]?.new_metadata,\n            original_client_socket_id: args[2]?.excludeSocketID || args[2]?.original_client_socket_id,\n        };\n    }\n\n    return new Promise(async (resolve, reject) => {\n        // If auth token is not provided and we are in the web environment,\n        // try to authenticate with Puter\n        if ( !puter.authToken && puter.env === 'web' ) {\n            try {\n                await puter.ui.authenticateWithPuter();\n            } catch (e) {\n                // if authentication fails, throw an error\n                reject('Authentication failed.');\n            }\n        }\n\n        // convert source and destination to absolute path\n        options.source = getAbsolutePathForApp(options.source);\n        options.destination = getAbsolutePathForApp(options.destination);\n\n        if ( ! options.new_name ) {\n            // Handler to check if dest is supposed to be a file or a folder\n            try {\n                const destStats = await stat.bind(this)(options.destination); // this is meant to error if it doesn't exist\n                if ( ! destStats.is_dir ) {\n                    throw 'is not directory'; // just a wuick way to just to the catch\n                }\n            } catch (e) {\n                options.new_name = path.basename(options.destination);\n                options.destination = path.dirname(options.destination);\n            }\n        }\n\n        // create xhr object\n        const xhr = utils.initXhr('/move', this.APIOrigin, this.authToken);\n\n        // set up event handlers for load and error events\n        utils.setupXhrEventHandlers(xhr, options.success, options.error, resolve, reject);\n\n        xhr.send(JSON.stringify({\n            source: options.source,\n            destination: options.destination,\n            overwrite: options.overwrite,\n            new_name: (options.new_name || options.newName),\n            create_missing_parents: (options.create_missing_parents || options.createMissingParents),\n            new_metadata: (options.new_metadata || options.newMetadata),\n            original_client_socket_id: options.excludeSocketID,\n        }));\n    });\n};\n\nexport default move;", "import * as utils from '../../../lib/utils.js';\nimport getAbsolutePathForApp from '../utils/getAbsolutePathForApp.js';\n\nconst read = function (...args) {\n    let options;\n\n    // If first argument is an object, it's the options\n    if ( typeof args[0] === 'object' && args[0] !== null ) {\n        options = args[0];\n    } else {\n        // Otherwise, we assume separate arguments are provided\n        options = {\n            path: typeof args[0] === 'string' ? args[0] : (typeof args[0] === 'object' && args[0] !== null ? args[0].path : args[0]),\n            ...(typeof (args[1]) === 'object' ? args[1] : {\n                success: args[1],\n                error: args[2],\n            }),\n        };\n    }\n\n    return new Promise(async (resolve, reject) => {\n        // If auth token is not provided and we are in the web environment,\n        // try to authenticate with Puter\n        if ( !puter.authToken && puter.env === 'web' ) {\n            try {\n                await puter.ui.authenticateWithPuter();\n            } catch (e) {\n                // if authentication fails, throw an error\n                reject('Authentication failed.');\n            }\n        }\n\n        // convert path to absolute path\n        options.path = getAbsolutePathForApp(options.path);\n\n        // create xhr object\n        const xhr = utils.initXhr(`/read?${ new URLSearchParams({ file: options.path, ...(options.offset ? { offset: options.offset } : {}), ...(options.byte_count ? { byte_count: options.byte_count } : {}) }).toString()}`, this.APIOrigin, this.authToken, 'get', 'application/json;charset=UTF-8', 'blob');\n\n        // set up event handlers for load and error events\n        utils.setupXhrEventHandlers(xhr, options.success, options.error, resolve, reject);\n\n        xhr.send();\n    });\n};\n\nexport default read;", "import * as utils from '../../../lib/utils.js';\nimport getAbsolutePathForApp from '../utils/getAbsolutePathForApp.js';\n\n// Track in-flight requests to avoid duplicate backend calls\n// Each entry stores: { promise, timestamp }\nconst inflightRequests = new Map();\n\n// Time window (in ms) to group duplicate requests together\n// Requests made within this window will share the same backend call\nconst DEDUPLICATION_WINDOW_MS = 2000; // 2 seconds\n\nconst readdir = async function (...args) {\n    let options;\n\n    // If first argument is an object, it's the options\n    if ( typeof args[0] === 'object' && args[0] !== null ) {\n        options = args[0];\n    } else {\n        // Otherwise, we assume separate arguments are provided\n        options = {\n            path: args[0],\n            success: args[1],\n            error: args[2],\n        };\n    }\n\n    return new Promise(async (resolve, reject) => {\n        // consistency levels\n        if ( ! options.consistency ) {\n            options.consistency = 'strong';\n        }\n\n        // Either path or uid is required\n        if ( !options.path && !options.uid ) {\n            throw new Error({ code: 'NO_PATH_OR_UID', message: 'Either path or uid must be provided.' });\n        }\n\n        // Generate cache key based on path or uid\n        let cacheKey;\n        if ( options.path ) {\n            cacheKey = `readdir:${ options.path}`;\n        }\n\n        if ( options.consistency === 'eventual' ) {\n            // Check cache\n            const cachedResult = await puter._cache.get(cacheKey);\n            if ( cachedResult ) {\n                resolve(cachedResult);\n                return;\n            }\n        }\n\n        // Generate deduplication key based on all request parameters\n        const deduplicationKey = JSON.stringify({\n            path: options.path,\n            uid: options.uid,\n            no_thumbs: options.no_thumbs,\n            no_assocs: options.no_assocs,\n            consistency: options.consistency,\n        });\n\n        // Check if there's already an in-flight request for the same parameters\n        const existingEntry = inflightRequests.get(deduplicationKey);\n        const now = Date.now();\n\n        if ( existingEntry ) {\n            const timeSinceRequest = now - existingEntry.timestamp;\n\n            // Only reuse the request if it's within the deduplication window\n            if ( timeSinceRequest < DEDUPLICATION_WINDOW_MS ) {\n                // Wait for the existing request and return its result\n                try {\n                    const result = await existingEntry.promise;\n                    resolve(result);\n                } catch ( error ) {\n                    reject(error);\n                }\n                return;\n            } else {\n                // Request is too old, remove it from the tracker\n                inflightRequests.delete(deduplicationKey);\n            }\n        }\n\n        // Create a promise for this request and store it to deduplicate concurrent calls\n        const requestPromise = new Promise(async (resolveRequest, rejectRequest) => {\n            // If auth token is not provided and we are in the web environment,\n            // try to authenticate with Puter\n            if ( !puter.authToken && puter.env === 'web' ) {\n                try {\n                    await puter.ui.authenticateWithPuter();\n                } catch (e) {\n                    // if authentication fails, throw an error\n                    rejectRequest('Authentication failed.');\n                    return;\n                }\n            }\n\n            // create xhr object\n            const xhr = utils.initXhr('/readdir', this.APIOrigin, undefined, 'post', 'text/plain;actually=json');\n\n            // set up event handlers for load and error events\n            utils.setupXhrEventHandlers(xhr, options.success, options.error, async (result) => {\n                // Calculate the size of the result for cache eligibility check\n                const resultSize = JSON.stringify(result).length;\n\n                // Cache the result if it's not bigger than MAX_CACHE_SIZE\n                const MAX_CACHE_SIZE = 100 * 1024 * 1024;\n\n                if ( resultSize <= MAX_CACHE_SIZE ) {\n                    // UPSERT the cache\n                    puter._cache.set(cacheKey, result);\n                }\n\n                // set each individual item's cache\n                for ( const item of result ) {\n                    puter._cache.set(`item:${ item.path}`, item);\n                }\n\n                resolveRequest(result);\n            }, rejectRequest);\n\n            // Build request payload - support both path and uid parameters\n            const payload = {\n                no_thumbs: options.no_thumbs,\n                no_assocs: options.no_assocs,\n                auth_token: this.authToken,\n            };\n\n            // Add either uid or path to the payload\n            if ( options.uid ) {\n                payload.uid = options.uid;\n            } else if ( options.path ) {\n                payload.path = getAbsolutePathForApp(options.path);\n            }\n\n            xhr.send(JSON.stringify(payload));\n        });\n\n        // Store the promise and timestamp in the in-flight tracker\n        inflightRequests.set(deduplicationKey, {\n            promise: requestPromise,\n            timestamp: now,\n        });\n\n        // Wait for the request to complete and clean up\n        try {\n            const result = await requestPromise;\n            inflightRequests.delete(deduplicationKey);\n            resolve(result);\n        } catch ( error ) {\n            inflightRequests.delete(deduplicationKey);\n            reject(error);\n        }\n    });\n};\n\nexport default readdir;", "import * as utils from '../../../lib/utils.js';\nimport getAbsolutePathForApp from '../utils/getAbsolutePathForApp.js';\n\nconst rename = function (...args) {\n    let options;\n\n    // If first argument is an object, it's the options\n    if ( typeof args[0] === 'object' && args[0] !== null ) {\n        options = args[0];\n    } else {\n        // Otherwise, we assume separate arguments are provided\n        options = {\n            path: args[0],\n            new_name: args[1],\n            success: args[2],\n            error: args[3],\n            // Add more if needed...\n        };\n    }\n\n    return new Promise(async (resolve, reject) => {\n        // If auth token is not provided and we are in the web environment,\n        // try to authenticate with Puter\n        if ( !puter.authToken && puter.env === 'web' ) {\n            try {\n                await puter.ui.authenticateWithPuter();\n            } catch (e) {\n                // if authentication fails, throw an error\n                reject('Authentication failed.');\n            }\n        }\n\n        // create xhr object\n        const xhr = utils.initXhr('/rename', this.APIOrigin, this.authToken);\n\n        // set up event handlers for load and error events\n        utils.setupXhrEventHandlers(xhr, options.success, options.error, resolve, reject);\n\n        let dataToSend = {\n            original_client_socket_id: options.excludeSocketID || options.original_client_socket_id,\n            new_name: options.new_name || options.newName,\n        };\n\n        if ( options.uid !== undefined ) {\n            dataToSend.uid = options.uid;\n        } else if ( options.path !== undefined ) {\n            // If dirPath is not provided or it's not starting with a slash, it means it's a relative path\n            // in that case, we need to prepend the app's root directory to it\n            dataToSend.path = getAbsolutePathForApp(options.path);\n        }\n\n        xhr.send(JSON.stringify(dataToSend));\n\n    });\n};\n\nexport default rename;", "\nimport * as utils from '../../../lib/utils.js';\n\n/**\n * Signs a file system entry or entries and optionally calls a provided callback with the result.\n * If a single item is passed, it is converted into an array.\n * Sends a POST request to the server to sign the items.\n *\n * @param {(Object|Object[])} items - The file system entry or entries to be signed. Can be a single object or an array of objects.\n * @param {function} [callback] - Optional callback function to be invoked with the result of the signing.\n * @returns {(Object|Object[])} If a single item was passed, returns a single object. If multiple items were passed, returns an array of objects.\n * @throws {Error} If the AJAX request fails.\n * @async\n */\nconst sign = function (...args) {\n    let options;\n\n    // Otherwise, we assume separate arguments are provided\n    options = {\n        app_uid: args[0],\n        items: args[1],\n        success: args[2],\n        error: args[3],\n        // Add more if needed...\n    };\n\n    return new Promise(async (resolve, reject) => {\n        // If auth token is not provided and we are in the web environment,\n        // try to authenticate with Puter\n        if ( !puter.authToken && puter.env === 'web' ) {\n            try {\n                await puter.ui.authenticateWithPuter();\n            } catch (e) {\n                // if authentication fails, throw an error\n                reject('Authentication failed.');\n            }\n        }\n\n        let items = options.items;\n\n        // if only a single item is passed, convert it to array\n        // so that the code below can work with arrays\n        if ( ! Array.isArray(items) ) {\n            items = [items];\n        }\n\n        // create xhr object\n        const xhr = utils.initXhr('/sign', this.APIOrigin, this.authToken);\n\n        // response\n        xhr.addEventListener('load', async function (e) {\n            const resp = await utils.parseResponse(this);\n            // error\n            if ( this.status !== 200 ) {\n                // if error callback is provided, call it\n                if ( options.error && typeof options.error === 'function' )\n                {\n                    options.error(resp);\n                }\n                // reject promise\n                return reject(resp);\n            }\n            // success\n            else {\n                let res = resp;\n                let result;\n                let token = res.token;\n                // if only a single item was passed, return a single object\n                if ( items.length == 1 ) {\n                    result = { ...(res.signatures[0]) };\n                }\n                // if multiple items were passed, return an array of objects\n                else {\n                    let obj = [];\n                    for ( let i = 0; i < res.signatures.length; i++ ) {\n                        obj.push({ ...res.signatures[i] });\n                    }\n                    result = obj;\n                }\n\n                // if success callback is provided, call it\n                if ( options.success && typeof options.success === 'function' )\n                {\n                    options.success({ token: token, items: result });\n                }\n                // resolve with success\n                return resolve({ token: token, items: result });\n            }\n        });\n\n        xhr.upload.addEventListener('progress', function (e) {\n        });\n\n        // error\n        xhr.addEventListener('error', function (e) {\n            return utils.handle_error(options.error, reject, this);\n        });\n\n        xhr.send(JSON.stringify({\n            app_uid: options.app_uid,\n            items: items,\n        }));\n    });\n};\n\nexport default sign;", "import * as utils from '../../../lib/utils.js';\n\nconst space = function (...args) {\n    let options;\n\n    // If first argument is an object, it's the options\n    if ( typeof args[0] === 'object' && args[0] !== null ) {\n        options = args[0];\n    } else {\n        // Otherwise, we assume separate arguments are provided\n        options = {\n            success: args[0],\n            error: args[1],\n            // Add more if needed...\n        };\n    }\n\n    return new Promise(async (resolve, reject) => {\n        // If auth token is not provided and we are in the web environment,\n        // try to authenticate with Puter\n        if ( !puter.authToken && puter.env === 'web' ) {\n            try {\n                await puter.ui.authenticateWithPuter();\n            } catch (e) {\n                // if authentication fails, throw an error\n                reject('Authentication failed.');\n            }\n        }\n\n        // create xhr object\n        const xhr = utils.initXhr('/df', this.APIOrigin, this.authToken);\n\n        // set up event handlers for load and error events\n        utils.setupXhrEventHandlers(xhr, options.success, options.error, resolve, reject);\n\n        xhr.send();\n    });\n};\n\nexport default space;", "import getAbsolutePathForApp from '../utils/getAbsolutePathForApp.js';\nimport pathLib from '../../../lib/path.js';\n\n// This only works for absolute symlinks for now\nconst symlink = async function (target, linkPath) {\n\n    // If auth token is not provided and we are in the web environment,\n    // try to authenticate with Puter\n    if ( !puter.authToken && puter.env === 'web' ) {\n        try {\n            await puter.ui.authenticateWithPuter();\n        } catch (e) {\n            // if authentication fails, throw an error\n            throw 'Authentication failed.';\n        }\n    }\n\n    // convert path to absolute path\n    linkPath = getAbsolutePathForApp(linkPath);\n    target = getAbsolutePathForApp(target);\n    const name = pathLib.basename(linkPath);\n    const linkDir = pathLib.dirname(linkPath);\n\n    const op =\n        {\n            op: 'symlink',\n            path: linkDir,\n            name: name,\n            target: target,\n        };\n\n    const formData = new FormData();\n    formData.append('operation', JSON.stringify(op));\n\n    try {\n        const response = await fetch(`${this.APIOrigin }/batch`, {\n            method: 'POST',\n            headers: { 'Authorization': `Bearer ${puter.authToken}` },\n            body: formData,\n        });\n        if ( response.status !== 200 ) {\n            const error = await response.text();\n            console.error('[symlink] fetch error: ', error);\n            throw error;\n        }\n    } catch (e) {\n        console.error('[symlink] fetch error: ', e);\n        throw e;\n    }\n\n};\n\nexport default symlink;", "import path from '../../../lib/path.js';\nimport * as utils from '../../../lib/utils.js';\nimport getAbsolutePathForApp from '../utils/getAbsolutePathForApp.js';\n\nconst upload = async function (items, dirPath, options = {}) {\n    return new Promise(async (resolve, reject) => {\n        const DataTransferItem = globalThis.DataTransfer || (class DataTransferItem {\n        });\n        const FileList = globalThis.FileList || (class FileList {\n        });\n        const DataTransferItemList = globalThis.DataTransferItemList || (class DataTransferItemList {\n        });\n\n        // If auth token is not provided and we are in the web environment,\n        // try to authenticate with Puter\n        if ( !puter.authToken && puter.env === 'web' ) {\n            try {\n                await puter.ui.authenticateWithPuter();\n            } catch (e) {\n                // if authentication fails, throw an error\n                reject(e);\n            }\n        }\n\n        const error = (e) => {\n            // if error callback is provided, call it\n            if ( options.error && typeof options.error === 'function' )\n            {\n                options.error(e);\n            }\n            return reject(e);\n        };\n\n        // xhr object to be used for the upload\n        let xhr = new XMLHttpRequest();\n\n        // Can not write to root\n        if ( dirPath === '/' )\n        {\n            return error('Can not upload to root directory.');\n        }\n\n        // If dirPath is not provided or it's not starting with a slash, it means it's a relative path\n        // in that case, we need to prepend the app's root directory to it\n        dirPath = getAbsolutePathForApp(dirPath);\n\n        // Generate a unique ID for this upload operation\n        // This will be used to uniquely identify this operation and its progress\n        // across servers and clients\n        const operation_id = utils.uuidv4();\n\n        // Call 'init' callback if provided\n        // init is basically a hook that allows the user to get the operation ID and the XMLHttpRequest object\n        if ( options.init && typeof options.init === 'function' ) {\n            options.init(operation_id, xhr);\n        }\n\n        // keeps track of the amount of data uploaded to the server\n        let bytes_uploaded_to_server = 0;\n        // keeps track of the amount of data uploaded to the cloud\n        let bytes_uploaded_to_cloud = 0;\n\n        // This will hold the normalized entries to be uploaded\n        // Since 'items' could be a DataTransferItemList, FileList, File, or an array of any of these,\n        // we need to normalize it into an array of consistently formatted objects which will be held in 'entries'\n        let entries;\n\n        // will hold the total size of the upload\n        let total_size = 0;\n        let file_count = 0;\n\n        let seemsToBeParsedDataTransferItems = false;\n        if ( Array.isArray(items) && items.length > 0 ) {\n            for ( let i = 0; i < items.length; i++ ) {\n                if ( items[i] instanceof DataTransferItem || items[i] instanceof DataTransferItemList ) {\n                    seemsToBeParsedDataTransferItems = true;\n                }\n            }\n        }\n\n        // DataTransferItemList\n        if ( items instanceof DataTransferItemList || items instanceof DataTransferItem || items[0] instanceof DataTransferItem || options.parsedDataTransferItems ) {\n            // if parsedDataTransferItems is true, it means the user has already parsed the DataTransferItems\n            if ( options.parsedDataTransferItems )\n            {\n                entries = items;\n            }\n            else\n            {\n                entries = await puter.ui.getEntriesFromDataTransferItems(items);\n            }\n\n            // Sort entries by size ascending\n            entries.sort((entry_a, entry_b) => {\n                if ( entry_a.isDirectory && !entry_b.isDirectory ) return -1;\n                if ( !entry_a.isDirectory && entry_b.isDirectory ) return 1;\n                if ( entry_a.isDirectory && entry_b.isDirectory ) return 0;\n\n                return entry_a.size - entry_b.size;\n            });\n        }\n        // FileList/File\n        else if ( items instanceof File || items[0] instanceof File || items instanceof FileList || items[0] instanceof FileList ) {\n            if ( ! Array.isArray(items) )\n            {\n                entries = items instanceof FileList ? Array.from(items) : [items];\n            }\n            else\n            {\n                entries = items;\n            }\n\n            // Sort entries by size ascending\n            entries.sort((entry_a, entry_b) => {\n                return entry_a.size - entry_b.size;\n            });\n            // add FullPath property to each entry\n            for ( let i = 0; i < entries.length; i++ ) {\n                entries[i].filepath = entries[i].name;\n                entries[i].fullPath = entries[i].name;\n            }\n        }\n        // blob\n        else if ( items instanceof Blob ) {\n            // create a File object from the blob\n            let file = new File([items], options.name, { type: 'application/octet-stream' });\n            entries = [file];\n            // add FullPath property to each entry\n            for ( let i = 0; i < entries.length; i++ ) {\n                entries[i].filepath = entries[i].name;\n                entries[i].fullPath = entries[i].name;\n            }\n        }\n        // String\n        else if ( typeof items === 'string' ) {\n            // create a File object from the string\n            let file = new File([items], 'default.txt', { type: 'text/plain' });\n            entries = [file];\n            // add FullPath property to each entry\n            for ( let i = 0; i < entries.length; i++ ) {\n                entries[i].filepath = entries[i].name;\n                entries[i].fullPath = entries[i].name;\n            }\n        }\n        // Anything else is invalid\n        else {\n            return error({ code: 'field_invalid', message: 'upload() items parameter is an invalid type' });\n        }\n\n        // Will hold directories and files to be uploaded\n        let dirs = [];\n        let uniqueDirs = {};\n        let files = [];\n\n        // Separate files from directories\n        for ( let i = 0; i < entries.length; i++ ) {\n            // skip empty entries\n            if ( ! entries[i] )\n            {\n                continue;\n            }\n            //collect dirs\n            if ( entries[i].isDirectory )\n            {\n                dirs.push({ path: path.join(dirPath, entries[i].finalPath ? entries[i].finalPath : entries[i].fullPath) });\n            }\n            // also files\n            else {\n                // Dragged and dropped files do not have a finalPath property and hence the fileItem will go undefined.\n                // In such cases, we need default to creating the files as uploaded by the user.\n                let fileItem = entries[i].finalPath ? entries[i].finalPath : entries[i].fullPath;\n                let [dirLevel, fileName] = [fileItem?.slice(0, fileItem?.lastIndexOf('/')), fileItem?.slice(fileItem?.lastIndexOf('/') + 1)];\n\n                // If file name is blank then we need to create only an empty directory.\n                // On the other hand if the file name is not blank(could be undefined), we need to create the file.\n                fileName != '' && files.push(entries[i]);\n                if ( options.createFileParent && fileItem.includes('/') ) {\n                    let incrementalDir;\n                    dirLevel.split('/').forEach((directory) => {\n                        incrementalDir = incrementalDir ? `${incrementalDir }/${ directory}` : directory;\n                        let filePath = path.join(dirPath, incrementalDir);\n                        // Prevent duplicate parent directory creation\n                        if ( ! uniqueDirs[filePath] ) {\n                            uniqueDirs[filePath] = true;\n                            dirs.push({ path: filePath });\n                        }\n                    });\n                }\n            }\n            // stats about the upload to come\n            if ( entries[i].size !== undefined ) {\n                total_size += (entries[i].size);\n                file_count++;\n            }\n        }\n\n        // Continue only if there are actually any files/directories to upload\n        if ( dirs.length === 0 && files.length === 0 ) {\n            return error({ code: 'EMPTY_UPLOAD', message: 'No files or directories to upload.' });\n        }\n\n        // Check storage capacity.\n        // We need to check the storage capacity before the upload starts because\n        // we want to avoid uploading files in case there is not enough storage space.\n        // If we didn't check before upload starts, we could end up in a scenario where\n        // the user uploads a very large folder/file and then the server rejects it because there is not enough space\n        //\n        // Space check in 'web' environment is currently not supported since it requires permissions.\n        let storage;\n        if ( puter.env !== 'web' ) {\n            try {\n                storage = await this.space();\n                if ( storage.capacity - storage.used < total_size ) {\n                    return error({ code: 'NOT_ENOUGH_SPACE', message: 'Not enough storage space available.' });\n                }\n            } catch (e) {\n                // Ignored\n            }\n        }\n\n        // total size of the upload is doubled because we will be uploading the files to the server\n        // and then the server will upload them to the cloud\n        total_size = total_size * 2;\n\n        // holds the data to be sent to the server\n        const fd = new FormData();\n\n        //-------------------------------------------------\n        // Generate the requests to create all the\n        // folders in this upload\n        //-------------------------------------------------\n        dirs.sort((a, b) => b.path.length - a.path.length);\n        let mkdir_requests = [];\n\n        for ( let i = 0; i < dirs.length; i++ ) {\n            // update all file paths under this folder if dirname was changed\n            for ( let j = 0; j < files.length; j++ ) {\n                // if file is in this folder and has not been processed yet\n                if ( !files[j].puter_path_param && path.join(dirPath, files[j].filepath).startsWith(`${dirs[i].path }/`) ) {\n                    files[j].puter_path_param = `$dir_${i}/${ path.basename(files[j].filepath)}`;\n                }\n            }\n\n            // update all subdirs under this dir\n            for ( let k = 0; k < dirs.length; k++ ) {\n                if ( !dirs[k].puter_path_param && dirs[k].path.startsWith(`${dirs[i].path }/`) ) {\n                    dirs[k].puter_path_param = `$dir_${i}/${ path.basename(dirs[k].path)}`;\n                }\n            }\n        }\n\n        for ( let i = 0; i < dirs.length; i++ ) {\n            let parent_path = path.dirname(dirs[i].puter_path_param || dirs[i].path);\n            let dir_path = dirs[i].puter_path_param || dirs[i].path;\n\n            // remove parent path from the beginning of path since path is relative to parent\n            if ( parent_path !== '/' )\n            {\n                dir_path = dir_path.replace(parent_path, '');\n            }\n\n            mkdir_requests.push({\n                op: 'mkdir',\n                parent: parent_path,\n                path: dir_path,\n                overwrite: options.overwrite ?? false,\n                dedupe_name: options.dedupeName ?? true,\n                create_missing_ancestors: options.createMissingAncestors ?? true,\n                as: `dir_${i}`,\n            });\n        }\n\n        // inverse mkdir_requests so that the root folder is created first\n        // and then go down the tree\n        mkdir_requests.reverse();\n\n        fd.append('operation_id', operation_id);\n        fd.append('socket_id', this.socket.id);\n        fd.append('original_client_socket_id', this.socket.id);\n\n        // Append mkdir operations to upload request\n        for ( let i = 0; i < mkdir_requests.length; i++ ) {\n            fd.append('operation', JSON.stringify(mkdir_requests[i]));\n        }\n\n        // Append file metadata to upload request\n        if ( ! options.shortcutTo ) {\n            for ( let i = 0; i < files.length; i++ ) {\n                fd.append('fileinfo', JSON.stringify({\n                    name: files[i].name,\n                    type: files[i].type,\n                    size: files[i].size,\n                }));\n            }\n        }\n        // Append write operations for each file\n        for ( let i = 0; i < files.length; i++ ) {\n            fd.append('operation', JSON.stringify({\n                op: options.shortcutTo ? 'shortcut' : 'write',\n                dedupe_name: options.dedupeName ?? true,\n                overwrite: options.overwrite ?? false,\n                create_missing_ancestors: (options.createMissingAncestors || options.createMissingParents),\n                operation_id: operation_id,\n                path: (\n                    files[i].puter_path_param &&\n                    path.dirname(files[i].puter_path_param ?? '')\n                ) || (\n                    files[i].filepath &&\n                    path.join(dirPath, path.dirname(files[i].filepath))\n                ) || '',\n                name: path.basename(files[i].filepath),\n                item_upload_id: i,\n                shortcut_to: options.shortcutTo,\n                shortcut_to_uid: options.shortcutTo,\n                app_uid: options.appUID,\n            }));\n        }\n\n        // Append files to upload\n        if ( ! options.shortcutTo ) {\n            for ( let i = 0; i < files.length; i++ ) {\n                fd.append('file', files[i] ?? '');\n            }\n        }\n\n        const progress_handler = (msg) => {\n            if ( msg.operation_id === operation_id ) {\n                bytes_uploaded_to_cloud += msg.loaded_diff;\n            }\n        };\n\n        // Handle upload progress events from server\n        this.socket.on('upload.progress', progress_handler);\n\n        // keeps track of the amount of data uploaded to the server\n        let previous_chunk_uploaded = null;\n\n        // open request to server\n        xhr.open('post', (`${this.APIOrigin }/batch`), true);\n        // set auth header\n        xhr.setRequestHeader('Authorization', `Bearer ${ this.authToken}`);\n\n        // -----------------------------------------------\n        // Upload progress: client -> server\n        // -----------------------------------------------\n        xhr.upload.addEventListener('progress', function (e) {\n            // update operation tracker\n            let chunk_uploaded;\n            if ( previous_chunk_uploaded === null ) {\n                chunk_uploaded = e.loaded;\n                previous_chunk_uploaded = 0;\n            } else {\n                chunk_uploaded = e.loaded - previous_chunk_uploaded;\n            }\n            previous_chunk_uploaded += chunk_uploaded;\n            bytes_uploaded_to_server += chunk_uploaded;\n\n            // overall operation progress\n            let op_progress = ((bytes_uploaded_to_cloud + bytes_uploaded_to_server) / total_size * 100).toFixed(2);\n            op_progress = op_progress > 100 ? 100 : op_progress;\n\n            // progress callback function\n            if ( options.progress && typeof options.progress === 'function' )\n            {\n                options.progress(operation_id, op_progress);\n            }\n        });\n\n        // -----------------------------------------------\n        // Upload progress: server -> cloud\n        // the following code will check the progress of the upload every 100ms\n        // -----------------------------------------------\n        let cloud_progress_check_interval = setInterval(function () {\n            // operation progress\n            let op_progress = ((bytes_uploaded_to_cloud + bytes_uploaded_to_server) / total_size * 100).toFixed(2);\n\n            op_progress = op_progress > 100 ? 100 : op_progress;\n            if ( options.progress && typeof options.progress === 'function' )\n            {\n                options.progress(operation_id, op_progress);\n            }\n        }, 100);\n\n        // -----------------------------------------------\n        // onabort\n        // -----------------------------------------------\n        xhr.onabort = () => {\n            // stop the cloud upload progress tracker\n            clearInterval(cloud_progress_check_interval);\n            // remove progress handler\n            this.socket.off('upload.progress', progress_handler);\n            // if an 'abort' callback is provided, call it\n            if ( options.abort && typeof options.abort === 'function' )\n            {\n                options.abort(operation_id);\n            }\n        };\n\n        // -----------------------------------------------\n        // on success/error\n        // -----------------------------------------------\n        xhr.onreadystatechange = async (e) => {\n            if ( xhr.readyState === 4 ) {\n                const resp = await utils.parseResponse(xhr);\n                // Error\n                if ( (xhr.status >= 400 && xhr.status < 600) || (options.strict && xhr.status === 218) ) {\n                    // stop the cloud upload progress tracker\n                    clearInterval(cloud_progress_check_interval);\n\n                    // remove progress handler\n                    this.socket.off('upload.progress', progress_handler);\n\n                    // If this is a 'strict' upload (i.e. status code is 218), we need to find out which operation failed\n                    // and call the error callback with that operation.\n                    if ( options.strict && xhr.status === 218 ) {\n                        // find the operation that failed\n                        let failed_operation;\n                        for ( let i = 0; i < resp.results?.length; i++ ) {\n                            if ( resp.results[i].status !== 200 ) {\n                                failed_operation = resp.results[i];\n                                break;\n                            }\n                        }\n                        return error(failed_operation);\n                    }\n\n                    return error(resp);\n                }\n                // Success\n                else {\n                    if ( !resp || !resp.results || resp.results.length === 0 ) {\n                        // no results\n                        if ( puter.debugMode )\n                        {\n                            console.log('no results');\n                        }\n                    }\n\n                    let items = resp.results;\n                    items = items.length === 1 ? items[0] : items;\n\n                    // if success callback is provided, call it\n                    if ( options.success && typeof options.success === 'function' ) {\n                        options.success(items);\n                    }\n                    // stop the cloud upload progress tracker\n                    clearInterval(cloud_progress_check_interval);\n                    // remove progress handler\n                    this.socket.off('upload.progress', progress_handler);\n\n                    return resolve(items);\n                }\n            }\n        };\n\n        // Fire off the 'start' event\n        if ( options.start && typeof options.start === 'function' ) {\n            options.start();\n        }\n\n        // send request\n        xhr.send(fd);\n    });\n};\n\nexport default upload;", "import path from '../../../lib/path.js';\nimport getAbsolutePathForApp from '../utils/getAbsolutePathForApp.js';\n\nconst write = async function (targetPath, data, options = {}) {\n    // targetPath is required\n    if ( ! targetPath ) {\n        throw new Error({ code: 'NO_TARGET_PATH', message: 'No target path provided.' });\n    }\n    // if targetPath is a File\n    if ( targetPath instanceof File && data === undefined ) {\n        data = targetPath;\n        targetPath = data.name;\n    }\n\n    // strict mode will cause the upload to fail if even one operation fails\n    // for example, if one of the files in a folder fails to upload, the entire upload will fail\n    // since write is a wrapper around upload to handle single-file uploads, we need to pass the strict option to upload\n    options.strict = true;\n\n    // by default, we want to overwrite existing files\n    options.overwrite = options.overwrite ?? true;\n\n    // if overwrite is true and dedupeName is not provided, set dedupeName to false\n    if ( options.overwrite && options.dedupeName === undefined )\n    {\n        options.dedupeName = false;\n    }\n\n    // if targetPath is not provided or it's not starting with a slash, it means it's a relative path\n    // in that case, we need to prepend the app's root directory to it\n    targetPath = getAbsolutePathForApp(targetPath);\n\n    // extract file name from targetPath\n    const filename = path.basename(targetPath);\n\n    // extract the parent directory from targetPath\n    const parent = path.dirname(targetPath);\n\n    // if data is a string, convert it to a File object\n    if ( typeof data === 'string' ) {\n        data = new File([data ?? ''], filename ?? 'Untitled.txt', { type: 'text/plain' });\n    }\n    // blob\n    else if ( data instanceof Blob ) {\n        data = new File([data ?? ''], filename ?? 'Untitled', { type: data.type });\n    }\n    // typed arrays (Uint8Array, Int8Array, etc.) and ArrayBuffer\n    else if ( data instanceof ArrayBuffer || ArrayBuffer.isView(data) ) {\n        data = new File([data], filename ?? 'Untitled', { type: 'application/octet-stream' });\n    }\n\n    if ( ! data )\n    {\n        data = new File([data ?? ''], filename);\n    }\n\n    // data should be a File now. If it's not, it's an unsupported type\n    if ( ! (data instanceof File) ) {\n        throw new Error({ code: 'field_invalid', message: 'write() data parameter is an invalid type' });\n    }\n\n    // perform upload\n    return this.upload(data, parent, options);\n};\n\nexport default write;", "import io from '../../lib/socket.io/socket.io.esm.min.js';\nimport * as utils from '../../lib/utils.js';\nimport path from '../../lib/path.js';\n\n// Constants\n//\n// The last valid time of the local cache.\nconst LAST_VALID_TS = 'last_valid_ts';\n\n// Operations\nimport copy from './operations/copy.js';\nimport mkdir from './operations/mkdir.js';\nimport move from './operations/move.js';\nimport read from './operations/read.js';\nimport readdir from './operations/readdir.js';\nimport rename from './operations/rename.js';\nimport sign from './operations/sign.js';\nimport space from './operations/space.js';\nimport stat from './operations/stat.js';\nimport symlink from './operations/symlink.js';\nimport upload from './operations/upload.js';\nimport write from './operations/write.js';\n// Why is this called deleteFSEntry instead of just delete? because delete is\n// a reserved keyword in javascript\nimport { AdvancedBase } from '../../../../putility/index.js';\nimport FSItem from '../FSItem.js';\nimport deleteFSEntry from './operations/deleteFSEntry.js';\nimport getReadURL from './operations/getReadUrl.js';\n\nexport class PuterJSFileSystemModule extends AdvancedBase {\n\n    space = space;\n    mkdir = mkdir;\n    copy = copy;\n    rename = rename;\n    upload = upload;\n    read = read;\n    // Why is this called deleteFSEntry instead of just delete? because delete is\n    // a reserved keyword in javascript.\n    delete = deleteFSEntry;\n    move = move;\n    write = write;\n    sign = sign;\n    symlink = symlink;\n    getReadURL = getReadURL;\n    readdir = readdir;\n    stat = stat;\n\n    FSItem = FSItem;\n\n    static NARI_METHODS = {\n        // stat: {\n        //     positional: ['path'],\n        //     firstarg_options: true,\n        //     async fn (parameters) {\n        //         const svc_fs = await this.context.services.aget('filesystem');\n        //         return svc_fs.filesystem.stat(parameters);\n        //     }\n        // },\n    };\n\n    /**\n     * Creates a new instance with the given authentication token, API origin, and app ID,\n     * and connects to the socket.\n     *\n     * @class\n     * @param {string} authToken - Token used to authenticate the user.\n     * @param {string} APIOrigin - Origin of the API server. Used to build the API endpoint URLs.\n     * @param {string} appID - ID of the app to use.\n     */\n    constructor (context) {\n        super();\n        this.authToken = context.authToken;\n        this.APIOrigin = context.APIOrigin;\n        this.appID = context.appID;\n        this.context = context;\n        this.cacheUpdateTimer = null;\n        // Connect socket.\n        this.initializeSocket();\n\n        // We need to use `Object.defineProperty` instead of passing\n        // `authToken` and `APIOrigin` because they will change.\n        const api_info = {};\n        Object.defineProperty(api_info, 'authToken', {\n            get: () => this.authToken,\n        });\n        Object.defineProperty(api_info, 'APIOrigin', {\n            get: () => this.APIOrigin,\n        });\n    }\n\n    /**\n     * Initializes the socket connection to the server using the current API origin.\n     * If a socket connection already exists, it disconnects it before creating a new one.\n     * Sets up various event listeners on the socket to handle different socket events like\n     * connect, disconnect, reconnect, reconnect_attempt, reconnect_error, reconnect_failed, and error.\n     *\n     * @memberof FileSystem\n     * @returns {void}\n     */\n    initializeSocket () {\n        if ( this.socket ) {\n            this.socket.disconnect();\n        }\n\n        this.socket = io(this.APIOrigin, {\n            auth: {\n                auth_token: this.authToken,\n            },\n            autoUnref: this.context.env === 'nodejs',\n        });\n\n        this.bindSocketEvents();\n    }\n\n    bindSocketEvents () {\n        // this.socket.on('cache.updated', (msg) => {\n        //     // check original_client_socket_id and if it matches this.socket.id, don't post update\n        //     if (msg.original_client_socket_id !== this.socket.id) {\n        //         this.invalidateCache();\n        //     }\n        // });\n\n        this.socket.on('item.renamed', (item) => {\n            puter._cache.flushall();\n            console.log('Flushed cache for item.renamed');\n        });\n\n        this.socket.on('item.removed', (item) => {\n            // check original_client_socket_id and if it matches this.socket.id, don't invalidate cache\n            puter._cache.flushall();\n            console.log('Flushed cache for item.removed');\n        });\n\n        this.socket.on('item.added', (item) => {\n            // remove readdir cache for parent\n            puter._cache.del(`readdir:${ path.dirname(item.path)}`);\n            console.log(`deleted cache for readdir:${ path.dirname(item.path)}`);\n            // remove item cache for parent directory\n            puter._cache.del(`item:${ path.dirname(item.path)}`);\n            console.log(`deleted cache for item:${ path.dirname(item.path)}`);\n        });\n\n        this.socket.on('item.updated', (item) => {\n            puter._cache.flushall();\n            console.log('Flushed cache for item.updated');\n        });\n\n        this.socket.on('item.moved', (item) => {\n            puter._cache.flushall();\n            console.log('Flushed cache for item.moved');\n        });\n\n        this.socket.on('connect', () => {\n            if ( puter.debugMode )\n            {\n                console.log('FileSystem Socket: Connected', this.socket.id);\n            }\n        });\n\n        this.socket.on('disconnect', () => {\n            if ( puter.debugMode )\n            {\n                console.log('FileSystem Socket: Disconnected');\n            }\n        });\n\n        this.socket.on('reconnect', (attempt) => {\n            if ( puter.debugMode )\n            {\n                console.log('FileSystem Socket: Reconnected', this.socket.id);\n            }\n        });\n\n        this.socket.on('reconnect_attempt', (attempt) => {\n            if ( puter.debugMode )\n            {\n                console.log('FileSystem Socket: Reconnection Attemps', attempt);\n            }\n        });\n\n        this.socket.on('reconnect_error', (error) => {\n            if ( puter.debugMode )\n            {\n                console.log('FileSystem Socket: Reconnection Error', error);\n            }\n        });\n\n        this.socket.on('reconnect_failed', () => {\n            if ( puter.debugMode )\n            {\n                console.log('FileSystem Socket: Reconnection Failed');\n            }\n        });\n\n        this.socket.on('error', (error) => {\n            if ( puter.debugMode )\n            {\n                console.error('FileSystem Socket Error:', error);\n            }\n        });\n    }\n\n    /**\n     * Sets a new authentication token and resets the socket connection with the updated token.\n     *\n     * @param {string} authToken - The new authentication token.\n     * @memberof [FileSystem]\n     * @returns {void}\n     */\n    setAuthToken (authToken) {\n        this.authToken = authToken;\n\n        // Check cache timestamp and purge if needed (only in GUI environment)\n        if ( this.context.env === 'gui' ) {\n            this.checkCacheAndPurge();\n            // Start background task to update LAST_VALID_TS every 1 second\n            this.startCacheUpdateTimer();\n        }\n\n        // reset socket\n        this.initializeSocket();\n    }\n\n    /**\n     * Sets the API origin and resets the socket connection with the updated API origin.\n     *\n     * @param {string} APIOrigin - The new API origin.\n     * @memberof [Apps]\n     * @returns {void}\n     */\n    setAPIOrigin (APIOrigin) {\n        this.APIOrigin = APIOrigin;\n        // reset socket\n        this.initializeSocket();\n    }\n\n    /**\n     * The cache-related actions after local and remote updates.\n     *\n     * @memberof PuterJSFileSystemModule\n     * @returns {void}\n     */\n    invalidateCache () {\n        // Action: Update last valid time\n        // Set to 0, which means the cache is not up to date.\n        localStorage.setItem(LAST_VALID_TS, '0');\n        puter._cache.flushall();\n    }\n\n    /**\n     * Calls the cache API to get the last change timestamp from the server.\n     *\n     * @memberof PuterJSFileSystemModule\n     * @returns {Promise<number>} The timestamp from the server\n     */\n    async getCacheTimestamp () {\n        return new Promise((resolve, reject) => {\n            const xhr = utils.initXhr('/cache/last-change-timestamp', this.APIOrigin, this.authToken, 'get', 'application/json');\n\n            // set up event handlers for load and error events\n            utils.setupXhrEventHandlers(xhr, undefined, undefined, async (result) => {\n                try {\n                    const response = typeof result === 'string' ? JSON.parse(result) : result;\n                    resolve(response.timestamp || Date.now());\n                } catch (e) {\n                    reject(new Error('Failed to parse response'));\n                }\n            }, reject);\n\n            xhr.send();\n        });\n    }\n\n    /**\n     * Checks cache timestamp and purges cache if needed.\n     * Only runs in GUI environment.\n     *\n     * @memberof PuterJSFileSystemModule\n     * @returns {void}\n     */\n    async checkCacheAndPurge () {\n        try {\n            const serverTimestamp = await this.getCacheTimestamp();\n            const localValidTs = parseInt(localStorage.getItem(LAST_VALID_TS)) || 0;\n\n            if ( serverTimestamp - localValidTs > 2000 ) {\n                console.log('Cache is not up to date, purging cache');\n                // Server has newer data, purge local cache\n                puter._cache.flushall();\n                localStorage.setItem(LAST_VALID_TS, '0');\n            }\n        } catch ( error ) {\n            // If we can't get the server timestamp, silently fail\n            // This ensures the socket initialization doesn't break\n            console.error('Error checking cache timestamp:', error);\n        }\n    }\n\n    /**\n     * Starts the background task to update LAST_VALID_TS every 1 second.\n     * Only runs in GUI environment.\n     *\n     * @memberof PuterJSFileSystemModule\n     * @returns {void}\n     */\n    startCacheUpdateTimer () {\n        if ( this.context.env !== 'gui' ) {\n            return;\n        }\n\n        // Clear any existing timer\n        // this.stopCacheUpdateTimer();\n\n        // Start new timer\n        this.cacheUpdateTimer = setInterval(() => {\n            localStorage.setItem(LAST_VALID_TS, Date.now().toString());\n        }, 1000);\n    }\n\n    /**\n     * Stops the background cache update timer.\n     *\n     * @memberof PuterJSFileSystemModule\n     * @returns {void}\n     */\n    stopCacheUpdateTimer () {\n        if ( this.cacheUpdateTimer ) {\n            clearInterval(this.cacheUpdateTimer);\n            this.cacheUpdateTimer = null;\n        }\n    }\n}\n", "import path from '../lib/path.js';\n\nclass FSItem {\n    constructor (options) {\n        this.readURL = options.readURL ?? options.read_url;\n        this.writeURL = options.writeURL ?? options.write_url;\n        this.metadataURL = options.metadataURL ?? options.metadata_url;\n        this.name = options.name ?? options.fsentry_name;\n        this.uid = options.uid ?? options.uuid ?? options.fsentry_uid ?? options.fsentry_id ?? options.fsentry_uuid ?? options.id;\n        this.id = this.uid;\n        this.uuid = this.uid;\n        this.path = options.path ?? options.fsentry_path;\n        this.size = options.size ?? options.fsentry_size;\n        this.accessed = options.accessed ?? options.fsentry_accessed;\n        this.modified = options.modified ?? options.fsentry_modified;\n        this.created = options.created ?? options.fsentry_created;\n        this.isDirectory = (options.isDirectory || options.is_dir || options.fsentry_is_dir) ? true : false;\n\n        // We add some properties to '_internalProperties' to make it clear\n        // that they are not meant to be accessed outside of puter.js;\n        // this permits us to change or remove these properties in the future.\n        const internalProperties = {};\n        Object.defineProperty(this, '_internalProperties', {\n            enumerable: false,\n            value: internalProperties,\n        });\n\n        // Currently 'signature' and 'expires' are not provided in 'options',\n        // but they can be inferred by writeURL or readURL.\n        internalProperties.signature = options.signature ?? (() => {\n            const url = new URL(this.writeURL ?? this.readURL);\n            return url.searchParams.get('signature');\n        })();\n        internalProperties.expires = options.expires ?? (() => {\n            const url = new URL(this.writeURL ?? this.readURL);\n            return url.searchParams.get('expires');\n        })();\n\n        // This computed property gives us an object in the format output by\n        // the `/sign` endpoint, which can be passed to `launch_app` to\n        // allow apps to open a file in another app or another instance.\n        Object.defineProperty(internalProperties, 'file_signature', {\n            get: () => ({\n                read_url: this.readURL,\n                write_url: this.writeURL,\n                metadata_url: this.metadataURL,\n                fsentry_accessed: this.accessed,\n                fsentry_modified: this.modified,\n                fsentry_created: this.created,\n                fsentry_is_dir: this.isDirectory,\n                fsentry_size: this.size,\n                fsentry_name: this.name,\n                path: this.path,\n                uid: this.uid,\n                // /sign outputs another property called \"type\", but we don't\n                // have that information here, so it's omitted.\n            }),\n        });\n    }\n\n    write = async function (data) {\n        return puter.fs.write(this.path,\n                        new File([data], this.name),\n                        {\n                            overwrite: true,\n                            dedupeName: false,\n                        });\n    };\n\n    // Watches for changes to the item, and calls the callback function\n    // with the new data when a change is detected.\n    watch = function (callback) {\n        // todo - implement\n    };\n\n    open = function (callback) {\n        // todo - implement\n    };\n\n    // Set wallpaper\n    setAsWallpaper = function (options, callback) {\n        // todo - implement\n    };\n\n    rename = function (new_name) {\n        return puter.fs.rename(this.uid, new_name);\n    };\n\n    move = function (dest_path, overwrite = false, new_name) {\n        return puter.fs.move(this.path, dest_path, overwrite, new_name);\n    };\n\n    copy = function (destination_directory, auto_rename = false, overwrite = false) {\n        return puter.fs.copy(this.path, destination_directory, auto_rename, overwrite);\n    };\n\n    delete = function () {\n        return puter.fs.delete(this.path);\n    };\n\n    versions = async function () {\n        // todo - implement\n    };\n\n    trash = function () {\n        // todo make sure puter allows for moving to trash by default\n        // todo implement trashing\n    };\n\n    mkdir = async function (name, auto_rename = false) {\n        // Don't proceed if this is not a directory, throw error\n        if ( ! this.isDirectory )\n        {\n            throw new Error('mkdir() can only be called on a directory');\n        }\n\n        // mkdir\n        return puter.fs.mkdir(path.join(this.path, name));\n    };\n\n    metadata = async function () {\n        // todo - implement\n    };\n\n    readdir = async function () {\n        // Don't proceed if this is not a directory, throw error\n        if ( ! this.isDirectory )\n        {\n            throw new Error('readdir() can only be called on a directory');\n        }\n\n        // readdir\n        return puter.fs.readdir(this.path);\n    };\n\n    read = async function () {\n        return puter.fs.read(this.path);\n    };\n}\n\nexport default FSItem;", "import * as utils from '../../../lib/utils.js';\nimport getAbsolutePathForApp from '../utils/getAbsolutePathForApp.js';\n\n// why is this called deleteFSEntry instead of just delete?\n// because delete is a reserved keyword in javascript\nconst deleteFSEntry = async function (...args) {\n    let options;\n\n    // If first argument is an object, it's the options\n    if ( typeof args[0] === 'object' && args[0] !== null ) {\n        options = args[0];\n    }\n    // Otherwise, we assume separate arguments are provided\n    else {\n        options = {\n            paths: args[0],\n            recursive: args[1]?.recursive ?? true,\n            descendantsOnly: args[1]?.descendantsOnly ?? false,\n        };\n    }\n\n    // If paths is a string, convert to array\n    // this is to make it easier for the user to provide a single path without having to wrap it in an array\n    let paths = options.paths;\n    if ( typeof paths === 'string' )\n    {\n        paths = [paths];\n    }\n\n    return new Promise(async (resolve, reject) => {\n        // If auth token is not provided and we are in the web environment,\n        // try to authenticate with Puter\n        if ( !puter.authToken && puter.env === 'web' ) {\n            try {\n                await puter.ui.authenticateWithPuter();\n            } catch (e) {\n                // if authentication fails, throw an error\n                reject('Authentication failed.');\n            }\n        }\n\n        // create xhr object\n        const xhr = utils.initXhr('/delete', this.APIOrigin, this.authToken);\n\n        // set up event handlers for load and error events\n        utils.setupXhrEventHandlers(xhr, options.success, options.error, resolve, reject);\n\n        // convert paths to absolute paths\n        paths = paths.map((path) => {\n            return getAbsolutePathForApp(path);\n        });\n\n        xhr.send(JSON.stringify({\n            paths: paths,\n            descendants_only: (options.descendants_only || options.descendantsOnly) ?? false,\n            recursive: options.recursive ?? true,\n        }));\n    });\n};\n\nexport default deleteFSEntry;", "import * as utils from '../../../lib/utils.js';\nimport stat from './stat.js';\n\nconst getReadURL = async function (path, expiresIn = '24h') {\n    return new Promise(async (resolve, reject) => {\n        // If auth token is not provided and we are in the web environment,\n        // try to authenticate with Puter\n        if ( !puter.authToken && puter.env === 'web' ) {\n            try {\n                await puter.ui.authenticateWithPuter();\n            } catch (e) {\n                // if authentication fails, throw an error\n                reject('Authentication failed.');\n            }\n        }\n        try {\n            const { uid, is_dir } = (await stat.call(this, path));\n            if ( is_dir ) {\n                reject('Cannot create readUrl for directory');\n                return;\n            }\n\n            const xhr = utils.initXhr('/auth/create-access-token', this.APIOrigin, this.authToken);\n\n            utils.setupXhrEventHandlers(xhr, () => {\n            }, () => {\n            }, ({ token }) => {\n                resolve(`${this.APIOrigin}/token-read?uid=${encodeURIComponent(uid)}&token=${encodeURIComponent(token)}`);\n            }, reject);\n\n            xhr.send(JSON.stringify({\n                expiresIn,\n                permissions: [\n                    `fs:${uid}:read`,\n                ],\n            }));\n\n        } catch (e) {\n            reject(e);\n        }\n    });\n};\n\nexport default getReadURL;\n", "import * as utils from '../lib/utils.js';\nimport getAbsolutePathForApp from './FileSystem/utils/getAbsolutePathForApp.js';\n\nclass Hosting {\n    /**\n     * Creates a new instance with the given authentication token, API origin, and app ID,\n     *\n     * @class\n     * @param {string} authToken - Token used to authenticate the user.\n     * @param {string} APIOrigin - Origin of the API server. Used to build the API endpoint URLs.\n     * @param {string} appID - ID of the app to use.\n     */\n    constructor (context) {\n        this.authToken = context.authToken;\n        this.APIOrigin = context.APIOrigin;\n        this.appID = context.appID;\n    }\n\n    /**\n     * Sets a new authentication token.\n     *\n     * @param {string} authToken - The new authentication token.\n     * @memberof [Router]\n     * @returns {void}\n     */\n    setAuthToken (authToken) {\n        this.authToken = authToken;\n    }\n\n    /**\n     * Sets the API origin.\n     *\n     * @param {string} APIOrigin - The new API origin.\n     * @memberof [Apps]\n     * @returns {void}\n     */\n    setAPIOrigin (APIOrigin) {\n        this.APIOrigin = APIOrigin;\n    }\n\n    // todo document the `Subdomain` object.\n    list = async (...args) => {\n        return (await utils.make_driver_method([], 'puter-subdomains', undefined, 'select')(...args)).filter(e => !e.subdomain.startsWith('workers.puter.'));\n    };\n\n    create = async (...args) => {\n        let options = {};\n        // * allows for: puter.hosting.new('example-subdomain') *\n        if ( typeof args[0] === 'string' && args.length === 1 ) {\n            // if subdomain is in the format of a `subdomain.puter.site` or `subdomain.puter.com`, extract the subdomain\n            // and use it as the subdomain. This is to make development easier.\n            if ( args[0].match(/^[a-z0-9]+\\.puter\\.(site|com)$/) ) {\n                args[0] = args[0].split('.')[0];\n            }\n\n            options = { object: { subdomain: args[0] } };\n        }\n        // if there are two string arguments, assume they are the subdomain and the target directory\n        // * allows for: puter.hosting.new('example-subdomain', '/path/to/target') *\n        else if ( Array.isArray(args) && args.length === 2 && typeof args[0] === 'string' ) {\n            // if subdomain is in the format of a `subdomain.puter.site` or `subdomain.puter.com`, extract the subdomain\n            // and use it as the subdomain. This is to make development easier.\n            if ( args[0].match(/^[a-z0-9]+\\.puter\\.(site|com)$/) ) {\n                args[0] = args[0].split('.')[0];\n            }\n\n            // if the target directory is not an absolute path, make it an absolute path relative to the app's root directory\n            if ( args[1] ) {\n                args[1] = getAbsolutePathForApp(args[1]);\n            }\n\n            options = { object: { subdomain: args[0], root_dir: args[1] } };\n        }\n        // allows for: puter.hosting.new({ subdomain: 'subdomain' })\n        else if ( typeof args[0] === 'object' ) {\n            options = { object: args[0] };\n        }\n        // Call the original chat.complete method\n        return await utils.make_driver_method(['object'], 'puter-subdomains', undefined, 'create').call(this, options);\n    };\n\n    update = async (...args) => {\n        let options = {};\n        // If there are two string arguments, assume they are the subdomain and the target directory\n        // * allows for: puter.hosting.update('example-subdomain', '/path/to/target') *\n        if ( Array.isArray(args) && typeof args[0] === 'string' ) {\n            // if subdomain is in the format of a `subdomain.puter.site` or `subdomain.puter.com`, extract the subdomain\n            // and use it as the subdomain. This is to make development easier.\n            if ( args[0].match(/^[a-z0-9]+\\.puter\\.(site|com)$/) ) {\n                args[0] = args[0].split('.')[0];\n            }\n\n            // if the target directory is not an absolute path, make it an absolute path relative to the app's root directory\n            if ( args[1] ) {\n                args[1] = getAbsolutePathForApp(args[1]);\n            }\n\n            options = { id: { subdomain: args[0] }, object: { root_dir: args[1] ?? null } };\n        }\n\n        // Call the original chat.complete method\n        return await utils.make_driver_method(['object'], 'puter-subdomains', undefined, 'update').call(this, options);\n    };\n\n    get = async (...args) => {\n        let options = {};\n        // if there is one string argument, assume it is the subdomain\n        // * allows for: puter.hosting.get('example-subdomain') *\n        if ( Array.isArray(args) && typeof args[0] === 'string' ) {\n            // if subdomain is in the format of a `subdomain.puter.site` or `subdomain.puter.com`, extract the subdomain\n            // and use it as the subdomain. This is to make development easier.\n            if ( args[0].match(/^[a-z0-9]+\\.puter\\.(site|com)$/) ) {\n                args[0] = args[0].split('.')[0];\n            }\n\n            options = { id: { subdomain: args[0] } };\n        }\n        return utils.make_driver_method(['uid'], 'puter-subdomains', undefined, 'read').call(this, options);\n    };\n\n    delete = async (...args) => {\n        let options = {};\n        // if there is one string argument, assume it is the subdomain\n        // * allows for: puter.hosting.get('example-subdomain') *\n        if ( Array.isArray(args) && typeof args[0] === 'string' ) {\n            // if subdomain is in the format of a `subdomain.puter.site` or `subdomain.puter.com`, extract the subdomain\n            // and use it as the subdomain. This is to make development easier.\n            if ( args[0].match(/^[a-z0-9]+\\.puter\\.(site|com)$/) ) {\n                args[0] = args[0].split('.')[0];\n            }\n\n            options = { id: { subdomain: args[0] } };\n        }\n        return utils.make_driver_method(['uid'], 'puter-subdomains', undefined, 'delete').call(this, options);\n    };\n}\n\nexport default Hosting;\n", "import { TeePromise } from '@heyputer/putility/src/libs/promise.js';\nimport * as utils from '../lib/utils.js';\n\nconst gui_cache_keys = [\n    'has_set_default_app_user_permissions',\n    'window_sidebar_width',\n    'sidebar_items',\n    'menubar_style',\n    'user_preferences.auto_arrange_desktop',\n    'user_preferences.show_hidden_files',\n    'user_preferences.language',\n    'user_preferences.clock_visible',\n    'toolbar_auto_hide_enabled',\n    'has_seen_welcome_window',\n    'desktop_item_positions',\n    'desktop_icons_hidden',\n    'taskbar_position',\n    'has_seen_toolbar_animation',\n];\nclass KV {\n    MAX_KEY_SIZE = 1024;\n    MAX_VALUE_SIZE = 399 * 1024;\n\n    /**\n     * Creates a new instance with the given authentication token, API origin, and app ID,\n     *\n     * @class\n     * @param {string} authToken - Token used to authenticate the user.\n     * @param {string} APIOrigin - Origin of the API server. Used to build the API endpoint URLs.\n     * @param {string} appID - ID of the app to use.\n     */\n    constructor (context) {\n        this.authToken = context.authToken;\n        this.APIOrigin = context.APIOrigin;\n        this.appID = context.appID;\n\n        this.gui_cached = new TeePromise();\n        this.gui_cache_init = new TeePromise();\n        (async () => {\n            await this.gui_cache_init;\n            this.gui_cache_init = null;\n            const resp = await fetch(`${this.APIOrigin}/drivers/call`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'text/plain;actually=json',\n                },\n                body: JSON.stringify({\n                    interface: 'puter-kvstore',\n                    method: 'get',\n                    args: {\n                        key: gui_cache_keys,\n                    },\n                    auth_token: this.authToken,\n                }),\n            });\n            const arr_values = await resp.json();\n            if ( ! Array.isArray(arr_values?.result) ) {\n                this.gui_cached.resolve({});\n                setTimeout(() => {\n                    this.gui_cached = null;\n                }, 4000);\n                return;\n            }\n            const obj = {};\n            for ( let i = 0; i < gui_cache_keys.length; i++ ) {\n                obj[gui_cache_keys[i]] = arr_values.result[i];\n            }\n            this.gui_cached.resolve(obj);\n            setTimeout(() => {\n                this.gui_cached = null;\n            }, 4000);\n        })();\n    }\n\n    /**\n     * Sets a new authentication token.\n     *\n     * @param {string} authToken - The new authentication token.\n     * @memberof [KV]\n     * @returns {void}\n     */\n    setAuthToken (authToken) {\n        this.authToken = authToken;\n    }\n\n    /**\n     * Sets the API origin.\n     *\n     * @param {string} APIOrigin - The new API origin.\n     * @memberof [KV]\n     * @returns {void}\n     */\n    setAPIOrigin (APIOrigin) {\n        this.APIOrigin = APIOrigin;\n    }\n\n    /**\n     * @typedef {function(key: string, value: any, expireAt?: number): Promise<boolean>} SetFunction\n     * Resolves to 'true' on success, or rejects with an error on failure.\n     * @param {string} key - Cannot be undefined or null. Cannot be larger than 1KB.\n     * @param {any} value - Cannot be larger than 399KB.\n     * @param {number} [expireAt] - Optional expiration time for the key. Note that clients with a clock that is not in sync with the server may experience issues with this method.\n     * @memberof KV\n     */\n\n    /** @type {SetFunction} */\n    set = utils.make_driver_method(['key', 'value', 'expireAt'], 'puter-kvstore', undefined, 'set', {\n        /**\n         *\n         * @param {object} args\n         * @param {string} args.key\n         * @param {any} args.value\n         * @param {number} [args.expireAt]\n         * @memberof [KV]\n         * @returns\n         */\n        preprocess: (args) => {\n            // key cannot be undefined or null\n            if ( args.key === undefined || args.key === null ) {\n                throw { message: 'Key cannot be undefined', code: 'key_undefined' };\n            }\n            // key size cannot be larger than MAX_KEY_SIZE\n            if ( args.key.length > this.MAX_KEY_SIZE ) {\n                throw { message: `Key size cannot be larger than ${this.MAX_KEY_SIZE}`, code: 'key_too_large' };\n            }\n            // value size cannot be larger than MAX_VALUE_SIZE\n            if ( args.value && args.value.length > this.MAX_VALUE_SIZE ) {\n                throw { message: `Value size cannot be larger than ${this.MAX_VALUE_SIZE}`, code: 'value_too_large' };\n            }\n            return args;\n        },\n    });\n\n    /**\n     * Resolves to the value if the key exists, or `undefined` if the key does not exist. Rejects with an error on failure.\n     */\n    async get (...args) {\n        // Condition for gui boot cache\n        if (\n            typeof args[0] === 'string' &&\n            gui_cache_keys.includes(args[0]) &&\n            this.gui_cached !== null\n        ) {\n            this.gui_cache_init && this.gui_cache_init.resolve();\n            const cache = await this.gui_cached;\n            return cache[args[0]];\n        }\n\n        // Normal get\n        return await this.get_(...args);\n    }\n\n    get_ = utils.make_driver_method(['key'], 'puter-kvstore', undefined, 'get', {\n        preprocess: (args) => {\n            // key size cannot be larger than MAX_KEY_SIZE\n            if ( args.key.length > this.MAX_KEY_SIZE ) {\n                throw ({ message: `Key size cannot be larger than ${this.MAX_KEY_SIZE}`, code: 'key_too_large' });\n            }\n\n            return args;\n        },\n        transform: (res) => {\n            return res;\n        },\n    });\n\n    incr = async (...args) => {\n        let options = {};\n\n        // arguments are required\n        if ( !args || args.length === 0 ) {\n            throw ({ message: 'Arguments are required', code: 'arguments_required' });\n        }\n\n        options.key = args[0];\n        options.pathAndAmountMap = !args[1] ? { '': 1 } : typeof args[1] === 'number' ? { '': args[1] } : args[1];\n\n        // key size cannot be larger than MAX_KEY_SIZE\n        if ( options.key.length > this.MAX_KEY_SIZE ) {\n            throw ({ message: `Key size cannot be larger than ${this.MAX_KEY_SIZE}`, code: 'key_too_large' });\n        }\n\n        return utils.make_driver_method(['key'], 'puter-kvstore', undefined, 'incr').call(this, options);\n    };\n\n    decr = async (...args) => {\n        let options = {};\n\n        // arguments are required\n        if ( !args || args.length === 0 ) {\n            throw ({ message: 'Arguments are required', code: 'arguments_required' });\n        }\n\n        options.key = args[0];\n        options.pathAndAmountMap = !args[1] ? { '': 1 } : typeof args[1] === 'number' ? { '': args[1] } : args[1];\n\n        // key size cannot be larger than MAX_KEY_SIZE\n        if ( options.key.length > this.MAX_KEY_SIZE ) {\n            throw ({ message: `Key size cannot be larger than ${this.MAX_KEY_SIZE}`, code: 'key_too_large' });\n        }\n\n        return utils.make_driver_method(['key'], 'puter-kvstore', undefined, 'decr').call(this, options);\n    };\n\n    /**\n     * Set a time to live (in seconds) on a key. After the time to live has expired, the key will be deleted.\n     * Prefer this over expireAt if you want timestamp to be set by the server, to avoid issues with clock drift.\n     * @param  {string} key - The key to set the expiration on.\n     * @param  {number} ttl - The ttl\n     * @memberof [KV]\n     * @returns\n     */\n    expire = async (key, ttl) => {\n        let options = {};\n        options.key = key;\n        options.ttl = ttl;\n\n        // key size cannot be larger than MAX_KEY_SIZE\n        if ( options.key.length > this.MAX_KEY_SIZE ) {\n            throw ({ message: `Key size cannot be larger than ${this.MAX_KEY_SIZE}`, code: 'key_too_large' });\n        }\n\n        return utils.make_driver_method(['key', 'ttl'], 'puter-kvstore', undefined, 'expire').call(this, options);\n    };\n\n    /**\n     *\n     * Set the expiration for a key as a UNIX timestamp (in seconds). After the time has passed, the key will be deleted.\n     * Note that clients with a clock that is not in sync with the server may experience issues with this method.\n     * @param  {string} key - The key to set the expiration on.\n     * @param  {number} timestamp - The timestamp (in seconds since epoch) when the key will expire.\n     * @memberof [KV]\n     * @returns\n     */\n    expireAt = async (key, timestamp) => {\n        let options = {};\n        options.key = key;\n        options.timestamp = timestamp;\n        // key size cannot be larger than MAX_KEY_SIZE\n        if ( options.key.length > this.MAX_KEY_SIZE ) {\n            throw ({ message: `Key size cannot be larger than ${this.MAX_KEY_SIZE}`, code: 'key_too_large' });\n        }\n\n        return utils.make_driver_method(['key', 'timestamp'], 'puter-kvstore', undefined, 'expireAt').call(this, options);\n    };\n\n    // resolves to 'true' on success, or rejects with an error on failure\n    // will still resolve to 'true' if the key does not exist\n    del = utils.make_driver_method(['key'], 'puter-kvstore', undefined, 'del', {\n        preprocess: (args) => {\n            // key size cannot be larger than this.MAX_KEY_SIZE\n            if ( args.key.length > this.MAX_KEY_SIZE ) {\n                throw ({ message: `Key size cannot be larger than ${this.MAX_KEY_SIZE}`, code: 'key_too_large' });\n            }\n\n            return args;\n        },\n    });\n\n    list = async (...args) => {\n        let options = {};\n        let pattern;\n        let returnValues = false;\n\n        // list(true) or list(pattern, true) will return the key-value pairs\n        if ( (args && args.length === 1 && args[0] === true) || (args && args.length === 2 && args[1] === true) ) {\n            options = {};\n            returnValues = true;\n        }\n        // return only the keys, default behavior\n        else {\n            options = { as: 'keys' };\n        }\n\n        // list(pattern)\n        // list(pattern, true)\n        if ( (args && args.length === 1 && typeof args[0] === 'string') || (args && args.length === 2 && typeof args[0] === 'string' && args[1] === true) ) {\n            pattern = args[0];\n        }\n\n        return utils.make_driver_method([], 'puter-kvstore', undefined, 'list', {\n            transform: (res) => {\n                // glob pattern was provided\n                if ( pattern ) {\n                    // consider both the key and the value\n                    if ( ! returnValues ) {\n                        let keys = res.filter((key) => {\n                            return globMatch(pattern, key);\n                        });\n                        return keys;\n                    } else {\n                        let keys = res.filter((key_value_pair) => {\n                            return globMatch(pattern, key_value_pair.key);\n                        });\n                        return keys;\n                    }\n                }\n\n                return res;\n            },\n        }).call(this, options);\n    };\n\n    // resolve to 'true' on success, or rejects with an error on failure\n    // will still resolve to 'true' if there are no keys\n    flush = utils.make_driver_method([], 'puter-kvstore', undefined, 'flush');\n\n    // clear is an alias for flush\n    clear = this.flush;\n}\n\nfunction globMatch (pattern, str) {\n    const escapeRegExp = (string) => string.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n\n    let regexPattern = escapeRegExp(pattern)\n        .replace(/\\\\\\*/g, '.*') // Replace * with .*\n        .replace(/\\\\\\?/g, '.') // Replace ? with .\n        .replace(/\\\\\\[/g, '[') // Replace [ with [\n        .replace(/\\\\\\]/g, ']') // Replace ] with ]\n        .replace(/\\\\\\^/g, '^'); // Replace ^ with ^\n\n    let re = new RegExp(`^${regexPattern}$`);\n    return re.test(str);\n}\n\nexport default KV;", "export default class EventListener {\n    // Array of all supported event names.\n    #eventNames;\n\n    // Map of eventName -> array of listeners\n    #eventListeners;\n\n    constructor (eventNames) {\n        this.#eventNames = eventNames;\n\n        this.#eventListeners = (() => {\n            const map = new Map();\n            for ( let eventName of this.#eventNames ) {\n                map[eventName] = [];\n            }\n            return map;\n        })();\n    }\n\n    emit (eventName, data) {\n        if ( ! this.#eventNames.includes(eventName) ) {\n            console.error(`Event name '${eventName}' not supported`);\n            return;\n        }\n        this.#eventListeners[eventName].forEach((listener) => {\n            listener(data);\n        });\n    }\n\n    on (eventName, callback) {\n        if ( ! this.#eventNames.includes(eventName) ) {\n            console.error(`Event name '${eventName}' not supported`);\n            return;\n        }\n        this.#eventListeners[eventName].push(callback);\n        return this;\n    }\n\n    off (eventName, callback) {\n        if ( ! this.#eventNames.includes(eventName) ) {\n            console.error(`Event name '${eventName}' not supported`);\n            return;\n        }\n        const listeners = this.#eventListeners[eventName];\n        const index = listeners.indexOf(callback);\n        if ( index !== -1 ) {\n            listeners.splice(index, 1);\n        }\n        return this;\n    }\n}", "/* eslint-disable no-unreachable */\n/* eslint-disable no-case-declarations */\n// PACKET TYPES\nexport const CONNECT  = 0x01;\nexport const DATA     = 0x02;\nexport const CONTINUE = 0x03;\nexport const CLOSE    = 0x04;\nexport const INFO     = 0x05;\n\n// STREAM TYPES\nexport const TCP = 0x01;\nexport const UDP = 0x02;\n\n// Frequently used objects\nexport const textde = new TextDecoder();\nconst texten = new TextEncoder();\nexport const errors = {\n    0x01: 'Reason unspecified or unknown. Returning a more specific reason should be preferred.'\n    , 0x03: 'Unexpected stream closure due to a network error.'\n    , 0x41: 'Stream creation failed due to invalid information. This could be sent if the destination was a reserved address or the port is invalid.'\n    , 0x42: 'Stream creation failed due to an unreachable destination host. This could be sent if the destination is an domain which does not resolve to anything.'\n    , 0x43: 'Stream creation timed out due to the destination server not responding.'\n    , 0x44: 'Stream creation failed due to the destination server refusing the connection.'\n    , 0x47: 'TCP data transfer timed out.'\n    , 0x48: 'Stream destination address/domain is intentionally blocked by the proxy server.'\n    , 0x49: 'Connection throttled by the server.',\n};\n\n/**\n * @typedef {{packetType: number, streamID: number, streamType?: number, port?: number, hostname?: string, payload?: Uint8Array, reason?: number, remainingBuffer?: number}} ParsedWispPacket\n */\n\n/**\n * Parses a wisp packet fully\n *\n * @param {Uint8Array} data\n * @returns {ParsedWispPacket} Packet Info\n */\n\nexport function parseIncomingPacket (data) {\n    const view = new DataView(data.buffer, data.byteOffset);\n    const packetType = view.getUint8(0);\n    const streamID = view.getUint32(1, true);\n    switch ( packetType ) { // Packet payload starts at Offset 5\n    case CONNECT:\n        const streamType = view.getUint8(5);\n        const port = view.getUint16(6, true);\n        const hostname = textde.decode(data.subarray(8, data.length));\n        return { packetType, streamID, streamType, port, hostname };\n        break;\n    case DATA:\n        const payload = data.subarray(5, data.length);\n        return { packetType, streamID, payload };\n        break;\n    case CONTINUE:\n        const remainingBuffer = view.getUint32(5, true);\n        return { packetType, streamID, remainingBuffer };\n        break;\n    case CLOSE:\n        const reason = view.getUint8(5);\n        return { packetType, streamID, reason };\n        break;\n    case INFO:\n        const infoObj = {};\n        infoObj['version_major'] = view.getUint8(5);\n        infoObj['version_minor'] = view.getUint8(6);\n\n        let ptr = 7;\n        while ( ptr < data.length ) {\n            const extType = view.getUint8(ptr);\n            const extLength = view.getUint32(ptr + 1, true);\n            const payload = data.subarray(ptr + 5, ptr + 5 + extLength);\n            infoObj[extType] = payload;\n            ptr += 5 + extLength;\n        }\n        return { packetType, streamID, infoObj };\n        break;\n    }\n}\n/**\n * creates a wisp packet fully\n *\n * @param {ParsedWispPacket} instructions\n * @returns {Uint8Array} Constructed Packet\n */\n\nexport function createWispPacket (instructions) {\n    let size = 5;\n    switch ( instructions.packetType ) { // Pass 1: determine size of packet\n    case CONNECT:\n        instructions.hostEncoded = texten.encode(instructions.hostname);\n        size += 3 + instructions.hostEncoded.length;\n        break;\n    case DATA:\n        size += instructions.payload.byteLength;\n        break;\n    case CONTINUE:\n        size += 4;\n        break;\n    case CLOSE:\n        size += 1;\n        break;\n    case INFO:\n        size += 2;\n        if ( instructions.password )\n        {\n            size += 6;\n        }\n        if ( instructions.puterAuth ) {\n            instructions.passwordEncoded = texten.encode(instructions.puterAuth);\n            size += 8 + instructions.passwordEncoded.length;\n        }\n        break;\n    default:\n        throw new Error('Not supported');\n    }\n\n    let data = new Uint8Array(size);\n    const view = new DataView(data.buffer);\n    view.setUint8(0, instructions.packetType);\n    view.setUint32(1, instructions.streamID, true);\n    switch ( instructions.packetType ) { // Pass 2: fill out packet\n    case CONNECT:\n        view.setUint8(5, instructions.streamType);\n        view.setUint16(6, instructions.port, true);\n        data.set(instructions.hostEncoded, 8);\n        break;\n    case DATA:\n        data.set(instructions.payload, 5);\n        break;\n    case CONTINUE:\n        view.setUint32(5, instructions.remainingBuffer, true);\n        break;\n    case CLOSE:\n        view.setUint8(5, instructions.reason);\n        break;\n    case INFO:\n        // WISP 2.0\n        view.setUint8(5, 2);\n        view.setUint8(6, 0);\n\n        if ( instructions.password ) {\n            // PASSWORD AUTH REQUIRED\n            view.setUint8(7, 0x02); // Protocol ID (Password)\n            view.setUint32(8, 1, true);\n            view.setUint8(12, 0); // Password required? true\n        }\n\n        if ( instructions.puterAuth ) {\n            // PASSWORD AUTH REQUIRED\n            view.setUint8(7, 0x02); // Protocol ID (Password)\n            view.setUint32(8, 5 + instructions.passwordEncoded.length, true);\n            view.setUint8(12, 0);\n            view.setUint16(13, instructions.passwordEncoded.length, true);\n            data.set(instructions.passwordEncoded, 15);\n        }\n    }\n    return data;\n}", "import { CLOSE, CONNECT, DATA, CONTINUE, INFO, TCP, UDP, createWispPacket, parseIncomingPacket, textde } from './parsers.js';\n\nexport class PWispHandler {\n    _ws;\n    _nextStreamID = 1;\n    _bufferMax;\n    onReady = undefined;\n    streamMap = new Map();\n    constructor (wispURL, puterAuth) {\n        const setup = () => {\n            this._ws = new WebSocket(wispURL);\n            this._ws.binaryType = 'arraybuffer';\n            this._ws.onmessage = (event) => {\n                const parsed = parseIncomingPacket(new Uint8Array(event.data));\n                switch ( parsed.packetType ) {\n                case DATA:\n                    this.streamMap.get(parsed.streamID).dataCallBack(parsed.payload.slice(0)); // return a copy for the user to do as they please\n                    break;\n                case CONTINUE:\n                    if ( parsed.streamID === 0 ) {\n                        this._bufferMax = parsed.remainingBuffer;\n                        this._ws.onclose = () => {\n                            setTimeout(setup(), 1000);\n                        };\n                        if ( this.onReady ) {\n                            this.onReady();\n                        }\n                        return;\n                    }\n                    this.streamMap.get(parsed.streamID).buffer = parsed.remainingBuffer;\n                    this._continue();\n                    break;\n                case CLOSE:\n                    if ( parsed.streamID !== 0 )\n                    {\n                        this.streamMap.get(parsed.streamID).closeCallBack(parsed.reason);\n                    }\n                    break;\n                case INFO:\n                    puterAuth && this._ws.send(createWispPacket({\n                        packetType: INFO,\n                        streamID: 0,\n                        puterAuth,\n                    }));\n                    break;\n                }\n            };\n        };\n        setup();\n    }\n    _continue (streamID) {\n        const queue = this.streamMap.get(streamID).queue;\n        for ( let i = 0; i < queue.length; i++ ) {\n            this.write(streamID, queue.shift());\n        }\n    }\n    register (host, port, callbacks) {\n        const streamID = this._nextStreamID++;\n        this.streamMap.set(streamID, { queue: [], streamID, buffer: this._bufferMax, dataCallBack: callbacks.dataCallBack, closeCallBack: callbacks.closeCallBack });\n        this._ws.send(createWispPacket({\n            packetType: CONNECT,\n            streamType: TCP,\n            streamID: streamID,\n            hostname: host,\n            port: port,\n        }));\n        return streamID;\n    }\n\n    write (streamID, data) {\n        const streamData = this.streamMap.get(streamID);\n        if ( streamData.buffer > 0 ) {\n            streamData.buffer--;\n\n            this._ws.send(createWispPacket({\n                packetType: DATA,\n                streamID: streamID,\n                payload: data,\n            }));\n        } else {\n            streamData.queue.push(data);\n        }\n    }\n    close (streamID) {\n        this._ws.send(createWispPacket({\n            packetType: CLOSE,\n            streamID: streamID,\n            reason: 0x02,\n        }));\n    }\n}", "import EventListener from '../../lib/EventListener.js';\nimport { errors } from './parsers.js';\nimport { PWispHandler } from './PWispHandler.js';\nconst texten = new TextEncoder();\nconst requireAuth = false; // for initial launch\n\nexport let wispInfo = {\n    server: 'wss://puter.cafe/', // Unused currently\n    handler: undefined,\n};\n\nexport class PSocket extends EventListener {\n    _events = new Map();\n    _streamID;\n    constructor (host, port) {\n        super(['data', 'drain', 'open', 'error', 'close', 'tlsdata', 'tlsopen', 'tlsclose']);\n\n        (async () => {\n            if ( !puter.authToken && puter.env === 'web' && requireAuth ) {\n                try {\n                    await puter.ui.authenticateWithPuter();\n\n                } catch (e) {\n                    // if authentication fails, throw an error\n                    throw (e);\n                }\n            }\n            if ( ! wispInfo.handler ) {\n                // first launch -- lets init the socket\n                const { token: wispToken, server: wispServer } = (await (await fetch(`${puter.APIOrigin }/wisp/relay-token/create`, {\n                    method: 'POST',\n                    headers: {\n                        Authorization: puter.authToken ? `Bearer ${puter.authToken}` : '',\n                        'Content-Type': 'application/json',\n                    },\n                    body: JSON.stringify({}),\n                })).json());\n\n                wispInfo.handler = new PWispHandler(wispServer, wispToken);\n                // Wait for websocket to fully open\n                await new Promise((res, req) => {\n                    wispInfo.handler.onReady = res;\n                });\n            }\n\n            const callbacks = {\n                dataCallBack: (data) => {\n                    this.emit('data', data);\n                },\n                closeCallBack: (reason) => {\n                    if ( reason !== 0x02 ) {\n                        this.emit('error', new Error(errors[reason]));\n                        this.emit('close', true);\n                        return;\n                    }\n                    this.emit('close', false);\n                },\n            };\n\n            this._streamID = wispInfo.handler.register(host, port, callbacks);\n            setTimeout(() => {\n                this.emit('open', undefined);\n            }, 0);\n\n        })();\n    }\n    addListener (...args) {\n        this.on(...args);\n    }\n    write (data, callback) {\n        if ( data.buffer ) { // TypedArray\n            wispInfo.handler.write(this._streamID, data);\n            if ( callback ) callback();\n        } else if ( data.resize ) { // ArrayBuffer\n            data.write(this._streamID, new Uint8Array(data));\n            if ( callback ) callback();\n        } else if ( typeof (data) === 'string' ) {\n            wispInfo.handler.write(this._streamID, texten.encode(data));\n            if ( callback ) callback();\n        } else {\n            throw new Error('Invalid data type (not TypedArray, ArrayBuffer or String!!)');\n        }\n    }\n    close () {\n        wispInfo.handler.close(this._streamID);\n    }\n}", "/**\n * This file uses https://github.com/MercuryWorkshop/rustls-wasm authored by GitHub:@r58Playz under the MIT License\n */\n\nimport { PSocket } from './PSocket.js';\n\nlet rustls = undefined;\n\nexport class PTLSSocket extends PSocket {\n    constructor (...args) {\n        super(...args);\n        super.on('open', (async () => {\n            if ( ! rustls ) {\n                // Safari exists unfortunately without good ReadableStream support. Until that is fixed we need this.\n                if ( ! globalThis.ReadableByteStreamController ) {\n                    await import( /* webpackIgnore: true */ 'https://unpkg.com/web-streams-polyfill@3.0.2/dist/polyfill.js');\n                }\n                rustls = (await import( /* webpackIgnore: true */ 'https://puter-net.b-cdn.net/rustls.js'));\n                await rustls.default('https://puter-net.b-cdn.net/rustls.wasm');\n            }\n\n            let cancelled = false;\n            const readable = new ReadableStream({\n                /**\n                 *\n                 * @param {ReadableStreamDefaultController} controller\n                 */\n                start: (controller) => {\n                    super.on('data', (data) => {\n                        controller.enqueue(data.buffer);\n                    });\n                    super.on('close', () => {\n                        if ( ! cancelled )\n                        {\n                            controller.close();\n                        }\n                    });\n\n                },\n                pull: (controller) => {\n\n                },\n                cancel: () => {\n                    cancelled = true;\n                },\n\n            });\n\n            const writable = new WritableStream({\n                write: (chunk) => {\n                    super.write(chunk);\n                },\n                abort: () => {\n                    super.close();\n                },\n                close: () => {\n                    super.close();\n                },\n            });\n\n            let read, write;\n            try {\n                const TLSConnnection = await rustls.connect_tls(readable, writable, args[0]);\n                read = TLSConnnection.read;\n                write = TLSConnnection.write;\n            } catch (e) {\n                this.emit('error', new Error(`TLS Handshake failed: ${ e}`));\n                return;\n            }\n\n            this.writer = write.getWriter();\n            // writer.write(\"GET / HTTP/1.1\\r\\nHost: google.com\\r\\n\\r\\n\");\n            let reader = read.getReader();\n            let done = false;\n            this.emit('tlsopen', undefined);\n            try {\n                while ( !done ) {\n                    const { done: readerDone, value } = await reader.read();\n                    done = readerDone;\n                    if ( ! done ) {\n                        this.emit('tlsdata', value);\n                    }\n                }\n                this.emit('tlsclose', false);\n            } catch (e) {\n                this.emit('error', e);\n                this.emit('tlsclose', true);\n            }\n\n        }));\n    }\n    on (event, callback) {\n        if ( event === 'data' || event === 'open' || event === 'close' ) {\n            return super.on(`tls${ event}`, callback);\n        } else {\n            return super.on(event, callback);\n        }\n    }\n    write (data, callback) {\n        if ( data.buffer ) { // TypedArray\n            this.writer.write(data.slice(0).buffer).then(callback);\n        } else if ( data.resize ) { // ArrayBuffer\n            this.writer.write(data).then(callback);\n        } else if ( typeof (data) === 'string' ) {\n            this.writer.write(data).then(callback);\n        } else {\n            throw new Error('Invalid data type (not TypedArray, ArrayBuffer or String!!)');\n        }\n    }\n\n}", "// SO: https://stackoverflow.com/a/76332760/ under CC BY-SA 4.0\nfunction mergeUint8Arrays (...arrays) {\n    const totalSize = arrays.reduce((acc, e) => acc + e.length, 0);\n    const merged = new Uint8Array(totalSize);\n\n    arrays.forEach((array, i, arrays) => {\n        const offset = arrays.slice(0, i).reduce((acc, e) => acc + e.length, 0);\n        merged.set(array, offset);\n    });\n\n    return merged;\n}\n\nfunction parseHTTPHead (head) {\n    const lines = head.split('\\r\\n');\n\n    const firstLine = lines.shift().split(' ');\n    const status = Number(firstLine[1]);\n    const statusText = firstLine.slice(2).join(' ') || '';\n\n    const headersArray = [];\n    for ( const header of lines ) {\n        const splitHeaders = header.split(': ');\n        const key = splitHeaders[0];\n        const value = splitHeaders.slice(1).join(': ');\n        headersArray.push([key, value]);\n    }\n    new Headers(headersArray);\n    return { headers: new Headers(headersArray), statusText, status };\n}\n\n// Trivial stream based HTTP 1.1 client\n// TODO optional redirect handling\n\nexport function pFetch (...args) {\n    return new Promise(async (res, rej) => {\n        try {\n            const reqObj = new Request(...args);\n            const parsedURL = new URL(reqObj.url);\n            let headers = new Headers(reqObj.headers); // Make a headers object we can modify\n\n            // Socket creation: regular for HTTP, TLS for https\n            let socket;\n            if ( parsedURL.protocol === 'http:' ) {\n                socket = new puter.net.Socket(parsedURL.hostname,\n                                parsedURL.port || 80);\n            } else if ( parsedURL.protocol === 'https:' ) {\n                socket = new puter.net.tls.TLSSocket(parsedURL.hostname,\n                                parsedURL.port || 443);\n            } else {\n                const errorMsg = `Failed to fetch. URL scheme \"${parsedURL.protocol}\" is not supported.`;\n\n                // Log the error\n                if ( globalThis.puter?.apiCallLogger?.isEnabled() ) {\n                    globalThis.puter.apiCallLogger.logRequest({\n                        service: 'network',\n                        operation: 'pFetch',\n                        params: { url: reqObj.url, method: reqObj.method },\n                        error: { message: errorMsg },\n                    });\n                }\n\n                rej(errorMsg);\n                return;\n            }\n\n            // Sending default UA\n            if ( ! headers.get('user-agent') ) {\n                headers.set('user-agent', navigator.userAgent);\n            }\n\n            let reqHead = `${reqObj.method} ${parsedURL.pathname}${parsedURL.search} HTTP/1.1\\r\\nHost: ${parsedURL.host}\\r\\nConnection: close\\r\\n`;\n            for ( const [key, value] of headers ) {\n                reqHead += `${key}: ${value}\\r\\n`;\n            }\n            let requestBody;\n            if ( reqObj.body ) {\n                requestBody = new Uint8Array(await reqObj.arrayBuffer());\n                // If we have a body, we need to set the content length\n                if ( ! headers.has('content-length') ) {\n                    headers.set('content-length', requestBody.length);\n                } else if (\n                    headers.get('content-length') !== String(requestBody.length)\n                ) {\n                    return rej('Content-Length header does not match the body length. Please check your request.');\n                }\n                reqHead += `Content-Length: ${requestBody.length}\\r\\n`;\n            }\n\n            reqHead += '\\r\\n';\n\n            socket.on('open', async () => {\n                socket.write(reqHead); // Send headers\n                if ( requestBody ) {\n                    socket.write(requestBody); // Send body if present\n                }\n            });\n            const decoder = new TextDecoder();\n            let responseHead = '';\n            let dataOffset = -1;\n            const fullDataParts = [];\n            let responseReturned = false;\n            let contentLength = -1;\n            let ingestedContent = 0;\n            let chunkedTransfer = false;\n            let currentChunkLeft = -1;\n            let buffer = new Uint8Array(0);\n\n            const outStream = new ReadableStream({\n                start (controller) {\n                    // This is annoyingly long\n                    function parseIncomingChunk (data) {\n                        // append new data to our rolling buffer\n                        const tmp = new Uint8Array(buffer.length + data.length);\n                        tmp.set(buffer, 0);\n                        tmp.set(data, buffer.length);\n                        buffer = tmp;\n\n                        // pull out as many complete chunks (or headers) as we can\n                        while ( true ) {\n                            if ( currentChunkLeft > 0 ) {\n                                // were in the middle of reading a chunk body\n                                // need size + 2 bytes (for trailing \\r\\n)\n                                if ( buffer.length >= currentChunkLeft + 2 ) {\n                                    // full body + CRLF available\n                                    const chunk = buffer.slice(0, currentChunkLeft);\n                                    controller.enqueue(chunk);\n\n                                    // strip body + CRLF and reset for next header\n                                    buffer = buffer.slice(currentChunkLeft + 2);\n                                    currentChunkLeft = 0;\n                                } else {\n                                    // only a partial body available\n                                    controller.enqueue(buffer);\n                                    currentChunkLeft -= buffer.length;\n                                    buffer = new Uint8Array(0);\n                                    break; // wait for more data\n                                }\n                            } else {\n                                // we need to parse the next size line\n                                // find the first \"\\r\\n\"\n                                let idx = -1;\n                                for ( let i = 0; i + 1 < buffer.length; i++ ) {\n                                    if (\n                                        buffer[i] === 0x0d &&\n                                        buffer[i + 1] === 0x0a\n                                    ) {\n                                        idx = i;\n                                        break;\n                                    }\n                                }\n                                if ( idx < 0 ) {\n                                    // we dont yet have a full size line\n                                    break;\n                                }\n\n                                // decode just the size line as ASCII hex\n                                const sizeText = decoder\n                                    .decode(buffer.slice(0, idx))\n                                    .trim();\n                                currentChunkLeft = parseInt(sizeText, 16);\n                                if ( isNaN(currentChunkLeft) ) {\n                                    controller.error('Invalid chunk length from server');\n                                }\n                                // strip off the size line + CRLF\n                                buffer = buffer.slice(idx + 2);\n\n                                // zero-length => end of stream\n                                if ( currentChunkLeft === 0 ) {\n                                    responseReturned = true;\n                                    controller.close();\n                                    return;\n                                }\n                            }\n                        }\n                    }\n                    socket.on('data', (data) => {\n                        // Dataoffset is set to another value once head is returned, its safe to assume all remaining data is body\n                        if ( dataOffset !== -1 && !chunkedTransfer ) {\n                            controller.enqueue(data);\n                            ingestedContent += data.length;\n                        }\n\n                        // We dont have the full responseHead yet\n                        if ( dataOffset === -1 ) {\n                            fullDataParts.push(data);\n                            responseHead += decoder.decode(data, { stream: true });\n                        }\n                        if ( chunkedTransfer ) {\n                            parseIncomingChunk(data);\n                        }\n\n                        // See if we have the HEAD of an HTTP/1.1 yet\n                        if ( responseHead.indexOf('\\r\\n\\r\\n') !== -1 ) {\n                            dataOffset = responseHead.indexOf('\\r\\n\\r\\n');\n                            responseHead = responseHead.slice(0, dataOffset);\n                            const parsedHead = parseHTTPHead(responseHead);\n                            contentLength = Number(parsedHead.headers.get('content-length'));\n                            chunkedTransfer =\n                                parsedHead.headers.get('transfer-encoding') ===\n                                'chunked';\n\n                            // Log the response\n                            if ( globalThis.puter?.apiCallLogger?.isEnabled() ) {\n                                globalThis.puter.apiCallLogger.logRequest({\n                                    service: 'network',\n                                    operation: 'pFetch',\n                                    params: { url: reqObj.url, method: reqObj.method },\n                                    result: { status: parsedHead.status, statusText: parsedHead.statusText },\n                                });\n                            }\n\n                            // Return initial response object\n                            res(new Response(outStream, parsedHead));\n\n                            const residualBody = mergeUint8Arrays(...fullDataParts).slice(dataOffset + 4);\n                            if ( ! chunkedTransfer ) {\n                                // Add any content we have but isn't part of the head into the body stream\n                                ingestedContent += residualBody.length;\n                                controller.enqueue(residualBody);\n                            } else {\n                                parseIncomingChunk(residualBody);\n                            }\n                        }\n\n                        if (\n                            contentLength !== -1 &&\n                            ingestedContent === contentLength &&\n                            !chunkedTransfer\n                        ) {\n                            // Work around for the close bug for compliant HTTP/1.1 servers\n                            if ( ! responseReturned ) {\n                                responseReturned = true;\n                                controller.close();\n                            }\n                        }\n                    });\n                    socket.on('close', () => {\n                        if ( ! responseReturned ) {\n                            responseReturned = true;\n                            controller.close();\n                        }\n                    });\n                    socket.on('error', (reason) => {\n                        // Log the error\n                        if ( globalThis.puter?.apiCallLogger?.isEnabled() ) {\n                            globalThis.puter.apiCallLogger.logRequest({\n                                service: 'network',\n                                operation: 'pFetch',\n                                params: { url: reqObj.url, method: reqObj.method },\n                                error: { message: `Socket errored with the following reason: ${ reason}` },\n                            });\n                        }\n                        rej(`Socket errored with the following reason: ${ reason}`);\n                    });\n                },\n            });\n        } catch (e) {\n            // Log unexpected errors\n            if ( globalThis.puter?.apiCallLogger?.isEnabled() ) {\n                globalThis.puter.apiCallLogger.logRequest({\n                    service: 'network',\n                    operation: 'pFetch',\n                    params: { url: reqObj.url, method: reqObj.method },\n                    error: { message: e.message || e.toString(), stack: e.stack },\n                });\n            }\n            rej(e);\n        }\n    });\n}\n", "import * as utils from '../lib/utils.js';\n\nclass OS {\n    /**\n     * Creates a new instance with the given authentication token, API origin, and app ID,\n     *\n     * @class\n     * @param {string} authToken - Token used to authenticate the user.\n     * @param {string} APIOrigin - Origin of the API server. Used to build the API endpoint URLs.\n     * @param {string} appID - ID of the app to use.\n     */\n    constructor (context) {\n        this.authToken = context.authToken;\n        this.APIOrigin = context.APIOrigin;\n        this.appID = context.appID;\n    }\n\n    /**\n     * Sets a new authentication token.\n     *\n     * @param {string} authToken - The new authentication token.\n     * @memberof [OS]\n     * @returns {void}\n     */\n    setAuthToken (authToken) {\n        this.authToken = authToken;\n    }\n\n    /**\n     * Sets the API origin.\n     *\n     * @param {string} APIOrigin - The new API origin.\n     * @memberof [Apps]\n     * @returns {void}\n     */\n    setAPIOrigin (APIOrigin) {\n        this.APIOrigin = APIOrigin;\n    }\n\n    user = function (...args) {\n        let options;\n\n        // If first argument is an object, it's the options\n        if ( typeof args[0] === 'object' && args[0] !== null ) {\n            options = args[0];\n        } else {\n            // Otherwise, we assume separate arguments are provided\n            options = {\n                success: args[0],\n                error: args[1],\n            };\n        }\n\n        let query = '';\n        if ( options?.query ) {\n            query = `?${ new URLSearchParams(options.query).toString()}`;\n        }\n\n        return new Promise((resolve, reject) => {\n            const xhr = utils.initXhr(`/whoami${ query}`, this.APIOrigin, this.authToken, 'get');\n\n            // set up event handlers for load and error events\n            utils.setupXhrEventHandlers(xhr, options.success, options.error, resolve, reject);\n\n            xhr.send();\n        });\n    };\n\n    version = function (...args) {\n        let options;\n\n        // If first argument is an object, it's the options\n        if ( typeof args[0] === 'object' && args[0] !== null ) {\n            options = args[0];\n        } else {\n            // Otherwise, we assume separate arguments are provided\n            options = {\n                success: args[0],\n                error: args[1],\n                // Add more if needed...\n            };\n        }\n\n        return new Promise((resolve, reject) => {\n            const xhr = utils.initXhr('/version', this.APIOrigin, this.authToken, 'get');\n\n            // set up event handlers for load and error events\n            utils.setupXhrEventHandlers(xhr, options.success, options.error, resolve, reject);\n\n            xhr.send();\n        });\n    };\n}\n\nexport default OS;", "export default class Perms {\n    constructor (context) {\n        this.authToken = context.authToken;\n        this.APIOrigin = context.APIOrigin;\n    }\n    setAuthToken (authToken) {\n        this.authToken = authToken;\n    }\n    setAPIOrigin (APIOrigin) {\n        this.APIOrigin = APIOrigin;\n    }\n    async req_ (route, body) {\n        const resp = await fetch(this.APIOrigin + route, {\n            method: body ? 'POST' : 'GET',\n            headers: {\n                Authorization: `Bearer ${this.authToken}`,\n                'Content-Type': 'application/json',\n            },\n            ...(body ? { body: JSON.stringify(body) } : {}),\n        });\n        return await resp.json();\n    }\n\n    // Grant Permissions\n    async grantUser (target_username, permission) {\n        return await this.req_('/auth/grant-user-user', {\n            target_username, permission,\n        });\n    }\n\n    async grantGroup (group_uid, permission) {\n        return await this.req_('/auth/grant-user-group', {\n            group_uid, permission,\n        });\n    }\n\n    async grantApp (app_uid, permission) {\n        return await this.req_('/auth/grant-user-app', {\n            app_uid, permission,\n        });\n    }\n\n    async grantAppAnyUser (app_uid, permission) {\n        return await this.req_('/auth/grant-dev-app', {\n            app_uid, permission,\n        });\n    }\n\n    async grantOrigin (origin, permission) {\n        return await this.req_('/auth/grant-user-app', {\n            origin, permission,\n        });\n    }\n\n    // Revoke Permissions\n    async revokeUser (target_username, permission) {\n        return await this.req_('/auth/revoke-user-user', {\n            target_username, permission,\n        });\n    }\n\n    async revokeGroup (group_uid, permission) {\n        return await this.req_('/auth/revoke-user-group', {\n            group_uid, permission,\n        });\n    }\n\n    async revokeApp (app_uid, permission) {\n        return await this.req_('/auth/revoke-user-app', {\n            app_uid, permission,\n        });\n    }\n\n    async revokeAppAnyUser (app_uid, permission) {\n        return await this.req_('/auth/revoke-dev-app', {\n            app_uid, permission,\n        });\n    }\n\n    async revokeOrigin (origin, permission) {\n        return await this.req_('/auth/revoke-user-app', {\n            origin, permission,\n        });\n    }\n\n    // Group Management\n    async createGroup (metadata = {}, extra = {}) {\n        return await this.req_('/group/create', {\n            metadata, extra,\n        });\n    }\n    async addUsersToGroup (uid, usernames) {\n        return await this.req_('/group/add-users', {\n            uid,\n            users: usernames ?? [],\n        });\n    }\n    async removeUsersFromGroup (uid, usernames) {\n        return await this.req_('/group/remove-users', {\n            uid,\n            users: usernames ?? [],\n        });\n    }\n    async listGroups () {\n        return await this.req_('/group/list');\n    }\n}\n", "export class RequestError extends Error {\n    constructor (message) {\n        super(message);\n        this.name = 'RequestError'; // thanks minifier\n    }\n}\n", "import { RequestError } from '../lib/RequestError.js';\n\nexport default class Threads {\n    constructor (context) {\n        this.authToken = context.authToken;\n        this.APIOrigin = context.APIOrigin;\n    }\n    setAuthToken (authToken) {\n        this.authToken = authToken;\n    }\n    setAPIOrigin (APIOrigin) {\n        this.APIOrigin = APIOrigin;\n    }\n    async req_ (method, route, body) {\n        const resp = await fetch(this.APIOrigin + route, {\n            method,\n            headers: {\n                Authorization: `Bearer ${this.authToken}`,\n                ...(body ? { 'Content-Type': 'application/json' } : {}),\n            },\n            ...(body ? { body: JSON.stringify(body) } : {}),\n        });\n        if ( ! resp.ok ) {\n            const resp_data = await resp.json();\n            const err = new RequestError(resp_data.message);\n            err.response = resp_data;\n            throw err;\n        }\n        return await resp.json();\n    }\n\n    async create (spec, parent) {\n        if ( typeof spec === 'string' ) spec = { text: spec };\n        return await this.req_('POST', '/threads/create', {\n            ...spec,\n            ...(parent ? { parent } : {}),\n        });\n    }\n\n    async edit (uid, spec = {}) {\n        if ( typeof spec === 'string' ) spec = { text: spec };\n        await this.req_('PUT', `/threads/edit/${ encodeURIComponent(uid)}`, {\n            ...spec,\n        });\n    }\n\n    async delete (uid) {\n        await this.req_('DELETE', `/threads/${ encodeURIComponent(uid)}`);\n    }\n\n    async list (uid, page, options) {\n        return await this.req_('POST',\n                        `/threads/list/${ encodeURIComponent(uid) }/${ page}`,\n                        options ?? {});\n    }\n\n    async subscribe (uid, callback) {\n        puter.fs.socket.emit('thread.sub-request', { uid });\n\n        // socket.io, which we use unfortunatelly, doesn't handle\n        // wildcard events, so we have to just put them all here.\n        const events = [\n            'post', 'edit', 'delete', 'child-edit', 'child-delete',\n        ];\n\n        for ( const event of events ) {\n            puter.fs.socket.on(`thread.${event}`, (data) => {\n                if ( data.subscription === uid ) callback(event, data);\n            });\n        }\n    }\n}\n", "import putility from '@heyputer/putility';\nimport EventListener from '../lib/EventListener.js';\nimport FSItem from './FSItem.js';\nimport PuterDialog from './PuterDialog.js';\n\nconst FILE_SAVE_CANCELLED = Symbol('FILE_SAVE_CANCELLED');\nconst FILE_OPEN_CANCELLED = Symbol('FILE_OPEN_CANCELLED');\n\n// AppConnection provides an API for interacting with another app.\n// It's returned by UI methods, and cannot be constructed directly by user code.\n// For basic usage:\n// - postMessage(message)        Send a message to the target app\n// - on('message', callback)     Listen to messages from the target app\nclass AppConnection extends EventListener {\n    // targetOrigin for postMessage() calls to Puter\n    #puterOrigin = '*';\n\n    // Whether the target app is open\n    #isOpen;\n\n    // Whether the target app uses the Puter SDK, and so accepts messages\n    // (Closing and close events will still function.)\n    #usesSDK;\n\n    static from (values, context) {\n        const connection = new AppConnection(context, {\n            target: values.appInstanceID,\n            usesSDK: values.usesSDK,\n        });\n\n        // When a connection is established the app is able to\n        // provide some additional information about itself\n        connection.response = values.response;\n\n        return connection;\n    }\n\n    constructor (context, { target, usesSDK }) {\n        super([\n            'message', // The target sent us something with postMessage()\n            'close', // The target app was closed\n        ]);\n        this.messageTarget = context.messageTarget;\n        this.appInstanceID = context.appInstanceID;\n        this.targetAppInstanceID = target;\n        this.#isOpen = true;\n        this.#usesSDK = usesSDK;\n\n        this.log = context.puter.logger.fields({\n            category: 'ipc',\n        });\n        this.log.fields({\n            cons_source: context.appInstanceID,\n            source: context.puter.appInstanceID,\n            target,\n        }).info(`AppConnection created to ${target}`, this);\n\n        // TODO: Set this.#puterOrigin to the puter origin\n\n        (globalThis.document) && window.addEventListener('message', event => {\n            if ( event.data.msg === 'messageToApp' ) {\n                if ( event.data.appInstanceID !== this.targetAppInstanceID ) {\n                    // Message is from a different AppConnection; ignore it.\n                    return;\n                }\n                // TODO: does this check really make sense?\n                if ( event.data.targetAppInstanceID !== this.appInstanceID ) {\n                    console.error(`AppConnection received message intended for wrong app! appInstanceID=${this.appInstanceID}, target=${event.data.targetAppInstanceID}`);\n                    return;\n                }\n                this.emit('message', event.data.contents);\n                return;\n            }\n\n            if ( event.data.msg === 'appClosed' ) {\n                if ( event.data.appInstanceID !== this.targetAppInstanceID ) {\n                    // Message is from a different AppConnection; ignore it.\n                    return;\n                }\n\n                this.#isOpen = false;\n                this.emit('close', {\n                    appInstanceID: this.targetAppInstanceID,\n                    statusCode: event.data.statusCode,\n                });\n            }\n        });\n    }\n\n    // Does the target app use the Puter SDK? If not, certain features will be unavailable.\n    get usesSDK () {\n        return this.#usesSDK;\n    }\n\n    // Send a message to the target app. Requires the target to use the Puter SDK.\n    postMessage (message) {\n        if ( ! this.#isOpen ) {\n            console.warn('Trying to post message on a closed AppConnection');\n            return;\n        }\n\n        if ( ! this.#usesSDK ) {\n            console.warn('Trying to post message to a non-SDK app');\n            return;\n        }\n\n        this.messageTarget.postMessage({\n            msg: 'messageToApp',\n            appInstanceID: this.appInstanceID,\n            targetAppInstanceID: this.targetAppInstanceID,\n            // Note: there was a TODO comment here about specifying the origin,\n            // but this should not happen here; the origin should be specified\n            // on the other side where the expected origin for the app is known.\n            targetAppOrigin: '*',\n            contents: message,\n        }, this.#puterOrigin);\n    }\n\n    // Attempt to close the target application\n    close () {\n        if ( ! this.#isOpen ) {\n            console.warn('Trying to close an app on a closed AppConnection');\n            return;\n        }\n\n        this.messageTarget.postMessage({\n            msg: 'closeApp',\n            appInstanceID: this.appInstanceID,\n            targetAppInstanceID: this.targetAppInstanceID,\n        }, this.#puterOrigin);\n    }\n}\n\nclass UI extends EventListener {\n    // Used to generate a unique message id for each message sent to the host environment\n    // we start from 1 because 0 is falsy and we want to avoid that for the message id\n    #messageID = 1;\n\n    // Holds the callback functions for the various events\n    // that are triggered when a watched item has changed.\n    itemWatchCallbackFunctions = [];\n\n    // Holds the unique app instance ID that is provided by the host environment\n    appInstanceID;\n\n    // Holds the unique app instance ID for the parent (if any), which is provided by the host environment\n    parentInstanceID;\n\n    // If we have a parent app, holds an AppConnection to it\n    #parentAppConnection = null;\n\n    // Holds the callback functions for the various events\n    // that can be triggered by the host environment's messages.\n    #callbackFunctions = [];\n\n    // onWindowClose() is executed right before the window is closed. Users can override this function\n    // to perform a variety of tasks right before window is closed. Users can override this function.\n    #onWindowClose;\n\n    // When an item is opened by this app in any way onItemsOpened() is executed. Users can override this function.\n    #onItemsOpened;\n\n    #onLaunchedWithItems;\n\n    // List of events that can be listened to.\n    #eventNames;\n\n    // The most recent value that we received for a given broadcast, by name.\n    #lastBroadcastValue = new Map(); // name -> data\n\n    #overlayActive = false;\n    #overlayTimer = null;\n\n    // Replaces boilerplate for most methods: posts a message to the GUI with a unique ID, and sets a callback for it.\n    #postMessageWithCallback (name, resolve, args = {}) {\n        const msg_id = this.#messageID++;\n        this.messageTarget?.postMessage({\n            msg: name,\n            env: this.env,\n            appInstanceID: this.appInstanceID,\n            uuid: msg_id,\n            ...args,\n        }, '*');\n        //register callback\n        this.#callbackFunctions[msg_id] = resolve;\n    }\n\n    #postMessageWithObject (name, value) {\n        const dehydrator = this.util.rpc.getDehydrator({\n            target: this.messageTarget,\n        });\n        this.messageTarget?.postMessage({\n            msg: name,\n            env: this.env,\n            appInstanceID: this.appInstanceID,\n            value: dehydrator.dehydrate(value),\n        }, '*');\n    };\n\n    async #ipc_stub ({\n        callback,\n        method,\n        parameters,\n    }) {\n        let p, resolve;\n        await new Promise(done_setting_resolve => {\n            p = new Promise(resolve_ => {\n                resolve = resolve_;\n                done_setting_resolve();\n            });\n        });\n        const callback_id = this.util.rpc.registerCallback(resolve);\n        this.messageTarget?.postMessage({\n            $: 'puter-ipc',\n            v: 2,\n            appInstanceID: this.appInstanceID,\n            env: this.env,\n            msg: method,\n            parameters,\n            uuid: callback_id,\n        }, '*');\n        const ret = await p;\n        if ( callback ) callback(ret);\n        return ret;\n    };\n\n    constructor (context, { appInstanceID, parentInstanceID }) {\n        const eventNames = [\n            'localeChanged',\n            'themeChanged',\n            'connection',\n        ];\n        super(eventNames);\n        this.#eventNames = eventNames;\n        this.context = context;\n        this.appInstanceID = appInstanceID;\n        this.parentInstanceID = parentInstanceID;\n        this.appID = context.appID;\n        this.env = context.env;\n        this.util = context.util;\n\n        if ( this.env === 'app' ) {\n            this.messageTarget = window.parent;\n        }\n        else if ( this.env === 'gui' ) {\n            return;\n        }\n\n        // Context to pass to AppConnection instances\n        this.context = this.context.sub({\n            appInstanceID: this.appInstanceID,\n            messageTarget: this.messageTarget,\n        });\n\n        if ( this.parentInstanceID ) {\n            this.#parentAppConnection = new AppConnection(this.context, {\n                target: this.parentInstanceID,\n                usesSDK: true,\n            });\n        }\n\n        // Tell the host environment that this app is using the Puter SDK and is ready to receive messages,\n        // this will allow the OS to send custom messages to the app\n        this.messageTarget?.postMessage({\n            msg: 'READY',\n            appInstanceID: this.appInstanceID,\n        }, '*');\n\n        // When this app's window is focused send a message to the host environment\n        (globalThis.document) && window.addEventListener('focus', (e) => {\n            this.messageTarget?.postMessage({\n                msg: 'windowFocused',\n                appInstanceID: this.appInstanceID,\n            }, '*');\n        });\n\n        // Bind the message event listener to the window\n        let lastDraggedOverElement = null;\n        (globalThis.document) && window.addEventListener('message', async (e) => {\n            if ( ! e.data ) return;\n            // `error`\n            if ( e.data.error ) {\n                throw e.data.error;\n            }\n            // `focus` event\n            else if ( e.data.msg && e.data.msg === 'focus' ) {\n                window.focus();\n            }\n            // `click` event\n            else if ( e.data.msg && e.data.msg === 'click' ) {\n                // Get the element that was clicked on and click it\n                const clicked_el = document.elementFromPoint(e.data.x, e.data.y);\n                if ( clicked_el !== null )\n                {\n                    clicked_el.click();\n                }\n            }\n            // `dragover` event based on the `drag` event from the host environment\n            else if ( e.data.msg && e.data.msg === 'drag' ) {\n                // Get the element being dragged over\n                const draggedOverElement = document.elementFromPoint(e.data.x, e.data.y);\n                if ( draggedOverElement !== lastDraggedOverElement ) {\n                    // If the last element exists and is different from the current, dispatch a dragleave on it\n                    if ( lastDraggedOverElement ) {\n                        const dragLeaveEvent = new Event('dragleave', {\n                            bubbles: true,\n                            cancelable: true,\n                            clientX: e.data.x,\n                            clientY: e.data.y,\n                        });\n                        lastDraggedOverElement.dispatchEvent(dragLeaveEvent);\n                    }\n                    // If the current element exists and is different from the last, dispatch dragenter on it\n                    if ( draggedOverElement ) {\n                        const dragEnterEvent = new Event('dragenter', {\n                            bubbles: true,\n                            cancelable: true,\n                            clientX: e.data.x,\n                            clientY: e.data.y,\n                        });\n                        draggedOverElement.dispatchEvent(dragEnterEvent);\n                    }\n\n                    // Update the lastDraggedOverElement\n                    lastDraggedOverElement = draggedOverElement;\n                }\n            }\n            // `drop` event\n            else if ( e.data.msg && e.data.msg === 'drop' ) {\n                if ( lastDraggedOverElement ) {\n                    const dropEvent = new CustomEvent('drop', {\n                        bubbles: true,\n                        cancelable: true,\n                        detail: {\n                            clientX: e.data.x,\n                            clientY: e.data.y,\n                            items: e.data.items,\n                        },\n                    });\n                    lastDraggedOverElement.dispatchEvent(dropEvent);\n\n                    // Reset the lastDraggedOverElement\n                    lastDraggedOverElement = null;\n                }\n            }\n            // windowWillClose\n            else if ( e.data.msg === 'windowWillClose' ) {\n                // If the user has not overridden onWindowClose() then send a message back to the host environment\n                // to let it know that it is ok to close the window.\n                if ( this.#onWindowClose === undefined ) {\n                    this.messageTarget?.postMessage({\n                        msg: true,\n                        appInstanceID: this.appInstanceID,\n                        original_msg_id: e.data.msg_id,\n                    }, '*');\n                }\n                // If the user has overridden onWindowClose() then send a message back to the host environment\n                // to let it know that it is NOT ok to close the window. Then execute onWindowClose() and the user will\n                // have to manually close the window.\n                else {\n                    this.messageTarget?.postMessage({\n                        msg: false,\n                        appInstanceID: this.appInstanceID,\n                        original_msg_id: e.data.msg_id,\n                    }, '*');\n                    this.#onWindowClose();\n                }\n            }\n            // itemsOpened\n            else if ( e.data.msg === 'itemsOpened' ) {\n                // If the user has not overridden onItemsOpened() then only send a message back to the host environment\n                if ( this.#onItemsOpened === undefined ) {\n                    this.messageTarget?.postMessage({\n                        msg: true,\n                        appInstanceID: this.appInstanceID,\n                        original_msg_id: e.data.msg_id,\n                    }, '*');\n                }\n                // If the user has overridden onItemsOpened() then send a message back to the host environment\n                // and execute onItemsOpened()\n                else {\n                    this.messageTarget?.postMessage({\n                        msg: false,\n                        appInstanceID: this.appInstanceID,\n                        original_msg_id: e.data.msg_id,\n                    }, '*');\n\n                    let items = [];\n                    if ( e.data.items.length > 0 ) {\n                        for ( let index = 0; index < e.data.items.length; index++ )\n                        {\n                            items.push(new FSItem(e.data.items[index]));\n                        }\n                    }\n                    this.#onItemsOpened(items);\n                }\n            }\n            // getAppDataSucceeded\n            else if ( e.data.msg === 'getAppDataSucceeded' ) {\n                let appDataItem = new FSItem(e.data.item);\n                if ( e.data.original_msg_id && this.#callbackFunctions[e.data.original_msg_id] ) {\n                    this.#callbackFunctions[e.data.original_msg_id](appDataItem);\n                }\n            }\n            // instancesOpenSucceeded\n            else if ( e.data.msg === 'instancesOpenSucceeded' ) {\n                if ( e.data.original_msg_id && this.#callbackFunctions[e.data.original_msg_id] ) {\n                    this.#callbackFunctions[e.data.original_msg_id](e.data.instancesOpen);\n                }\n            }\n            // readAppDataFileSucceeded\n            else if ( e.data.msg === 'readAppDataFileSucceeded' ) {\n                let appDataItem = new FSItem(e.data.item);\n                if ( e.data.original_msg_id && this.#callbackFunctions[e.data.original_msg_id] ) {\n                    this.#callbackFunctions[e.data.original_msg_id](appDataItem);\n                }\n            }\n            // readAppDataFileFailed\n            else if ( e.data.msg === 'readAppDataFileFailed' ) {\n                if ( e.data.original_msg_id && this.#callbackFunctions[e.data.original_msg_id] ) {\n                    this.#callbackFunctions[e.data.original_msg_id](null);\n                }\n            }\n            // Determine if this is a response to a previous message and if so, is there\n            // a callback function for this message? if answer is yes to both then execute the callback\n            else if ( e.data.original_msg_id !== undefined && this.#callbackFunctions[e.data.original_msg_id] ) {\n                if ( e.data.msg === 'fileOpenPicked' ) {\n                    // 1 item returned\n                    if ( e.data.items.length === 1 ) {\n                        this.#callbackFunctions[e.data.original_msg_id](new FSItem(e.data.items[0]));\n                    }\n                    // multiple items returned\n                    else if ( e.data.items.length > 1 ) {\n                        // multiple items returned\n                        let items = [];\n                        for ( let index = 0; index < e.data.items.length; index++ )\n                        {\n                            items.push(new FSItem(e.data.items[index]));\n                        }\n                        this.#callbackFunctions[e.data.original_msg_id](items);\n                    }\n                }\n                else if ( e.data.msg === 'directoryPicked' ) {\n                    // 1 item returned\n                    if ( e.data.items.length === 1 ) {\n                        this.#callbackFunctions[e.data.original_msg_id](new FSItem({\n                            uid: e.data.items[0].uid,\n                            name: e.data.items[0].fsentry_name,\n                            path: e.data.items[0].path,\n                            readURL: e.data.items[0].read_url,\n                            writeURL: e.data.items[0].write_url,\n                            metadataURL: e.data.items[0].metadata_url,\n                            isDirectory: true,\n                            size: e.data.items[0].fsentry_size,\n                            accessed: e.data.items[0].fsentry_accessed,\n                            modified: e.data.items[0].fsentry_modified,\n                            created: e.data.items[0].fsentry_created,\n                        }));\n                    }\n                    // multiple items returned\n                    else if ( e.data.items.length > 1 ) {\n                        // multiple items returned\n                        let items = [];\n                        for ( let index = 0; index < e.data.items.length; index++ )\n                        {\n                            items.push(new FSItem(e.data.items[index]));\n                        }\n                        this.#callbackFunctions[e.data.original_msg_id](items);\n                    }\n                }\n                else if ( e.data.msg === 'colorPicked' ) {\n                    // execute callback\n                    this.#callbackFunctions[e.data.original_msg_id](e.data.color);\n                }\n                else if ( e.data.msg === 'fontPicked' ) {\n                    // execute callback\n                    this.#callbackFunctions[e.data.original_msg_id](e.data.font);\n                }\n                else if ( e.data.msg === 'alertResponded' ) {\n                    // execute callback\n                    this.#callbackFunctions[e.data.original_msg_id](e.data.response);\n                }\n                else if ( e.data.msg === 'promptResponded' ) {\n                    // execute callback\n                    this.#callbackFunctions[e.data.original_msg_id](e.data.response);\n                }\n                else if ( e.data.msg === 'languageReceived' ) {\n                    // execute callback\n                    this.#callbackFunctions[e.data.original_msg_id](e.data.language);\n                }\n                else if ( e.data.msg === 'fileSaved' ) {\n                    // execute callback\n                    this.#callbackFunctions[e.data.original_msg_id](new FSItem(e.data.saved_file));\n                }\n                else if ( e.data.msg === 'fileSaveCancelled' ) {\n                    // execute callback\n                    this.#callbackFunctions[e.data.original_msg_id](FILE_SAVE_CANCELLED);\n                }\n                else if ( e.data.msg === 'fileOpenCancelled' ) {\n                    // execute callback\n                    this.#callbackFunctions[e.data.original_msg_id](FILE_OPEN_CANCELLED);\n                }\n                else {\n                    // execute callback\n                    this.#callbackFunctions[e.data.original_msg_id](e.data);\n                }\n\n                //remove this callback function since it won't be needed again\n                delete this.#callbackFunctions[e.data.original_msg_id];\n            }\n            // Item Watch response\n            else if ( e.data.msg === 'itemChanged' && e.data.data && e.data.data.uid ) {\n                //excute callback\n                if ( this.itemWatchCallbackFunctions[e.data.data.uid] && typeof this.itemWatchCallbackFunctions[e.data.data.uid] === 'function' )\n                {\n                    this.itemWatchCallbackFunctions[e.data.data.uid](e.data.data);\n                }\n            }\n            // Broadcasts\n            else if ( e.data.msg === 'broadcast' ) {\n                const { name, data } = e.data;\n                if ( ! this.#eventNames.includes(name) ) {\n                    return;\n                }\n                this.emit(name, data);\n                this.#lastBroadcastValue.set(name, data);\n            }\n            else if ( e.data.msg === 'connection' ) {\n                e.data.usesSDK = true; // we can safely assume this\n                const conn = AppConnection.from(e.data, this.context);\n                const accept = value => {\n                    this.messageTarget?.postMessage({\n                        $: 'connection-resp',\n                        connection: e.data.appInstanceID,\n                        accept: true,\n                        value,\n                    }, '*');\n                };\n                const reject = value => {\n                    this.messageTarget?.postMessage({\n                        $: 'connection-resp',\n                        connection: e.data.appInstanceID,\n                        accept: false,\n                        value,\n                    }, '*');\n                };\n                this.emit('connection', {\n                    conn, accept, reject,\n                });\n            }\n        });\n\n        // We need to send the mouse position to the host environment\n        // This is important since a lot of UI elements depend on the mouse position (e.g. ContextMenus, Tooltips, etc.)\n        // and the host environment needs to know the mouse position to show these elements correctly.\n        // The host environment can't just get the mouse position since when the mouse is over an iframe it\n        // will not be able to get the mouse position. So we need to send the mouse position to the host environment.\n        globalThis.document?.addEventListener('mousemove', async (event) => {\n            // Get the mouse position from the event object\n            this.mouseX = event.clientX;\n            this.mouseY = event.clientY;\n\n            // send the mouse position to the host environment\n            this.messageTarget?.postMessage({\n                msg: 'mouseMoved',\n                appInstanceID: this.appInstanceID,\n                x: this.mouseX,\n                y: this.mouseY,\n            }, '*');\n        });\n\n        // click\n        globalThis.document?.addEventListener('click', async (event) => {\n            // Get the mouse position from the event object\n            this.mouseX = event.clientX;\n            this.mouseY = event.clientY;\n\n            // send the mouse position to the host environment\n            this.messageTarget?.postMessage({\n                msg: 'mouseClicked',\n                appInstanceID: this.appInstanceID,\n                x: this.mouseX,\n                y: this.mouseY,\n            }, '*');\n        });\n    }\n\n    onWindowClose (callback) {\n        this.#onWindowClose = callback;\n    };\n\n    onItemsOpened (callback) {\n        // DEPRECATED - this is also called when items are dropped on the app, which in new versions should be handled\n        // with the 'drop' event.\n        // Check if a file was opened with this app, i.e. check URL parameters of window/iframe\n        // Even though the file has been opened when the app is launched, we need to wait for the onItemsOpened callback to be set\n        // before we can call it. This is why we need to check the URL parameters here.\n        // This should also be done only the very first time the callback is set (hence the if(!this.#onItemsOpened) check) since\n        // the URL parameters will be checked every time the callback is set which can cause problems if the callback is set multiple times.\n        if ( ! this.#onItemsOpened ) {\n            let URLParams = new URLSearchParams(globalThis.location.search);\n            if ( URLParams.has('puter.item.name') && URLParams.has('puter.item.uid') && URLParams.has('puter.item.read_url') ) {\n                let fpath = URLParams.get('puter.item.path');\n\n                if ( !fpath.startsWith('~/') && !fpath.startsWith('/') )\n                {\n                    fpath = `~/${fpath}`;\n                }\n\n                callback([new FSItem({\n                    name: URLParams.get('puter.item.name'),\n                    path: fpath,\n                    uid: URLParams.get('puter.item.uid'),\n                    readURL: URLParams.get('puter.item.read_url'),\n                    writeURL: URLParams.get('puter.item.write_url'),\n                    metadataURL: URLParams.get('puter.item.metadata_url'),\n                    size: URLParams.get('puter.item.size'),\n                    accessed: URLParams.get('puter.item.accessed'),\n                    modified: URLParams.get('puter.item.modified'),\n                    created: URLParams.get('puter.item.created'),\n                })]);\n            }\n        }\n\n        this.#onItemsOpened = callback;\n    };\n\n    // Check if the app was launched with items\n    // This is useful for apps that are launched with items (e.g. when a file is opened with the app)\n    wasLaunchedWithItems () {\n        const URLParams = new URLSearchParams(globalThis.location.search);\n        return URLParams.has('puter.item.name') &&\n            URLParams.has('puter.item.uid') &&\n            URLParams.has('puter.item.read_url');\n    };\n\n    onLaunchedWithItems (callback) {\n        // Check if a file was opened with this app, i.e. check URL parameters of window/iframe\n        // Even though the file has been opened when the app is launched, we need to wait for the onLaunchedWithItems callback to be set\n        // before we can call it. This is why we need to check the URL parameters here.\n        // This should also be done only the very first time the callback is set (hence the if(!this.#onLaunchedWithItems) check) since\n        // the URL parameters will be checked every time the callback is set which can cause problems if the callback is set multiple times.\n        if ( ! this.#onLaunchedWithItems ) {\n            let URLParams = new URLSearchParams(globalThis.location.search);\n            if ( URLParams.has('puter.item.name') && URLParams.has('puter.item.uid') && URLParams.has('puter.item.read_url') ) {\n                let fpath = URLParams.get('puter.item.path');\n\n                if ( !fpath.startsWith('~/') && !fpath.startsWith('/') )\n                {\n                    fpath = `~/${fpath}`;\n                }\n\n                callback([new FSItem({\n                    name: URLParams.get('puter.item.name'),\n                    path: fpath,\n                    uid: URLParams.get('puter.item.uid'),\n                    readURL: URLParams.get('puter.item.read_url'),\n                    writeURL: URLParams.get('puter.item.write_url'),\n                    metadataURL: URLParams.get('puter.item.metadata_url'),\n                    size: URLParams.get('puter.item.size'),\n                    accessed: URLParams.get('puter.item.accessed'),\n                    modified: URLParams.get('puter.item.modified'),\n                    created: URLParams.get('puter.item.created'),\n                })]);\n            }\n        }\n\n        this.#onLaunchedWithItems = callback;\n    };\n\n    requestEmailConfirmation () {\n        return new Promise((resolve, reject) => {\n            this.#postMessageWithCallback('requestEmailConfirmation', resolve, { });\n        });\n    };\n\n    alert (message, buttons, options, callback) {\n        return new Promise((resolve) => {\n            this.#postMessageWithCallback('ALERT', resolve, { message, buttons, options });\n        });\n    };\n\n    openDevPaymentsAccount () {\n        return new Promise((resolve) => {\n            this.#postMessageWithCallback('openDevPaymentsAccount', resolve, { });\n        });\n    }\n\n    instancesOpen (callback) {\n        return new Promise((resolve) => {\n            this.#postMessageWithCallback('getInstancesOpen', resolve, { });\n        });\n    };\n\n    socialShare (url, message, options, callback) {\n        return new Promise((resolve) => {\n            this.#postMessageWithCallback('socialShare', resolve, { url, message, options });\n        });\n    };\n\n    prompt (message, placeholder, options, callback) {\n        return new Promise((resolve) => {\n            this.#postMessageWithCallback('PROMPT', resolve, { message, placeholder, options });\n        });\n    };\n\n    showDirectoryPicker (options, callback) {\n        return new Promise((resolve, reject) => {\n            if ( ! globalThis.open ) {\n                return reject('This API is not compatible in Web Workers.');\n            }\n            const msg_id = this.#messageID++;\n            if ( this.env === 'app' ) {\n                this.messageTarget?.postMessage({\n                    msg: 'showDirectoryPicker',\n                    appInstanceID: this.appInstanceID,\n                    uuid: msg_id,\n                    options: options,\n                    env: this.env,\n                }, '*');\n            } else {\n                let w = 700;\n                let h = 400;\n                let title = 'Puter: Open Directory';\n                var left = (screen.width / 2) - (w / 2);\n                var top = (screen.height / 2) - (h / 2);\n                window.open(`${puter.defaultGUIOrigin}/action/show-directory-picker?embedded_in_popup=true&msg_id=${msg_id}&appInstanceID=${this.appInstanceID}&env=${this.env}&options=${JSON.stringify(options)}`,\n                                title,\n                                `toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=${w}, height=${h}, top=${top}, left=${left}`);\n            }\n\n            //register callback\n            this.#callbackFunctions[msg_id] = resolve;\n        });\n    };\n\n    showOpenFilePicker (options, callback) {\n        const undefinedOnCancel = new putility.libs.promise.TeePromise();\n        const resolveOnlyPromise = new Promise((resolve, reject) => {\n            if ( ! globalThis.open ) {\n                return reject('This API is not compatible in Web Workers.');\n            }\n            const msg_id = this.#messageID++;\n\n            if ( this.env === 'app' ) {\n                this.messageTarget?.postMessage({\n                    msg: 'showOpenFilePicker',\n                    appInstanceID: this.appInstanceID,\n                    uuid: msg_id,\n                    options: options ?? {},\n                    env: this.env,\n                }, '*');\n            } else {\n                let w = 700;\n                let h = 400;\n                let title = 'Puter: Open File';\n                var left = (screen.width / 2) - (w / 2);\n                var top = (screen.height / 2) - (h / 2);\n                window.open(`${puter.defaultGUIOrigin}/action/show-open-file-picker?embedded_in_popup=true&msg_id=${msg_id}&appInstanceID=${this.appInstanceID}&env=${this.env}&options=${JSON.stringify(options ?? {})}`,\n                                title,\n                                `toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=${w}, height=${h}, top=${top}, left=${left}`);\n            }\n            //register callback\n            this.#callbackFunctions[msg_id] = (maybe_result) => {\n                // Only resolve cancel events if this was called with `.undefinedOnCancel`\n                if ( maybe_result === FILE_OPEN_CANCELLED ) {\n                    undefinedOnCancel.resolve(undefined);\n                    return;\n                }\n                undefinedOnCancel.resolve(maybe_result);\n                resolve(maybe_result);\n            };\n        });\n        resolveOnlyPromise.undefinedOnCancel = undefinedOnCancel;\n        return resolveOnlyPromise;\n    };\n\n    showFontPicker (options) {\n        return new Promise((resolve) => {\n            this.#postMessageWithCallback('showFontPicker', resolve, { options: options ?? {} });\n        });\n    };\n\n    showColorPicker (options) {\n        return new Promise((resolve) => {\n            this.#postMessageWithCallback('showColorPicker', resolve, { options: options ?? {} });\n        });\n    };\n\n    requestUpgrade () {\n        return new Promise((resolve) => {\n            this.#postMessageWithCallback('requestUpgrade', resolve, { });\n        });\n    };\n\n    showSaveFilePicker (content, suggestedName, type) {\n        const undefinedOnCancel = new putility.libs.promise.TeePromise();\n        const resolveOnlyPromise = new Promise((resolve, reject) => {\n            if ( ! globalThis.open ) {\n                return reject('This API is not compatible in Web Workers.');\n            }\n            const msg_id = this.#messageID++;\n            if ( !type && Object.prototype.toString.call(content) === '[object URL]' ) {\n                type = 'url';\n            }\n            const url = type === 'url' ? content.toString() : undefined;\n            const source_path = ['move', 'copy'].includes(type) ? content : undefined;\n\n            if ( this.env === 'app' ) {\n                this.messageTarget?.postMessage({\n                    msg: 'showSaveFilePicker',\n                    appInstanceID: this.appInstanceID,\n                    content: url ? undefined : content,\n                    save_type: type,\n                    url,\n                    source_path,\n                    suggestedName: suggestedName ?? '',\n                    env: this.env,\n                    uuid: msg_id,\n                }, '*');\n            } else {\n                window.addEventListener('message', async (e) => {\n                    if ( e.data?.msg === 'sendMeFileData' ) {\n                        // Send the blob URL to the host environment\n                        e.source.postMessage({\n                            msg: 'showSaveFilePickerPopup',\n                            content: url ? undefined : content,\n                            url: url ? url.toString() : undefined,\n                            suggestedName: suggestedName ?? '',\n                            env: this.env,\n                            uuid: msg_id,\n                        }, '*');\n\n                        // remove the event listener\n                        window.removeEventListener('message', this);\n                    }\n                });\n                // Create a Blob from your binary data\n                let blob = new Blob([content], { type: 'application/octet-stream' });\n\n                // Create an object URL for the Blob\n                let objectUrl = URL.createObjectURL(blob);\n\n                let w = 700;\n                let h = 400;\n                let title = 'Puter: Save File';\n                var left = (screen.width / 2) - (w / 2);\n                var top = (screen.height / 2) - (h / 2);\n                window.open(`${puter.defaultGUIOrigin}/action/show-save-file-picker?embedded_in_popup=true&msg_id=${msg_id}&appInstanceID=${this.appInstanceID}&env=${this.env}&blobUrl=${encodeURIComponent(objectUrl)}`,\n                                title,\n                                `toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=${w}, height=${h}, top=${top}, left=${left}`);\n            }\n            //register callback\n            this.#callbackFunctions[msg_id] = (maybe_result) => {\n                // Only resolve cancel events if this was called with `.undefinedOnCancel`\n                if ( maybe_result === FILE_SAVE_CANCELLED ) {\n                    undefinedOnCancel.resolve(undefined);\n                    return;\n                }\n                undefinedOnCancel.resolve(maybe_result);\n                resolve(maybe_result);\n            };\n        });\n\n        resolveOnlyPromise.undefinedOnCancel = undefinedOnCancel;\n\n        return resolveOnlyPromise;\n    };\n\n    setWindowTitle (title, window_id, callback) {\n        if ( typeof window_id === 'function' ) {\n            callback = window_id;\n            window_id = undefined;\n        } else if ( typeof window_id === 'object' && window_id !== null ) {\n            window_id = window_id.id;\n        }\n\n        return new Promise((resolve) => {\n            this.#postMessageWithCallback('setWindowTitle', resolve, { new_title: title, window_id: window_id });\n        });\n    };\n\n    setWindowWidth (width, window_id, callback) {\n        if ( typeof window_id === 'function' ) {\n            callback = window_id;\n            window_id = undefined;\n        } else if ( typeof window_id === 'object' && window_id !== null ) {\n            window_id = window_id.id;\n        }\n\n        return new Promise((resolve) => {\n            this.#postMessageWithCallback('setWindowWidth', resolve, { width: width, window_id: window_id });\n        });\n    };\n\n    setWindowHeight (height, window_id, callback) {\n        if ( typeof window_id === 'function' ) {\n            callback = window_id;\n            window_id = undefined;\n        } else if ( typeof window_id === 'object' && window_id !== null ) {\n            window_id = window_id.id;\n        }\n\n        return new Promise((resolve) => {\n            this.#postMessageWithCallback('setWindowHeight', resolve, { height: height, window_id: window_id });\n        });\n    };\n\n    setWindowSize (width, height, window_id, callback) {\n        if ( typeof window_id === 'function' ) {\n            callback = window_id;\n            window_id = undefined;\n        } else if ( typeof window_id === 'object' && window_id !== null ) {\n            window_id = window_id.id;\n        }\n\n        return new Promise((resolve) => {\n            this.#postMessageWithCallback('setWindowSize', resolve, { width: width, height: height, window_id: window_id });\n        });\n    };\n\n    setWindowPosition (x, y, window_id, callback) {\n        if ( typeof window_id === 'function' ) {\n            callback = window_id;\n            window_id = undefined;\n        } else if ( typeof window_id === 'object' && window_id !== null ) {\n            window_id = window_id.id;\n        }\n\n        return new Promise((resolve) => {\n            this.#postMessageWithCallback('setWindowPosition', resolve, { x, y, window_id });\n        });\n    };\n\n    setWindowY (y, window_id, callback) {\n        if ( typeof window_id === 'function' ) {\n            callback = window_id;\n            window_id = undefined;\n        } else if ( typeof window_id === 'object' && window_id !== null ) {\n            window_id = window_id.id;\n        }\n\n        return new Promise((resolve) => {\n            this.#postMessageWithCallback('setWindowY', resolve, { y, window_id });\n        });\n    };\n\n    setWindowX (x, window_id, callback) {\n        if ( typeof window_id === 'function' ) {\n            callback = window_id;\n            window_id = undefined;\n        } else if ( typeof window_id === 'object' && window_id !== null ) {\n            window_id = window_id.id;\n        }\n\n        return new Promise((resolve) => {\n            this.#postMessageWithCallback('setWindowX', resolve, { x, window_id });\n        });\n    };\n\n    showWindow () {\n        this.#postMessageWithObject('showWindow');\n    };\n\n    hideWindow () {\n        this.#postMessageWithObject('hideWindow');\n    };\n\n    toggleWindow () {\n        this.#postMessageWithObject('toggleWindow');\n    };\n\n    setMenubar (spec) {\n        this.#postMessageWithObject('setMenubar', spec);\n    };\n\n    requestPermission (options) {\n        return new Promise((resolve) => {\n            if ( this.env === 'app' ) {\n                return new Promise((resolve) => {\n                    this.#postMessageWithCallback('requestPermission', resolve, { options });\n                });\n            } else {\n                // TODO: Implement for web\n                resolve(false);\n            }\n        });\n    };\n\n    disableMenuItem (item_id) {\n        this.#postMessageWithObject('disableMenuItem', { id: item_id });\n    };\n\n    enableMenuItem (item_id) {\n        this.#postMessageWithObject('enableMenuItem', { id: item_id });\n    };\n\n    setMenuItemIcon (item_id, icon) {\n        this.#postMessageWithObject('setMenuItemIcon', { id: item_id, icon: icon });\n    };\n\n    setMenuItemIconActive (item_id, icon) {\n        this.#postMessageWithObject('setMenuItemIconActive', { id: item_id, icon: icon });\n    };\n\n    setMenuItemChecked (item_id, checked) {\n        this.#postMessageWithObject('setMenuItemChecked', { id: item_id, checked: checked });\n    };\n\n    contextMenu (spec) {\n        this.#postMessageWithObject('contextMenu', spec);\n    };\n\n    /**\n     * Asynchronously extracts entries from DataTransferItems, like files and directories.\n     *\n     * @private\n     * @function\n     * @async\n     * @param {DataTransferItemList} dataTransferItems - List of data transfer items from a drag-and-drop operation.\n     * @param {Object} [options={}] - Optional settings.\n     * @param {boolean} [options.raw=false] - Determines if the file path should be processed.\n     * @returns {Promise<Array<File|Entry>>} - A promise that resolves to an array of File or Entry objects.\n     * @throws {Error} - Throws an error if there's an EncodingError and provides information about how to solve it.\n     *\n     * @example\n     * const items = event.dataTransfer.items;\n     * const entries = await getEntriesFromDataTransferItems(items, { raw: false });\n     */\n    getEntriesFromDataTransferItems = async function (dataTransferItems, options = { raw: false }) {\n        const checkErr = (err) => {\n            if ( this.getEntriesFromDataTransferItems.didShowInfo ) return;\n            if ( err.name !== 'EncodingError' ) return;\n            this.getEntriesFromDataTransferItems.didShowInfo = true;\n            const infoMsg = `${err.name} occurred within datatransfer-files-promise module\\n`\n                + `Error message: \"${err.message}\"\\n`\n                + 'Try serving html over http if currently you are running it from the filesystem.';\n            console.warn(infoMsg);\n        };\n\n        const readFile = (entry, path = '') => {\n            return new Promise((resolve, reject) => {\n                entry.file(file => {\n                    if ( ! options.raw ) file.filepath = path + file.name; // save full path\n                    resolve(file);\n                }, (err) => {\n                    checkErr(err);\n                    reject(err);\n                });\n            });\n        };\n\n        const dirReadEntries = (dirReader, path) => {\n            return new Promise((resolve, reject) => {\n                dirReader.readEntries(async entries => {\n                    let files = [];\n                    for ( let entry of entries ) {\n                        const itemFiles = await getFilesFromEntry(entry, path);\n                        files = files.concat(itemFiles);\n                    }\n                    resolve(files);\n                }, (err) => {\n                    checkErr(err);\n                    reject(err);\n                });\n            });\n        };\n\n        const readDir = async (entry, path) => {\n            const dirReader = entry.createReader();\n            const newPath = `${path + entry.name}/`;\n            let files = [];\n            let newFiles;\n            do {\n                newFiles = await dirReadEntries(dirReader, newPath);\n                files = files.concat(newFiles);\n            } while ( newFiles.length > 0 );\n            return files;\n        };\n\n        const getFilesFromEntry = async (entry, path = '') => {\n            if ( entry === null )\n            {\n                return;\n            }\n            else if ( entry.isFile ) {\n                const file = await readFile(entry, path);\n                return [file];\n            }\n            else if ( entry.isDirectory ) {\n                const files = await readDir(entry, path);\n                files.push(entry);\n                return files;\n            }\n        };\n\n        let files = [];\n        let entries = [];\n\n        // Pull out all entries before reading them\n        for ( let i = 0, ii = dataTransferItems.length; i < ii; i++ ) {\n            entries.push(dataTransferItems[i].webkitGetAsEntry());\n        }\n\n        // Recursively read through all entries\n        for ( let entry of entries ) {\n            const newFiles = await getFilesFromEntry(entry);\n            files = files.concat(newFiles);\n        }\n\n        return files;\n    };\n\n    authenticateWithPuter () {\n        if ( this.env !== 'web' ) {\n            return;\n        }\n\n        // if authToken is already present, resolve immediately\n        if ( this.authToken ) {\n            return new Promise((resolve) => {\n                resolve();\n            });\n        }\n\n        // If a prompt is already open, return a promise that resolves based on the existing prompt's result.\n        if ( puter.puterAuthState.isPromptOpen ) {\n            return new Promise((resolve, reject) => {\n                puter.puterAuthState.resolver = { resolve, reject };\n            });\n        }\n\n        // Show the permission prompt and set the state.\n        puter.puterAuthState.isPromptOpen = true;\n        puter.puterAuthState.authGranted = null;\n\n        return new Promise((resolve, reject) => {\n            if ( ! puter.authToken ) {\n                const puterDialog = new PuterDialog(resolve, reject);\n                document.body.appendChild(puterDialog);\n                puterDialog.open();\n            } else {\n                // If authToken is already present, resolve immediately\n                resolve();\n            }\n        });\n    };\n\n    // Returns a Promise<AppConnection>\n    /**\n     * launchApp opens the specified app in Puter with the specified argumets.\n     * @param {*} nameOrOptions - name of the app as a string, or an options object\n     * @param {*} args - named parameters that will be passed to the app as arguments\n     * @param {*} callback - in case you don't want to use `await` or `.then()`\n     * @returns\n     */\n    launchApp = async function launchApp (nameOrOptions, args, callback) {\n        let pseudonym = undefined;\n        let file_paths = undefined;\n        let items = undefined;\n        let app_name = nameOrOptions; // becomes string after branch below\n\n        // Handle case where app_name is an options object\n        if ( typeof app_name === 'object' && app_name !== null ) {\n            const options = app_name;\n            app_name = options.name || options.app_name;\n            file_paths = options.file_paths;\n            args = args || options.args;\n            callback = callback || options.callback;\n            pseudonym = options.pseudonym;\n            items = options.items;\n        }\n\n        if ( items ) {\n            if ( ! Array.isArray(items) ) items = [];\n            for ( let i = 0 ; i < items.length ; i++ ) {\n                if ( items[i] instanceof FSItem ) {\n                    items[i] = items[i]._internalProperties.file_signature;\n                }\n            }\n        }\n\n        if ( app_name && app_name.includes('#(as)') ) {\n            [app_name, pseudonym] = app_name.split('#(as)');\n        }\n\n        if ( ! app_name ) app_name = puter.appName;\n\n        const app_info = await this.#ipc_stub({\n            method: 'launchApp',\n            callback,\n            parameters: {\n                app_name,\n                file_paths,\n                items,\n                pseudonym,\n                args,\n            },\n        });\n\n        return AppConnection.from(app_info, this.context);\n    };\n\n    connectToInstance = async function connectToInstance (app_name) {\n        const app_info = await this.#ipc_stub({\n            method: 'connectToInstance',\n            parameters: {\n                app_name,\n            },\n        });\n\n        return AppConnection.from(app_info, this.context);\n    };\n\n    parentApp () {\n        return this.#parentAppConnection;\n    }\n\n    createWindow (options, callback) {\n        return new Promise((resolve) => {\n            this.#postMessageWithCallback('createWindow', (res) => {\n                resolve(res.window);\n            }, { options: options ?? {} });\n        });\n    };\n\n    // Menubar\n    menubar () {\n        // Remove previous style tag\n        document.querySelectorAll('style.puter-stylesheet').forEach(function (el) {\n            el.remove();\n        });\n\n        // Add new style tag\n        const style = document.createElement('style');\n        style.classList.add('puter-stylesheet');\n        style.innerHTML = `\n        .--puter-menubar {\n            border-bottom: 1px solid #e9e9e9;\n            background-color: #fbf9f9;\n            padding-top: 3px;\n            padding-bottom: 2px;\n            display: inline-block;\n            position: fixed;\n            top: 0;\n            width: 100%;\n            margin: 0;\n            padding: 0;\n            height: 31px;\n            font-family: Arial, Helvetica, sans-serif;\n            font-size: 13px;\n            z-index: 9999;\n        }\n        \n        .--puter-menubar, .--puter-menubar * {\n            user-select: none;\n            -webkit-user-select: none;\n            cursor: default;\n        }\n        \n        .--puter-menubar .dropdown-item-divider>hr {\n            margin-top: 5px;\n            margin-bottom: 5px;\n            border-bottom: none;\n            border-top: 1px solid #00000033;\n        }\n        \n        .--puter-menubar>li {\n            display: inline-block;\n            padding: 10px 5px;\n        }\n        \n        .--puter-menubar>li>ul {\n            display: none;\n            z-index: 999999999999;\n            list-style: none;\n            background-color: rgb(233, 233, 233);\n            width: 200px;\n            border: 1px solid #e4ebf3de;\n            box-shadow: 0px 0px 5px #00000066;\n            padding-left: 6px;\n            padding-right: 6px;\n            padding-top: 4px;\n            padding-bottom: 4px;\n            color: #333;\n            border-radius: 4px;\n            padding: 2px;\n            min-width: 200px;\n            margin-top: 5px;\n            position: absolute;\n        }\n        \n        .--puter-menubar .menubar-item {\n            display: block;\n            line-height: 24px;\n            margin-top: -7px;\n            text-align: center;\n            border-radius: 3px;\n            padding: 0 5px;\n        }\n        \n        .--puter-menubar .menubar-item-open {\n            background-color: rgb(216, 216, 216);\n        }\n        \n        .--puter-menubar .dropdown-item {\n            padding: 5px;\n            padding: 5px 30px;\n            list-style-type: none;\n            user-select: none;\n            font-size: 13px;\n        }\n        \n        .--puter-menubar .dropdown-item-icon, .--puter-menubar .dropdown-item-icon-active {\n            pointer-events: none;\n            width: 18px;\n            height: 18px;\n            margin-left: -23px;\n            margin-bottom: -4px;\n            margin-right: 5px;\n        }\n        .--puter-menubar .dropdown-item-disabled .dropdown-item-icon{\n            display: inline-block !important;\n        }\n        .--puter-menubar .dropdown-item-disabled .dropdown-item-icon-active{\n            display: none !important;\n        }\n        .--puter-menubar .dropdown-item-icon-active {\n            display:none;\n        }\n        .--puter-menubar .dropdown-item:hover .dropdown-item-icon{\n            display: none;\n        }\n        .--puter-menubar .dropdown-item:hover .dropdown-item-icon-active{\n            display: inline-block;\n        }\n        .--puter-menubar .dropdown-item-hide-icon .dropdown-item-icon, .--puter-menubar .dropdown-item-hide-icon .dropdown-item-icon-active{\n            display: none !important;\n        }\n        .--puter-menubar .dropdown-item a {\n            color: #333;\n            text-decoration: none;\n        }\n        \n        .--puter-menubar .dropdown-item:hover, .--puter-menubar .dropdown-item:hover a {\n            background-color: rgb(59 134 226);\n            color: white;\n            border-radius: 4px;\n        }\n        \n        .--puter-menubar .dropdown-item-disabled, .--puter-menubar .dropdown-item-disabled:hover {\n            opacity: 0.5;\n            background-color: transparent;\n            color: initial;\n            cursor: initial;\n            pointer-events: none;\n        }\n        \n        .--puter-menubar .menubar * {\n            user-select: none;\n        }                \n        `;\n        let head = document.head || document.getElementsByTagName('head')[0];\n        head.appendChild(style);\n\n        document.addEventListener('click', function (e) {\n            // Don't hide if clicking on disabled item\n            if ( e.target.classList.contains('dropdown-item-disabled') )\n            {\n                return false;\n            }\n            // Hide open menus\n            if ( ! (e.target).classList.contains('menubar-item') ) {\n                document.querySelectorAll('.menubar-item.menubar-item-open').forEach(function (el) {\n                    el.classList.remove('menubar-item-open');\n                });\n\n                document.querySelectorAll('.dropdown').forEach(el => el.style.display = 'none');\n            }\n        });\n\n        // When focus is gone from this window, hide open menus\n        window.addEventListener('blur', function (e) {\n            document.querySelectorAll('.dropdown').forEach(function (el) {\n                el.style.display = 'none';\n            });\n            document.querySelectorAll('.menubar-item.menubar-item-open').forEach(el => el.classList.remove('menubar-item-open'));\n        });\n\n        // Returns the siblings of the element\n        const siblings = function (e) {\n            const siblings = [];\n\n            // if no parent, return empty list\n            if ( ! e.parentNode ) {\n                return siblings;\n            }\n\n            // first child of the parent node\n            let sibling  = e.parentNode.firstChild;\n\n            // get all other siblings\n            while ( sibling ) {\n                if ( sibling.nodeType === 1 && sibling !== e ) {\n                    siblings.push(sibling);\n                }\n                sibling = sibling.nextSibling;\n            }\n            return siblings;\n        };\n\n        // Open dropdown\n        document.querySelectorAll('.menubar-item').forEach(el => el.addEventListener('mousedown', function (e) {\n            // Hide all other menus\n            document.querySelectorAll('.dropdown').forEach(function (el) {\n                el.style.display = 'none';\n            });\n\n            // Remove open class from all menus, except this menu that was just clicked\n            document.querySelectorAll('.menubar-item.menubar-item-open').forEach(function (el) {\n                if ( el != e.target )\n                {\n                    el.classList.remove('menubar-item-open');\n                }\n            });\n\n            // If menu is already open, close it\n            if ( this.classList.contains('menubar-item-open') ) {\n                document.querySelectorAll('.menubar-item.menubar-item-open').forEach(function (el) {\n                    el.classList.remove('menubar-item-open');\n                });\n            }\n\n            // If menu is not open, open it\n            else if ( ! e.target.classList.contains('dropdown-item') ) {\n                this.classList.add('menubar-item-open');\n\n                // show all sibling\n                siblings(this).forEach(function (el) {\n                    el.style.display = 'block';\n                });\n            }\n\n        }));\n\n        // If a menu is open, and you hover over another menu, open that menu\n        document.querySelectorAll('.--puter-menubar .menubar-item').forEach(el => el.addEventListener('mouseover', function (e) {\n            const open_menus = document.querySelectorAll('.menubar-item.menubar-item-open');\n            if ( open_menus.length > 0 && open_menus[0] !== e.target ) {\n                e.target.dispatchEvent(new Event('mousedown'));\n            }\n        }));\n    };\n\n    on (eventName, callback) {\n        super.on(eventName, callback);\n        // If we already received a broadcast for this event, run the callback immediately\n        if ( this.#eventNames.includes(eventName) && this.#lastBroadcastValue.has(eventName) ) {\n            callback(this.#lastBroadcastValue.get(eventName));\n        }\n    }\n\n    #showTime = null;\n    #hideTimeout = null;\n\n    showSpinner (html) {\n        if ( this.#overlayActive ) return;\n\n        // Create and add stylesheet for spinner if it doesn't exist\n        if ( ! document.getElementById('puter-spinner-styles') ) {\n            const styleSheet = document.createElement('style');\n            styleSheet.id = 'puter-spinner-styles';\n            styleSheet.textContent = `\n                .puter-loading-spinner {\n                    width: 50px;\n                    height: 50px;\n                    border: 5px solid #f3f3f3;\n                    border-top: 5px solid #3498db;\n                    border-radius: 50%;\n                    animation: spin 1s linear infinite;\n                    margin-bottom: 10px;\n                }\n    \n                .puter-loading-text {\n                    font-family: Arial, sans-serif;\n                    font-size: 16px;\n                    margin-top: 10px;\n                    text-align: center;\n                    width: 100%;\n                }\n    \n                @keyframes spin {\n                    0% { transform: rotate(0deg); }\n                    100% { transform: rotate(360deg); }\n                }\n    \n                .puter-loading-container {\n                    display: flex;\n                    flex-direction: column;\n                    align-items: center;\n                    justify-content: center;\n                    min-height: 120px; \n                    background: #ffffff; \n                    border-radius: 10px;\n                    padding: 20px;\n                    min-width: 120px;\n                }\n            `;\n            document.head.appendChild(styleSheet);\n        }\n\n        const overlay = document.createElement('div');\n        overlay.classList.add('puter-loading-overlay');\n\n        const styles = {\n            position: 'fixed',\n            top: '0',\n            left: '0',\n            width: '100%',\n            height: '100%',\n            backgroundColor: 'rgba(255, 255, 255, 0.8)',\n            zIndex: '2147483647',\n            display: 'flex',\n            justifyContent: 'center',\n            alignItems: 'center',\n            pointerEvents: 'all',\n        };\n\n        Object.assign(overlay.style, styles);\n\n        // Create container for spinner and text\n        const container = document.createElement('div');\n        container.classList.add('puter-loading-container');\n\n        // Add spinner and text\n        container.innerHTML = `\n            <div class=\"puter-loading-spinner\"></div>\n            <div class=\"puter-loading-text\">${html ?? 'Working...'}</div>\n        `;\n\n        overlay.appendChild(container);\n        document.body.appendChild(overlay);\n\n        this.#overlayActive = true;\n        this.#showTime = Date.now(); // Add show time tracking\n        this.#overlayTimer = setTimeout(() => {\n            this.#overlayTimer = null;\n        }, 1000);\n    }\n\n    hideSpinner () {\n        if ( ! this.#overlayActive ) return;\n\n        if ( this.#overlayTimer ) {\n            clearTimeout(this.#overlayTimer);\n            this.#overlayTimer = null;\n        }\n\n        // Calculate how long the spinner has been shown\n        const elapsedTime = Date.now() - this.#showTime;\n        const remainingTime = Math.max(0, 1200 - elapsedTime);\n\n        // If less than 1 second has passed, delay the hide\n        if ( remainingTime > 0 ) {\n            if ( this.#hideTimeout ) {\n                clearTimeout(this.#hideTimeout);\n            }\n\n            this.#hideTimeout = setTimeout(() => {\n                this.#removeSpinner();\n            }, remainingTime);\n        } else {\n            this.#removeSpinner();\n        }\n    }\n\n    // Add private method to handle spinner removal\n    #removeSpinner () {\n        const overlay = document.querySelector('.puter-loading-overlay');\n        if ( overlay ) {\n            overlay.parentNode?.removeChild(overlay);\n        }\n\n        this.#overlayActive = false;\n        this.#showTime = null;\n        this.#hideTimeout = null;\n    }\n\n    isWorkingActive () {\n        return this.#overlayActive;\n    }\n\n    /**\n     * Gets the current language/locale code (e.g., 'en', 'fr', 'es').\n     *\n     * @returns {Promise<string>} A promise that resolves with the current language code.\n     *\n     * @example\n     * const currentLang = await puter.ui.getLanguage();\n     * console.log(`Current language: ${currentLang}`); // e.g., \"Current language: fr\"\n     */\n    getLanguage () {\n        // resolve with the current language code if in GUI environment\n        if ( this.env === 'gui' ) {\n            // resolve with the current language code\n            return new Promise((resolve) => {\n                resolve(window.locale);\n            });\n        }\n\n        return new Promise((resolve) => {\n            this.#postMessageWithCallback('getLanguage', resolve, {});\n        });\n    }\n}\n\nexport default UI;\n", "class PuterDialog extends (globalThis.HTMLElement || Object) { // It will fall back to only extending Object in environments without a DOM\n    /**\n     * Detects if the current page is loaded using the file:// protocol.\n     * @returns {boolean} True if using file:// protocol, false otherwise.\n     */\n    isUsingFileProtocol = () => {\n        return window.location.protocol === 'file:';\n    };\n\n    constructor (resolve, reject) {\n        super();\n        this.reject = reject;\n        this.resolve = resolve;\n        this.popupLaunched = false; // Track if popup was successfully launched\n\n        /**\n         * Detects if there's a recent user activation that would allow popup opening\n         * @returns {boolean} True if user activation is available, false otherwise.\n         */\n        this.hasUserActivation = () => {\n            // Modern browsers support navigator.userActivation\n            if ( navigator.userActivation ) {\n                return navigator.userActivation.hasBeenActive && navigator.userActivation.isActive;\n            }\n\n            // Fallback: try to detect user activation by attempting to open a popup\n            // This is a bit hacky but works as a fallback\n            try {\n                const testPopup = window.open('', '_blank', 'width=1,height=1,left=-1000,top=-1000');\n                if ( testPopup ) {\n                    testPopup.close();\n                    return true;\n                }\n                return false;\n            } catch (e) {\n                return false;\n            }\n        };\n\n        /**\n         * Launches the authentication popup window\n         * @returns {Window|null} The popup window reference or null if failed\n         */\n        this.launchPopup = () => {\n            try {\n                let w = 600;\n                let h = 400;\n                let title = 'Puter';\n                var left = (screen.width / 2) - (w / 2);\n                var top = (screen.height / 2) - (h / 2);\n                const popup = window.open(`${puter.defaultGUIOrigin }/?embedded_in_popup=true&request_auth=true${ window.crossOriginIsolated ? '&cross_origin_isolated=true' : ''}`,\n                                title,\n                                `toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=${ w }, height=${ h }, top=${ top }, left=${ left}`);\n                return popup;\n            } catch (e) {\n                console.error('Failed to open popup:', e);\n                return null;\n            }\n        };\n\n        this.attachShadow({ mode: 'open' });\n\n        let h;\n        // Dialog\n        h = `\n        <style>\n        dialog{\n            background: transparent; \n            border: none; \n            box-shadow: none; \n            outline: none;\n        }\n        .puter-dialog-content {\n            border: 1px solid #e8e8e8;\n            border-radius: 8px;\n            padding: 20px;\n            background: white;\n            box-shadow: 0 0 9px 1px rgb(0 0 0 / 21%);\n            padding: 80px 20px;\n            -webkit-font-smoothing: antialiased;\n            color: #575762;\n            position: relative;\n            background-image: url('data:image/webp;base64,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');\n            background-repeat: no-repeat;\n            background-position: center center;\n            background-size: 100% 100%;\n            background-color: #fff;\n        }\n        \n        dialog * {\n            max-width: 500px;\n            font-family: \"Helvetica Neue\", HelveticaNeue, Helvetica, Arial, sans-serif;\n        }\n        \n        dialog p.about{\n            text-align: center;\n            font-size: 17px;\n            padding: 10px 30px;\n            font-weight: 400;\n            -webkit-font-smoothing: antialiased;\n            color: #404048;\n            box-sizing: border-box;\n        }\n        \n        dialog .buttons{\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            flex-wrap: wrap;\n            margin-top: 20px;\n            text-align: center;\n            margin-bottom: 20px;\n        }\n        \n        .launch-auth-popup-footnote{\n            font-size: 11px;\n            color: #666;\n            margin-top: 10px;\n            /* footer at the bottom */\n            position: absolute;\n            left: 0;\n            right: 0;\n            bottom: 10px;\n            text-align: center;\n            margin: 0 10px;\n        }\n        \n        dialog .close-btn{\n            position: absolute;\n            right: 15px;\n            top: 10px;\n            font-size: 17px;\n            color: #8a8a8a;\n            cursor: pointer;\n        }\n        \n        dialog .close-btn:hover{\n            color: #000;\n        }\n        \n        /* ------------------------------------\n        Button\n        ------------------------------------*/\n        \n        dialog .button {\n            color: #666666;\n            background-color: #eeeeee;\n            border-color: #eeeeee;\n            font-size: 14px;\n            text-decoration: none;\n            text-align: center;\n            line-height: 40px;\n            height: 35px;\n            padding: 0 30px;\n            margin: 0;\n            display: inline-block;\n            appearance: none;\n            cursor: pointer;\n            border: none;\n            -webkit-box-sizing: border-box;\n            -moz-box-sizing: border-box;\n            box-sizing: border-box;\n            border-color: #b9b9b9;\n            border-style: solid;\n            border-width: 1px;\n            line-height: 35px;\n            background: -webkit-gradient(linear, left top, left bottom, from(#f6f6f6), to(#e1e1e1));\n            background: linear-gradient(#f6f6f6, #e1e1e1);\n            -webkit-box-shadow: inset 0px 1px 0px rgb(255 255 255 / 30%), 0 1px 2px rgb(0 0 0 / 15%);\n            box-shadow: inset 0px 1px 0px rgb(255 255 255 / 30%), 0 1px 2px rgb(0 0 0 / 15%);\n            border-radius: 4px;\n            outline: none;\n            -webkit-font-smoothing: antialiased;\n        }\n        \n        dialog .button:focus-visible {\n            border-color: rgb(118 118 118);\n        }\n        \n        dialog .button:active, dialog .button.active, dialog .button.is-active, dialog .button.has-open-contextmenu {\n            text-decoration: none;\n            background-color: #eeeeee;\n            border-color: #cfcfcf;\n            color: #a9a9a9;\n            -webkit-transition-duration: 0s;\n            transition-duration: 0s;\n            -webkit-box-shadow: inset 0 1px 3px rgb(0 0 0 / 20%);\n            box-shadow: inset 0px 2px 3px rgb(0 0 0 / 36%), 0px 1px 0px white;\n        }\n        \n        dialog .button.disabled, dialog .button.is-disabled, dialog .button:disabled {\n            top: 0 !important;\n            background: #EEE !important;\n            border: 1px solid #DDD !important;\n            text-shadow: 0 1px 1px white !important;\n            color: #CCC !important;\n            cursor: default !important;\n            appearance: none !important;\n            pointer-events: none;\n        }\n        \n        dialog .button-action.disabled, dialog .button-action.is-disabled, dialog .button-action:disabled {\n            background: #55a975 !important;\n            border: 1px solid #60ab7d !important;\n            text-shadow: none !important;\n            color: #CCC !important;\n        }\n        \n        dialog .button-primary.disabled, dialog .button-primary.is-disabled, dialog .button-primary:disabled {\n            background: #8fc2e7 !important;\n            border: 1px solid #98adbd !important;\n            text-shadow: none !important;\n            color: #f5f5f5 !important;\n        }\n        \n        dialog .button-block {\n            width: 100%;\n        }\n        \n        dialog .button-primary {\n            border-color: #088ef0;\n            background: -webkit-gradient(linear, left top, left bottom, from(#34a5f8), to(#088ef0));\n            background: linear-gradient(#34a5f8, #088ef0);\n            color: white;\n        }\n        \n        dialog .button-danger {\n            border-color: #f00808;\n            background: -webkit-gradient(linear, left top, left bottom, from(#f83434), to(#f00808));\n            background: linear-gradient(#f83434, #f00808);\n            color: white;\n        }\n        \n        dialog .button-primary:active, dialog .button-primary.active, dialog .button-primary.is-active, dialog .button-primary-flat:active, dialog .button-primary-flat.active, dialog .button-primary-flat.is-active {\n            background-color: #2798eb;\n            border-color: #2798eb;\n            color: #bedef5;\n        }\n        \n        dialog .button-action {\n            border-color: #08bf4e;\n            background: -webkit-gradient(linear, left top, left bottom, from(#29d55d), to(#1ccd60));\n            background: linear-gradient(#29d55d, #1ccd60);\n            color: white;\n        }\n        \n        dialog .button-action:active, dialog .button-action.active, dialog .button-action.is-active, dialog .button-action-flat:active, dialog .button-action-flat.active, dialog .button-action-flat.is-active {\n            background-color: #27eb41;\n            border-color: #27eb41;\n            color: #bef5ca;\n        }\n        \n        dialog .button-giant {\n            font-size: 28px;\n            height: 70px;\n            line-height: 70px;\n            padding: 0 70px;\n        }\n        \n        dialog .button-jumbo {\n            font-size: 24px;\n            height: 60px;\n            line-height: 60px;\n            padding: 0 60px;\n        }\n        \n        dialog .button-large {\n            font-size: 20px;\n            height: 50px;\n            line-height: 50px;\n            padding: 0 50px;\n        }\n        \n        dialog .button-normal {\n            font-size: 16px;\n            height: 40px;\n            line-height: 38px;\n            padding: 0 40px;\n        }\n        \n        dialog .button-small {\n            height: 30px;\n            line-height: 29px;\n            padding: 0 30px;\n        }\n        \n        dialog .button-tiny {\n            font-size: 9.6px;\n            height: 24px;\n            line-height: 24px;\n            padding: 0 24px;\n        }\n        \n        #launch-auth-popup{\n            margin-left: 10px; \n            width: 200px; \n            font-weight: 500; \n            font-size: 15px;\n        }\n        dialog .button-auth{\n            margin-bottom: 10px;\n        }\n        dialog a, dialog a:visited{\n            color: rgb(0 69 238);\n            text-decoration: none;\n        }\n        dialog a:hover{\n            text-decoration: underline;\n        }\n        \n        @media (max-width:480px)  { \n            .puter-dialog-content{\n                padding: 50px 20px;\n            }\n            dialog .buttons{\n                flex-direction: column-reverse;\n            }\n            dialog p.about{\n                padding: 10px 0;\n            }\n            dialog .button-auth{\n                width: 100% !important;\n                margin:0 !important;\n                margin-bottom: 10px !important;\n            }\n        }\n        .error-container h1 {\n            color: #e74c3c;\n            font-size: 20px;\n            text-align: center;\n        }\n\n        .puter-dialog-content a:focus{\n            outline: none;\n        }\n        </style>`;\n        // Error message for unsupported protocol\n        if ( window.location.protocol === 'file:' ) {\n            h += `<dialog>\n                    <div class=\"puter-dialog-content\" style=\"padding: 20px 40px; background:white !important; font-size: 15px;\">\n                        <span class=\"close-btn\">&#x2715</span>\n                        <div class=\"error-container\">\n                            <h1>Puter.js Error: Unsupported Protocol</h1>\n                            <p>It looks like you've opened this file directly in your browser (using the <code style=\"font-family: monospace;\">file:///</code> protocol) which is not supported by Puter.js for security reasons.</p>\n                            <p>To view this content properly, you need to serve it through a web server. Here are some options:</p>\n                            <ul>\n                                <li>Use a local development server (e.g., Python's built-in server or Node.js http-server)</li>\n                                <li>Upload the files to a web hosting service</li>\n                                <li>Use a local server application like XAMPP or MAMP</li>\n                            </ul>\n                            <p class=\"help-text\">If you're not familiar with these options, consider reaching out to your development team or IT support for assistance.</p>\n                        </div>\n                        <p style=\"margin-top: 30px; border-top: 1px solid #eee; padding-top: 10px; text-align: center; font-size:13px;\">\n                            <a href=\"https://docs.puter.com\" target=\"_blank\">Docs</a><span style=\"margin:10px; color: #CCC;\">|</span>\n                            <a href=\"https://github.com/heyPuter/puter/\" target=\"_blank\">Github</a><span style=\"margin:10px; color: #CCC;\">|</span>\n                            <a href=\"https://discord.com/invite/PQcx7Teh8u\" target=\"_blank\">Discord</a>\n                        </p>\n                    </div>\n                </dialog>`;\n        } else {\n            h += `<dialog>\n                <div class=\"puter-dialog-content\">\n                    <span class=\"close-btn\">&#x2715</span>\n                    <a href=\"https://puter.com\" target=\"_blank\" style=\"border:none; outline:none; display: block; width: 70px; height: 70px; margin: 0 auto; border-radius: 4px;\"><img style=\"display: block; width: 70px; height: 70px; margin: 0 auto; border-radius: 4px;\" src=\"data:image/png;base64,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\"/></a>\n                    <p class=\"about\">This website uses Puter to bring you safe, secure, and private AI and Cloud features.</p>\n                    <div class=\"buttons\">\n                        <button class=\"button button-auth\" id=\"launch-auth-popup-cancel\">Cancel</button>\n                        <button class=\"button button-primary button-auth\" id=\"launch-auth-popup\" style=\"margin-left:10px;\">Continue</button>\n                    </div>\n                    <p style=\"text-align: center; margin-top: -15px; font-size: 14px;\">Powered by <a href=\"https://developer.puter.com/?utm_source=sdk-splash\" target=\"_blank\">Puter</a></p>\n                    <p class=\"launch-auth-popup-footnote\">By clicking 'Continue' you agree to Puter's <a href=\"https://puter.com/terms\" target=\"_blank\">Terms of Service</a> and <a href=\"https://puter.com/privacy\" target=\"_blank\">Privacy Policy</a>.</p>\n                </div>\n            </dialog>`;\n        }\n\n        this.shadowRoot.innerHTML = h;\n\n        // Event listener for the 'message' event\n        this.messageListener = async (event) => {\n            if ( event.data.msg === 'puter.token' ) {\n                this.close();\n                // Set the authToken property\n                puter.setAuthToken(event.data.token);\n                // update appID\n                puter.setAppID(event.data.app_uid);\n                // Remove the event listener to avoid memory leaks\n                window.removeEventListener('message', this.messageListener);\n\n                puter.puterAuthState.authGranted = true;\n                // Resolve the promise\n                this.resolve();\n\n                // Call onAuth callback\n                if ( puter.onAuth && typeof puter.onAuth === 'function' ) {\n                    puter.getUser().then((user) => {\n                        puter.onAuth(user);\n                    });\n                }\n\n                puter.puterAuthState.isPromptOpen = false;\n                // Resolve or reject any waiting promises.\n                if ( puter.puterAuthState.resolver ) {\n                    if ( puter.puterAuthState.authGranted ) {\n                        puter.puterAuthState.resolver.resolve();\n                    } else {\n                        puter.puterAuthState.resolver.reject();\n                    }\n                    puter.puterAuthState.resolver = null;\n                };\n            }\n        };\n\n    }\n\n    // Optional: Handle dialog cancellation as rejection\n    cancelListener = () => {\n        this.close();\n        window.removeEventListener('message', this.messageListener);\n        puter.puterAuthState.authGranted = false;\n        puter.puterAuthState.isPromptOpen = false;\n\n        // Reject the promise with an error message indicating user cancellation.\n        // This ensures that the calling code's catch block will be triggered.\n        this.reject(new Error('User cancelled the authentication'));\n\n        // If there's a resolver set, use it to reject the waiting promise as well.\n        if ( puter.puterAuthState.resolver ) {\n            puter.puterAuthState.resolver.reject(new Error('User cancelled the authentication'));\n            puter.puterAuthState.resolver = null;\n        }\n    };\n\n    connectedCallback () {\n        // Add event listener to the button\n        this.shadowRoot.querySelector('#launch-auth-popup')?.addEventListener('click', () => {\n            let w = 600;\n            let h = 400;\n            let title = 'Puter';\n            var left = (screen.width / 2) - (w / 2);\n            var top = (screen.height / 2) - (h / 2);\n            window.open(`${puter.defaultGUIOrigin }/?embedded_in_popup=true&request_auth=true${ window.crossOriginIsolated ? '&cross_origin_isolated=true' : ''}`,\n                            title,\n                            `toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=${ w }, height=${ h }, top=${ top }, left=${ left}`);\n        });\n\n        // Add the event listener to the window object\n        window.addEventListener('message', this.messageListener);\n\n        // Add event listeners for cancel and close buttons\n        this.shadowRoot.querySelector('#launch-auth-popup-cancel')?.addEventListener('click', this.cancelListener);\n        this.shadowRoot.querySelector('.close-btn')?.addEventListener('click', this.cancelListener);\n    }\n\n    open () {\n        if ( this.hasUserActivation() ) {\n            let w = 600;\n            let h = 400;\n            let title = 'Puter';\n            var left = (screen.width / 2) - (w / 2);\n            var top = (screen.height / 2) - (h / 2);\n            window.open(`${puter.defaultGUIOrigin }/?embedded_in_popup=true&request_auth=true${ window.crossOriginIsolated ? '&cross_origin_isolated=true' : ''}`,\n                            title,\n                            `toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=${ w }, height=${ h }, top=${ top }, left=${ left}`);\n        }\n        else {\n            this.shadowRoot.querySelector('dialog').showModal();\n        }\n    }\n\n    close () {\n        this.shadowRoot.querySelector('dialog').close();\n    }\n}\nif ( PuterDialog.__proto__ === globalThis.HTMLElement )\n{\n    customElements.define('puter-dialog', PuterDialog);\n}\n\nexport default PuterDialog;\n", "/**\n * This module provides a simple RPC mechanism for cross-document\n * (iframe / window.postMessage) communication.\n */\n\n// Since `Symbol` is not clonable, we use a UUID to identify RPCs.\nexport const $SCOPE = '9a9c83a4-7897-43a0-93b9-53217b84fde6';\n\n/**\n * The CallbackManager is used to manage callbacks for RPCs.\n * It is used by the dehydrator and hydrator to store and retrieve\n * the functions that are being called remotely.\n */\nexport class CallbackManager {\n    #messageId = 1;\n\n    constructor () {\n        this.callbacks = new Map();\n    }\n\n    register_callback (callback) {\n        const id = this.#messageId++;\n        this.callbacks.set(id, callback);\n        return id;\n    }\n\n    attach_to_source (source) {\n        source.addEventListener('message', event => {\n            const { data } = event;\n            if ( data && typeof data === 'object' && data.$SCOPE === $SCOPE ) {\n                const { id, args } = data;\n                const callback = this.callbacks.get(id);\n                if ( callback ) {\n                    callback(...args);\n                }\n            }\n        });\n    }\n}\n\n/**\n * The dehydrator replaces functions in an object with identifiers,\n * so that hydrate() can be called on the other side of the frame\n * to bind RPC stubs. The original functions are stored in a map\n * so that they can be called when the RPC is invoked.\n */\nexport class Dehydrator {\n    constructor ({ callbackManager }) {\n        this.callbackManager = callbackManager;\n    }\n    dehydrate (value) {\n        return this.dehydrate_value_(value);\n    }\n    dehydrate_value_ (value) {\n        if ( typeof value === 'function' ) {\n            const id = this.callbackManager.register_callback(value);\n            return { $SCOPE, id };\n        } else if ( Array.isArray(value) ) {\n            return value.map(this.dehydrate_value_.bind(this));\n        } else if ( typeof value === 'object' && value !== null ) {\n            const result = {};\n            for ( const key in value ) {\n                result[key] = this.dehydrate_value_(value[key]);\n            }\n            return result;\n        } else {\n            return value;\n        }\n    }\n}\n\n/**\n * The hydrator binds RPC stubs to the functions that were\n * previously dehydrated. This allows the RPC to be invoked\n * on the other side of the frame.\n */\nexport class Hydrator {\n    constructor ({ target }) {\n        this.target = target;\n    }\n    hydrate (value) {\n        return this.hydrate_value_(value);\n    }\n    hydrate_value_ (value) {\n        if (\n            value && typeof value === 'object' &&\n            value.$SCOPE === $SCOPE\n        ) {\n            const { id } = value;\n            return (...args) => {\n                this.target.postMessage({ $SCOPE, id, args }, '*');\n            };\n        } else if ( Array.isArray(value) ) {\n            return value.map(this.hydrate_value_.bind(this));\n        } else if ( typeof value === 'object' && value !== null ) {\n            const result = {};\n            for ( const key in value ) {\n                result[key] = this.hydrate_value_(value[key]);\n            }\n            return result;\n        }\n        return value;\n    }\n}\n", "import { $SCOPE, CallbackManager, Dehydrator, Hydrator } from '../lib/xdrpc.js';\n\n/**\n * The Util module exposes utilities within puter.js itself.\n * These utilities may be used internally by other modules.\n */\nexport default class Util {\n    constructor () {\n        // This is in `puter.util.rpc` instead of `puter.rpc` because\n        // `puter.rpc` is reserved for an app-to-app RPC interface.\n        // This is a lower-level RPC interface used to communicate\n        // with iframes.\n        this.rpc = new UtilRPC();\n    }\n}\n\nclass UtilRPC {\n    constructor () {\n        this.callbackManager = new CallbackManager();\n        this.callbackManager.attach_to_source(globalThis);\n    }\n\n    getDehydrator () {\n        return new Dehydrator({ callbackManager: this.callbackManager });\n    }\n\n    getHydrator ({ target }) {\n        return new Hydrator({ target });\n    }\n\n    registerCallback (resolve) {\n        return this.callbackManager.register_callback(resolve);\n    }\n\n    send (target, id, ...args) {\n        target.postMessage({ $SCOPE, id, args }, '*');\n    }\n}\n", "import getAbsolutePathForApp from './FileSystem/utils/getAbsolutePathForApp.js';\nimport * as utils from '../lib/utils.js';\n\nexport class WorkersHandler {\n\n    constructor (authToken) {\n        this.authToken = authToken;\n    }\n\n    async create (workerName, filePath, appName) {\n        if ( !puter.authToken && puter.env === 'web' ) {\n            try {\n                await puter.ui.authenticateWithPuter();\n            } catch (e) {\n                // if authentication fails, throw an error\n                throw 'Authentication failed.';\n            }\n        }\n\n        let appId;\n        if ( typeof (appName) === 'string' ) {\n            appId = ((await puter.apps.list()).find(el => el.name === appName)).uid;\n        }\n\n        workerName = workerName.toLocaleLowerCase(); // just incase\n        let currentWorkers = await puter.kv.get('user-workers');\n        if ( ! currentWorkers ) {\n            currentWorkers = {};\n        }\n        filePath = getAbsolutePathForApp(filePath);\n\n        const driverResult = await utils.make_driver_method(['authorization', 'filePath', 'workerName', 'appId'], 'workers', 'worker-service', 'create')(puter.authToken, filePath, workerName, appId);;\n\n        if ( ! driverResult.success ) {\n            throw new Error(driverResult?.errors || 'Driver failed to execute, do you have the necessary permissions?');\n        }\n        currentWorkers[workerName] = { filePath, url: driverResult['url'], deployTime: Date.now(), createTime: Date.now() };\n        await puter.kv.set('user-workers', currentWorkers);\n\n        return driverResult;\n    }\n\n    async exec (...args) {\n        if ( !puter.authToken && puter.env === 'web' ) {\n            try {\n                await puter.ui.authenticateWithPuter();\n            } catch (e) {\n                // if authentication fails, throw an error\n                throw 'Authentication failed.';\n            }\n        }\n\n        const req = new Request(...args);\n        if ( ! req.headers.get('puter-auth') ) {\n            req.headers.set('puter-auth', puter.authToken);\n        }\n        return fetch(req);\n    }\n\n    async list () {\n        if ( !puter.authToken && puter.env === 'web' ) {\n            try {\n                await puter.ui.authenticateWithPuter();\n            } catch (e) {\n                // if authentication fails, throw an error\n                throw 'Authentication failed.';\n            }\n        }\n        const driverCall = await utils.make_driver_method([], 'workers', 'worker-service', 'getFilePaths')();\n        return driverCall;\n    }\n\n    async get (workerName) {\n        if ( !puter.authToken && puter.env === 'web' ) {\n            try {\n                await puter.ui.authenticateWithPuter();\n            } catch (e) {\n                // if authentication fails, throw an error\n                throw 'Authentication failed.';\n            }\n        }\n\n        workerName = workerName.toLocaleLowerCase(); // just incase\n        const driverCall = await utils.make_driver_method(['workerName'], 'workers', 'worker-service', 'getFilePaths')(workerName);\n        return driverCall[0];\n    }\n\n    async delete (workerName) {\n        if ( !puter.authToken && puter.env === 'web' ) {\n            try {\n                await puter.ui.authenticateWithPuter();\n            } catch (e) {\n                // if authentication fails, throw an error\n                throw 'Authentication failed.';\n            }\n        }\n\n        workerName = workerName.toLocaleLowerCase(); // just incase\n        // const driverCall = await puter.drivers.call(\"workers\", \"worker-service\", \"destroy\", { authorization: puter.authToken, workerName });\n        const driverResult = await utils.make_driver_method(['authorization', 'workerName'], 'workers', 'worker-service', 'destroy')(puter.authToken, workerName);\n\n        if ( ! driverResult.result ) {\n            if ( ! driverResult.result ) {\n                new Error(\"Worker doesn't exist\");\n            }\n            throw new Error(driverResult?.errors || 'Driver failed to execute, do you have the necessary permissions?');\n        } else {\n            let currentWorkers = await puter.kv.get('user-workers');\n\n            if ( ! currentWorkers ) {\n                currentWorkers = {};\n            }\n            delete currentWorkers[workerName];\n\n            await puter.kv.set('user-workers', currentWorkers);\n            return true;\n        }\n    }\n\n    async getLoggingHandle (workerName) {\n        const loggingEndpoint = await utils.make_driver_method([], 'workers', 'worker-service', 'getLoggingUrl')(puter.authToken, workerName);\n        const socket = new WebSocket(`${loggingEndpoint}/${puter.authToken}/${workerName}`);\n        const logStreamObject = new EventTarget();\n        logStreamObject.onLog = (data) => {\n\n        };\n\n        // Coercibility to ReadableStream\n        Object.defineProperty(logStreamObject, 'start', {\n            enumerable: false,\n            value: async (controller) => {\n                socket.addEventListener('message', (event) => {\n                    controller.enqueue(JSON.parse(event.data));\n                });\n                socket.addEventListener('close', (event) => {\n                    try {\n                        controller.close();\n                    } catch (e) {\n\n                    }\n                });\n            },\n        });\n        Object.defineProperty(logStreamObject, 'cancel', {\n            enumerable: false,\n            value: async () => {\n                socket.close();\n            },\n        });\n\n        socket.addEventListener('message', (event) => {\n            const logEvent = new MessageEvent('log', { data: JSON.parse(event.data) });\n\n            logStreamObject.dispatchEvent(logEvent);\n            logStreamObject.onLog(logEvent);\n        });\n        logStreamObject.close = socket.close;\n        return new Promise((res, rej) => {\n            let done = false;\n            socket.onopen = () => {\n                done = true;\n                res(logStreamObject);\n            };\n\n            socket.onerror = () => {\n                if ( ! done ) {\n                    rej('Failed to open logging connection');\n                }\n            };\n        });\n    }\n\n}\n", "import putility from '@heyputer/putility';\n\nconst { TTopics } = putility.traits;\n\n/**\n * Manages the auth token and origin used to communicate with\n * Puter's API\n */\nexport class APIAccessService extends putility.concepts.Service {\n    static TOPICS = ['update'];\n\n    static PROPERTIES = {\n        auth_token: {\n            post_set (v) {\n                this.as(TTopics).pub('update');\n            },\n        },\n        api_origin: {\n            post_set () {\n                this.as(TTopics).pub('update');\n            },\n        },\n    };\n\n    // TODO: inconsistent! Update all dependents.\n    get_api_info () {\n        const self = this;\n        const o = {};\n        [\n            ['auth_token', 'auth_token'],\n            ['authToken', 'auth_token'],\n            ['APIOrigin', 'api_origin'],\n            ['api_origin', 'api_origin'],\n        ].forEach(([k1, k2]) => {\n            Object.defineProperty(o, k1, {\n                get () {\n                    return self[k2];\n                },\n                set (v) {\n                    return self;\n                },\n            });\n        });\n        return o;\n    }\n}\n", "import putility from '@heyputer/putility';\nimport { PuterAPIFilesystem } from '../lib/filesystem/APIFS.js';\nimport { CachedFilesystem } from '../lib/filesystem/CacheFS.js';\nimport { ProxyFilesystem, TFilesystem } from '../lib/filesystem/definitions.js';\nimport { PostMessageFilesystem } from '../lib/filesystem/PostMessageFS.js';\nimport io from '../lib/socket.io/socket.io.esm.min.js';\n\nexport class FilesystemService extends putility.concepts.Service {\n    static PROPERTIES = {\n        // filesystem:\n    };\n\n    static DEPENDS = ['api-access'];\n    static HOOKS = [\n        {\n            service: 'api-access',\n            event: 'update',\n            description: `\n                re-initialize the socket connection whenever the\n                authentication token or API origin is changed.\n            `,\n            async do () {\n                this.initializeSocket();\n            },\n        },\n    ];\n\n    _init () {\n        const env = this._.context.env;\n\n        if ( env === 'app' ) {\n            // TODO: uncomment when relay is ready\n            // this.init_app_fs_();\n\n            this.init_top_fs_();\n        } else {\n            this.init_top_fs_();\n        }\n\n        this.initializeSocket();\n    }\n\n    init_app_fs_ () {\n        this.fs_nocache_ = new PostMessageFilesystem({\n            messageTarget: globalThis.parent,\n            rpc: this._.context.util.rpc,\n        }).as(TFilesystem);\n        this.filesystem = this.fs_nocache_;\n    }\n    init_top_fs_ () {\n        const api_info = this._.context.services.get('api-access').get_api_info();\n        this.fs_nocache_ = new PuterAPIFilesystem({ api_info }).as(TFilesystem);\n        this.fs_cache_ = new CachedFilesystem({ delegate: this.fs_nocache_ }).as(TFilesystem);\n        // this.filesystem = this.fs_nocache;\n        this.fs_proxy_ = new ProxyFilesystem({ delegate: this.fs_nocache_ });\n        this.filesystem = this.fs_proxy_.as(TFilesystem);\n    }\n\n    cache_on () {\n        this.fs_proxy_.delegate = this.fs_cache_;\n    }\n    cache_off () {\n        this.fs_proxy_.delegate = this.fs_nocache_;\n    }\n\n    async initializeSocket () {\n        if ( this.socket ) {\n            this.socket.disconnect();\n        }\n\n        const svc_apiAccess = this._.context.services.get('api-access');\n        const api_info = svc_apiAccess.get_api_info();\n\n        if ( api_info.api_origin === undefined ) {\n            // This will get called again later with updated information\n            return;\n        }\n\n        this.socket = io(api_info.api_origin, {\n            auth: { auth_token: api_info.auth_token },\n            autoUnref: this._.context.env === 'nodejs',\n        });\n\n        this.bindSocketEvents();\n    }\n\n    bindSocketEvents () {\n        this.socket.on('connect', () => {\n            if ( puter.debugMode )\n            {\n                console.log('FileSystem Socket: Connected', this.socket.id);\n            }\n        });\n\n        this.socket.on('disconnect', () => {\n            if ( puter.debugMode )\n            {\n                console.log('FileSystem Socket: Disconnected');\n            }\n        });\n\n        this.socket.on('reconnect', (attempt) => {\n            if ( puter.debugMode )\n            {\n                console.log('FileSystem Socket: Reconnected', this.socket.id);\n            }\n        });\n\n        this.socket.on('reconnect_attempt', (attempt) => {\n            if ( puter.debugMode )\n            {\n                console.log('FileSystem Socket: Reconnection Attemps', attempt);\n            }\n        });\n\n        this.socket.on('reconnect_error', (error) => {\n            if ( puter.debugMode )\n            {\n                console.log('FileSystem Socket: Reconnection Error', error);\n            }\n        });\n\n        this.socket.on('reconnect_failed', () => {\n            if ( puter.debugMode )\n            {\n                console.log('FileSystem Socket: Reconnection Failed');\n            }\n        });\n\n        this.socket.on('error', (error) => {\n            if ( puter.debugMode )\n            {\n                console.error('FileSystem Socket Error:', error);\n            }\n        });\n    }\n}\n", "import * as utils from '../utils.js';\nimport putility from '@heyputer/putility';\nimport { TeePromise } from '@heyputer/putility/src/libs/promise.js';\nimport getAbsolutePathForApp from '../../modules/FileSystem/utils/getAbsolutePathForApp.js';\nimport { TFilesystem } from './definitions.js';\n\nexport class PuterAPIFilesystem extends putility.AdvancedBase {\n    constructor ({ api_info }) {\n        super();\n        this.api_info = api_info;\n    }\n\n    static IMPLEMENTS = {\n        [TFilesystem]: {\n            stat: async function (options) {\n                this.ensure_auth_();\n                const tp = new TeePromise();\n\n                const xhr = new utils.initXhr('/stat', this.api_info.APIOrigin, undefined, 'post', 'text/plain;actually=json');\n                utils.setupXhrEventHandlers(xhr, undefined, undefined, tp.resolve.bind(tp), tp.reject.bind(tp));\n\n                let dataToSend = {};\n                if ( options.uid !== undefined ) {\n                    dataToSend.uid = options.uid;\n                } else if ( options.path !== undefined ) {\n                    // If dirPath is not provided or it's not starting with a slash, it means it's a relative path\n                    // in that case, we need to prepend the app's root directory to it\n                    dataToSend.path = getAbsolutePathForApp(options.path);\n                }\n\n                dataToSend.return_subdomains = options.returnSubdomains;\n                dataToSend.return_permissions = options.returnPermissions;\n                dataToSend.return_versions = options.returnVersions;\n                dataToSend.return_size = options.returnSize;\n                dataToSend.auth_token = this.api_info.authToken;\n\n                xhr.send(JSON.stringify(dataToSend));\n\n                return await tp;\n            },\n            readdir: async function (options) {\n                this.ensure_auth_();\n                const tp = new TeePromise();\n\n                const xhr = new utils.initXhr('/readdir', this.api_info.APIOrigin, undefined, 'post', 'text/plain;actually=json');\n                utils.setupXhrEventHandlers(xhr, undefined, undefined, tp.resolve.bind(tp), tp.reject.bind(tp));\n\n                xhr.send(JSON.stringify({ path: getAbsolutePathForApp(options.path), auth_token: this.api_info.authToken }));\n\n                return await tp;\n            },\n        },\n    };\n\n    ensure_auth_ () {\n        // TODO: remove reference to global 'puter'; get 'env' via context\n        if ( !this.api_info.authToken && puter.env === 'web' ) {\n            try {\n                this.ui.authenticateWithPuter();\n            } catch (e) {\n                throw new Error('Authentication failed.');\n            }\n        }\n    }\n}\n", "import putility from '@heyputer/putility';\n\nexport const TFilesystem = 'TFilesystem';\n\n// TODO: UNUSED (eventually putility will support these definitions)\n//       This is here so that the idea is not forgotten.\nexport const IFilesystem = {\n    methods: {\n        stat: {\n            parameters: {\n                path: {\n                    alias: 'uid',\n                },\n            },\n        },\n    },\n\n};\n\nexport class ProxyFilesystem extends putility.AdvancedBase {\n    static PROPERTIES = {\n        delegate: () => {\n        },\n    };\n    // TODO: constructor implied by properties\n    constructor ({ delegate }) {\n        super();\n        this.delegate = delegate;\n    }\n    static IMPLEMENTS = {\n        [TFilesystem]: {\n            stat: async function (o) {\n                return this.delegate.stat(o);\n            },\n            readdir: async function (o) {\n                return this.delegate.readdir(o);\n            },\n        },\n    };\n}\n", "import putility from '@heyputer/putility';\nimport { RWLock } from '@heyputer/putility/src/libs/promise.js';\nimport { ProxyFilesystem, TFilesystem } from './definitions.js';\nimport { uuidv4 } from '../utils.js';\n\nexport const ROOT_UUID = '00000000-0000-0000-0000-000000000000';\nconst TTL = 5 * 1000;\n\nexport class CacheFS extends putility.AdvancedBase {\n    static PROPERTIES = {\n        assocs_path_: () => ({}),\n        assocs_uuid_: () => ({}),\n        entries: () => ({}),\n    };\n\n    get_entry_ei (external_identifier) {\n        if ( Array.isArray(external_identifier) ) {\n            for ( const ei of external_identifier ) {\n                const entry = this.get_entry_ei(ei);\n                if ( entry ) return entry;\n            }\n            return;\n        }\n\n        console.log('GET ENTRY EI', external_identifier);\n\n        const internal_identifier =\n            this.assocs_path_[external_identifier] ||\n            this.assocs_uuid_[external_identifier] ||\n            external_identifier;\n\n        if ( ! internal_identifier ) {\n            return;\n        }\n        return this.entries[internal_identifier];\n    }\n\n    add_entry ({ id } = {}) {\n        const internal_identifier = id ?? uuidv4();\n        const entry = {\n            id: internal_identifier,\n            stat_has: {},\n            stat_exp: 0,\n            locks: {\n                stat: new RWLock(),\n                members: new RWLock(),\n            },\n        };\n        this.entries[internal_identifier] = entry;\n        return entry;\n    }\n\n    assoc_path (path, internal_identifier) {\n        console.log('ASSOC PATH', path, internal_identifier);\n        this.assocs_path_[path] = internal_identifier;\n    }\n\n    assoc_uuid (uuid, internal_identifier) {\n        if ( uuid === internal_identifier ) return;\n        this.assocs_uuid_[uuid] = internal_identifier;\n    }\n\n}\n\nexport class CachedFilesystem extends ProxyFilesystem {\n    constructor (o) {\n        super(o);\n        // this.cacheFS = cacheFS;\n        this.cacheFS = new CacheFS();\n    }\n    static IMPLEMENTS = {\n        [TFilesystem]: {\n            stat: async function (o) {\n                let cent = this.cacheFS.get_entry_ei(o.path ?? o.uid);\n\n                const modifiers = [\n                    'subdomains',\n                    'permissions',\n                    'versions',\n                    'size',\n                ];\n\n                let values_requested = {};\n                for ( const mod of modifiers ) {\n                    const optionsKey = `return${\n                        mod.charAt(0).toUpperCase()\n                    }${mod.slice(1)}`;\n                    if ( ! o[optionsKey] ) continue;\n                    values_requested[mod] = true;\n                }\n\n                const satisfactory_cache = cent => {\n                    for ( const mod of modifiers ) {\n                        if ( ! values_requested[mod] ) continue;\n                        if ( ! cent.stat_has[mod] ) {\n                            return false;\n                        }\n                    }\n                    return true;\n                };\n\n                let cached_stat;\n                if ( cent && cent.stat && cent.stat_exp > Date.now() ) {\n                    const l = await cent.locks.stat.rlock();\n                    if ( satisfactory_cache(cent) ) {\n                        cached_stat = cent.stat;\n                    }\n                    l.unlock();\n                }\n\n                if ( cached_stat ) {\n                    console.log('CACHE HIT');\n                    return cached_stat;\n                }\n                console.log('CACHE MISS');\n\n                let l;\n                if ( cent ) {\n                    l = await cent.locks.stat.wlock();\n                }\n\n                console.log('DOING THE STAT', o);\n                const entry = await this.delegate.stat(o);\n\n                // We might have new information to identify a relevant cache entry\n                let cent_replaced = !!cent;\n                cent = this.cacheFS.get_entry_ei([entry.uid, entry.path]);\n                if ( cent ) {\n                    if ( cent_replaced ) l.unlock();\n                    l = await cent.locks.stat.wlock();\n                }\n\n                if ( ! cent ) {\n                    cent = this.cacheFS.add_entry({ id: entry.uid });\n                    this.cacheFS.assoc_path(entry.path, cent.id);\n                    this.cacheFS.assoc_uuid(entry.uid, cent.id);\n\n                    l = await cent.locks.stat.wlock();\n                }\n\n                cent.stat = entry;\n                cent.stat_has = { ...values_requested };\n                // TODO: increase cache TTL once invalidation works\n                cent.stat_exp = Date.now() + TTL;\n\n                l.unlock();\n\n                console.log('RETRUNING THE ENTRY', entry);\n                return entry;\n            },\n            readdir: async function (o) {\n                let cent = this.cacheFS.get_entry_ei([o.path, o.uid]);\n\n                console.log('CENT', cent, o);\n                let stats = null;\n                if ( cent && cent.members && cent.members_exp > Date.now() ) {\n                    console.log('MEMBERS', cent.members);\n                    stats = [];\n                    const l = await cent.locks.stat.rlock();\n\n                    for ( const id of cent.members ) {\n                        const member = this.cacheFS.get_entry_ei(id);\n                        if ( !member || !member.stat || member.stat_exp <= Date.now() ) {\n                            console.log('NO MEMBER OR STAT', member);\n                            stats = null;\n                            break;\n                        }\n                        console.log('member', member);\n                        if ( !o.no_assocs && !member.stat_has.subdomains ) {\n                            stats = null;\n                            break;\n                        }\n                        if ( !o.no_assocs && !member.stat_has.apps ) {\n                            stats = null;\n                            break;\n                        }\n                        if ( !o.no_thumbs && !member.stat_has.thumbnail ) {\n                            stats = null;\n                            break;\n                        }\n                        console.log('PUSHING', member.stat);\n\n                        stats.push(member.stat);\n                    }\n\n                    l.unlock();\n                }\n\n                console.log('STATS????', stats);\n                if ( stats ) {\n                    return stats;\n                }\n\n                let l;\n                if ( cent ) {\n                    l = await cent.locks.members.wlock();\n                }\n\n                const entries = await this.delegate.readdir(o);\n                if ( ! cent ) {\n                    cent = this.cacheFS.add_entry(o.uid ? { id: o.uid } : {});\n                    if ( o.path ) this.cacheFS.assoc_path(o.path, cent.id);\n                    l = await cent.locks.members.wlock();\n                }\n\n                let cent_ids = [];\n                for ( const entry of entries ) {\n                    let entry_cent = this.cacheFS.get_entry_ei([entry.path, entry.uid]);\n                    if ( ! entry_cent ) {\n                        entry_cent = this.cacheFS.add_entry({ id: entry.uid });\n                        this.cacheFS.assoc_path(entry.path, entry.uid);\n                    }\n                    cent_ids.push(entry_cent.id);\n                    // TODO: update_stat_ is not implemented\n                    // this.cacheFS.update_stat_(entry_cent, entry, {\n                    //     subdomains: ! o.no_assocs,\n                    //     apps: ! o.no_assocs,\n                    //     thumbnail: ! o.no_thumbs,\n                    // });\n                    entry_cent.stat = entry;\n                    entry_cent.stat_has = {\n                        subdomains: !o.no_assocs,\n                        apps: !o.no_assocs,\n                        thumbnail: !o.no_thumbs,\n                    };\n                    entry_cent.stat_exp = Date.now() + 1000 * 3;\n                }\n\n                cent.members = [];\n                for ( const id of cent_ids ) {\n                    cent.members.push(id);\n                }\n                cent.members_exp = Date.now() + TTL;\n\n                l.unlock();\n\n                console.log('CACHE ENTRY?', cent);\n\n                return entries;\n            },\n        },\n    };\n}\n", "import putility from '@heyputer/putility';\nimport { TFilesystem } from './definitions.js';\n\nconst example =     {\n    'id': 'f485f1ba-de07-422c-8c4b-c2da057d4a44',\n    'uid': 'f485f1ba-de07-422c-8c4b-c2da057d4a44',\n    'is_dir': true,\n    'immutable': true,\n    'name': 'Test',\n};\n\nexport class PostMessageFilesystem extends putility.AdvancedBase {\n    constructor ({ rpc, messageTarget }) {\n        super();\n        this.rpc = rpc;\n        this.messageTarget = messageTarget;\n    }\n    static IMPLEMENTS = {\n        [TFilesystem]: {\n            stat: async function (o) {\n                return example;\n            },\n            readdir: async function (o) {\n                const tp = new putility.libs.promise.TeePromise();\n                const $callback = this.rpc.registerCallback((result) => {\n                    tp.resolve(result);\n                });\n                // return [example];\n                this.messageTarget.postMessage({\n                    $: 'puter-fs',\n                    $callback,\n                    op: 'readdir',\n                    args: o,\n                }, '*');\n\n                return await tp;\n            },\n        },\n    };\n}\n", "import putility from '@heyputer/putility';\n\nconst example =     {\n    'id': 'f485f1ba-de07-422c-8c4b-c2da057d4a44',\n    'uid': 'f485f1ba-de07-422c-8c4b-c2da057d4a44',\n    'is_dir': true,\n    'immutable': true,\n    'name': 'FromParentWindow',\n};\n\nexport class FSRelayService extends putility.concepts.Service {\n    async _init () {\n        const services = this._.context.services;\n        const util = this._.context.util;\n        const svc_xdIncoming = services.get('xd-incoming');\n        svc_xdIncoming.register_tagged_listener('puter-fs', event => {\n            util.rpc.send(event.source, event.data.$callback, [example]);\n        });\n    }\n}\n", "import putility from '@heyputer/putility';\n\n/**\n * Runs commands on the special `globalThis.when_puter_happens` global, for\n * situations where the `puter` global doesn't exist soon enough.\n */\nexport class NoPuterYetService extends putility.concepts.Service {\n    _init () {\n        if ( ! globalThis.when_puter_happens ) return;\n        if ( puter && puter.env !== 'gui' ) return;\n\n        if ( ! Array.isArray(globalThis.when_puter_happens) ) {\n            globalThis.when_puter_happens = [globalThis.when_puter_happens];\n        }\n\n        for ( const fn of globalThis.when_puter_happens ) {\n            fn({ context: this._.context });\n        }\n    }\n}\n", "import putility from '@heyputer/putility';\n\nconst TeePromise = putility.libs.promise.TeePromise;\n\n/**\n * Manages message events from the window object.\n */\nexport class XDIncomingService extends putility.concepts.Service {\n    _construct () {\n        this.filter_listeners_ = [];\n        this.tagged_listeners_ = {};\n    }\n\n    _init () {\n        globalThis.addEventListener('message', async event => {\n            for ( const fn of this.filter_listeners_ ) {\n                const tp = new TeePromise();\n                fn(event, tp);\n                if ( await tp ) return;\n            }\n\n            const data = event.data;\n            if ( ! data ) return;\n            const tag = data.$;\n            if ( ! tag ) return;\n            if ( ! this.tagged_listeners_[tag] ) return;\n\n            for ( const fn of this.tagged_listeners_[tag] ) {\n                fn({ data, source: event.source });\n            }\n        });\n    }\n\n    register_filter_listener (fn) {\n        this.filter_listeners_.push(fn);\n    }\n\n    register_tagged_listener (tag, fn) {\n        if ( ! this.tagged_listeners_[tag] ) {\n            this.tagged_listeners_[tag] = [];\n        }\n        this.tagged_listeners_[tag].push(fn);\n    }\n}\n"],
  "mappings": "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",
  "names": ["exports", "module", "exports", "module", "a", "exports", "module", "k", "exports", "module", "k", "exports", "module", "exports", "module", "e", "exports", "module", "exports", "module", "exports", "module", "TTopics", "k", "v", "exports", "module", "AdvancedBase", "exports", "module", "TTopics", "exports", "module", "AdvancedBase", "NOOP", "a", "o", "k", "exports", "module", "AdvancedBase", "i", "exports", "module", "TeePromise", "a", "RWLock", "item", "exports", "module", "k", "exports", "module", "AdvancedBase", "v", "require", "l", "k", "exports", "module", "m", "p", "w", "str", "exports", "module", "n", "exports", "module", "a", "b", "str", "exports", "module", "i", "exports", "module", "AdvancedBase", "exports", "module", "AdvancedBase", "exports", "module", "exports", "module", "i", "j", "e", "kvjs", "a", "b", "R", "c", "import_putility", "e", "path", "i", "start", "e", "i", "arrays", "textde", "XMLHttpRequest", "self", "c", "e", "Stream", "texten", "i", "models", "e", "i", "driverCall", "v", "options", "resolve", "reject", "w", "h", "e", "e", "Stream", "puter", "a", "s", "t", "e", "o", "h", "n", "i", "r", "a", "c", "u", "t", "e", "s", "n", "i", "r", "o", "a", "e", "e", "e", "e", "e", "inflightRequests", "DEDUPLICATION_WINDOW_MS", "e", "e", "e", "i", "e", "e", "e", "i", "a", "b", "j", "k", "items", "e", "path", "path", "e", "e", "e", "i", "cache", "payload", "i", "texten", "e", "read", "write", "e", "mergeUint8Arrays", "e", "i", "arrays", "reqObj", "import_putility", "e", "w", "h", "p", "e", "w", "h", "putility", "x", "y", "resolve", "path", "entries", "files", "i", "siblings", "el", "e", "driverCall", "import_putility", "putility", "v", "self", "o", "import_putility", "import_putility", "import_promise", "import_putility", "putility", "o", "putility", "e", "import_putility", "import_promise", "putility", "path", "o", "cent", "l", "import_putility", "putility", "o", "putility", "import_putility", "example", "putility", "import_putility", "putility", "import_putility", "TeePromise", "putility", "v", "kvjs", "putility", "e", "puter"]
}
